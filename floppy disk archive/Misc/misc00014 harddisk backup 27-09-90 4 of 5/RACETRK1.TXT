; Changes for RACETRK2.TXT
; Copy ALL standard routines (with occupations) after the murder-
; specific stuff
;
; Racetrk1.txt (list5) - part 1 - murders 1-3
;
; Racetrack & floorpointer tables for Grange Murder.
;
npcinitial
list5
; first we have a dummy entry for npc 0
; this is used as some pointers to the *other*
; things which are used in this list
; (the equivalent of this area in list6 is used for temp workspace)
;
 dc.w floorpointers-npcinitial
 dc.w racetracks-npcinitial
 dc.w reversaltable-npcinitial
 dc.w 0 ; null
;
; For greed agression, timidity, obediance, there
; is a special case - if one of the values is 255, then
; the npc will always choose that one, if it is possible
; This is particularly useful for slaves etc.
; Note that npcs will still respond to attacks etc. - 
; anything which sets the 'attention flag'

FRIENDLY EQU 0
dodge equ 0
damage equ 0
; now the npc tables themselves...
defaultmale equ 3410
defaultfemale equ 3420
defaultanimal equ 3400
; npc 0 has dummy entry used as pointers above

; dc.b enemy, dodge, attack, hit points, obedience, patience, gold-sing
inactive equ $80
disabled equ $40 ; set for npc's in part 2

 dc.b friendly,dodge,35,100,3,1		; 1 USER
 dc.w defaultmale ; standard singing

 dc.b friendly,dodge,10,100,255,1	; 2 Sue
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 3 Vera
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 4 Kathy
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 5 Anthony
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 6 William
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 7 Robert
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 8 Fiona
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	; 9 Cliford
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	;10 Jarvis
 dc.w 3700

 dc.b friendly,dodge,10,100,255,1	;11 Inspector
 dc.w 3700

;---

floorpointers
; part of list5
; now 'floor pointers'
; there is one bye pair for each static room - the
; first byte gives the direction to go inwards
; and the second byte gives direction for going outwards
; (i.e. towards the synthesised grid)
;
; BIG WARNING
; all shapes must be simply connected. i.e. given a pair of rooms,
; you must be able to trace a path between them using only the
; OUT paths of one OR the other.
; This is because of the way the follow and GO code works.
north equ 1
east equ 3
south equ 5
west equ 7
up equ 2
down equ 4
west2 equ 6
east2 equ 8
north2 equ 14
south2 equ 15

 dc.b 0 ; room 0 (not used)
 dc.b 0 ; room 1 (not used)
 dc.b 0 ; 2
 dc.b north ; 3 arrival room
 dc.b 0 ; 4
 dc.b east ; 5 front left garden
 dc.b 0 ; 6
 dc.b 0 ; 7
 dc.b 0 ; 8
 dc.b 0 ; 9
 dc.b 0 ; 10
 dc.b 0 ; 11
 dc.b 0 ; 12
 dc.b 0 ; 13
 dc.b 0 ; 14
 dc.b 0 ; 15
 dc.b 0 ; 16
 dc.b 0 ; 17
 dc.b 0 ; 18
 dc.b 0 ; 19
 dc.b 0 ; 20
 dc.b 0 ; 21
 dc.b 0 ; 22
 dc.b 0 ; 23
 dc.b 0 ; 24
 dc.b 0 ; 25
 dc.b 0 ; 26
 dc.b 0 ; 27
 dc.b 0 ; 28
 dc.b 0 ; 29
 dc.b 0 ; 30
 dc.b 0 ; 31
 dc.b 0 ; 32
 dc.b 0 ; 33
 dc.b 0 ; 34
 dc.b 0 ; 35
 dc.b west ; 36 lawn+bushes
 dc.b west ; 37 shed
 dc.b south ; 38 drive
 dc.b west ; 39 front right garden
 dc.b south ; 40 right side garden
 dc.b 0 ; 41 back left garden
 dc.b south ; 42 back right garden
 dc.b west ; 43 lawn
 dc.b south ; 44 left side garden
 dc.b 0 ; 45 archway (ROOTROOM)
 dc.b south ; 46 back left garden
 dc.b south ; 47 front of house
 dc.b east ; 48 back of house
 dc.b south ; 49 n. drive
 dc.b west ; 50 gatehouse
 dc.b east2 ; 51 g.h. landing
 dc.b west ; 52 g.h bathroom
 dc.b east ; 53 g.h. bedroom
 dc.b 0 ; 54
 dc.b 0 ; 55
 dc.b 0 ; 56
 dc.b 0 ; 57
 dc.b 0 ; 58
 dc.b 0 ; 59 Sir Roberts washroom (removed)
 dc.b 0 ; 60
 dc.b east ; 61 wc
 dc.b west ; 62 wc
 dc.b north ; 63 wc
 dc.b west2 ; 64 cloak room
 dc.b west ; 65 wc
 dc.b 0 ; 66
 dc.b 0 ; 67
 dc.b 0 ; 68
 dc.b east ; 69 secret stairs
 dc.b 0 ; 70
 dc.b west2 ; 71 ne corridor
 dc.b west ;***** north ; 72 se corridor
 dc.b 0 ; 73
 dc.b east2 ; 74 nw corridor
 dc.b east ; 75 cellar
 dc.b west ; 76 corridor
 dc.b south ; 77 dining room
 dc.b north ; 78 larder
 dc.b east ; 79 drawing room
 dc.b west ; 80 kitchen
 dc.b south ; 81 study
 dc.b north ; 82 scullery
 dc.b south ; 83 hall
 dc.b down ; 84 landing
 dc.b west ; 85 games room
 dc.b south ; 86 entrance
 dc.b 0 ; 87 WC
 dc.b east ; 88 library
 dc.b 0 ; 89
 dc.b south ; 90 blue bedroom
 dc.b south ; 91 brown bedroom
 dc.b east ; 92 bamboo bedroom
 dc.b south ; 93 green bedroom
 dc.b north ; 94 master bedroom
 dc.b east ; 95 dressing room
 dc.b east ; 96 corridor
 dc.b north ; 97 oriental bedroom
 dc.b 0 ; 98
 dc.b 0 ; 99
;---
;
; Floorpointers+100...
;
; List of breaks or shortcuts that defy the floorpointers, mainly 
; occuring when there is a loop...
;
; DEST,ROOM,DIR to go in
floorptrbreaks
; Back Left Garden 46 to Back of House 48
 dc.b 48,46,3 ;e
; study 81 to drawing room 79
 dc.b 79,81,5 ;s
; library 88 to drawing room 79
 dc.b 79,88,1 ;n
; scullery 82 to right garden 40
 dc.b 40,82,3 ;e
; secret stairs 69 to ne corridor 71
 dc.b 71,69,14 ;n#2
;; secret stairs 69 to bathroom 63
; dc.b 63,69,15 ;s#2
; dressing room 95 to bamboo bedroom 92
 dc.b 92,95,6 ;w#2
; blue bedroom 90 to green bedroom 93
 dc.b 93,90,3 ;e
; dining room 77 to study 81
 dc.b 81,77,7 ;w
; se corridor 72 to bathroom 63
 dc.b 63,72,1 ;n
;
 dc.b 0,0,0
 even
;
;---
;
 even
racetracks
; sequences of commands which actors obey
; each is referred to by a 16-bit offset from the start of list5
; the initial sequences are contained in this table at the start..
;
; Pre Murder racetracks...
;
; Murder 1
 dc.w 0 ; 0
 dc.w 0 ; 1 - user
 dc.w SueRt1-list5 ; 2
 dc.w VeraRt1-list5 ; 3
 dc.w KathyRt1-list5 ; 4
 dc.w AnthonyRt1-list5 ; 5
 dc.w WilliamRt1-list5 ; 6
 dc.w RobertRt1-list5 ; 7
 dc.w FionaRt1-list5 ; 8
 dc.w CliffordRt1-list5 ; 9
 dc.w Jarvisrt1-list5 ; 10
 dc.w InspectorRt1-list5 ; 11
;
; Murder 2
 dc.w 0 ; 12
 dc.w 0 ; 13
 dc.w SueRt2-list5 ; 14
 dc.w VeraRt2-list5 ; 15
 dc.w KathyRt2-list5 ; 16
 dc.w AnthonyRt2-list5 ; 17
 dc.w WilliamRt2-list5 ; 18
 dc.w RobertRt2-list5 ; 19
 dc.w FionaRt2-list5 ; 20
 dc.w CliffordRt2-list5 ; 21
 dc.w Jarvisrt2-list5 ; 22
 dc.w InspectorRt2-list5 ; 23
;
; Murder 3
 dc.w 0 ; 24
 dc.w 0 ; 25
 dc.w SueRt3-list5 ; 26
 dc.w VeraRt3-list5 ; 27
 dc.w KathyRt3-list5 ; 28
 dc.w AnthonyRt3-list5 ; 29
 dc.w WilliamRt3-list5 ; 30
 dc.w RobertRt3-list5 ; 31
 dc.w FionaRt3-list5 ; 32
 dc.w CliffordRt3-list5 ; 33
 dc.w Jarvisrt3-list5 ; 34
 dc.w InspectorRt3-list5 ; 35
;
 ds.w 12*6 ; dummy blocks for murders 4-9
;
 dc.w 0
 dc.w 0
;
; Jarvis answers door to greet npc, using racetrack 110+npc
 dc.w JarvisInitial-list5 ; 110 used in between guests arriving
 dc.w JarvisAnswerDoor-list5 ; 111
 dc.w JarvisGreetsSueRt-list5 ; 112
 dc.w JarvisAnswerDoor-list5 ; 113
 dc.w JarvisGreetsKathyRt-list5 ; 114
 dc.w JarvisGreetsAnthonyRt-list5 ; 115
 dc.w JarvisAnswerDoor-list5 ; 116
 dc.w JarvisAnswerDoor-list5 ; 117
 dc.w JarvisAnswerDoor-list5 ; 118
 dc.w JarvisGreetsCliffordRt-list5 ; 119
 dc.w 0 ; 120 (Jarvis himself!)
 dc.w JarvisAnswerDoor-list5 ; 121
;
 dc.w 0
 dc.w 0
 dc.w 0
 dc.w 0
 dc.w 0
 dc.w 0
 dc.w InspectorAnalyse-list5 ; 128 Inspector analyses an object
 dc.w 0
;
; Post Murder racetracks...
;
; Murder 1
 dc.w 0 ; 130
 dc.w 0 ; 131 - user
 dc.w PMSueRt1-list5 ; 132
 dc.w PMVeraRt1-list5 ; 133
 dc.w PMKathyRt1-list5 ; 134
 dc.w PMAnthonyRt1-list5 ; 135
 dc.w PMWilliamRt1-list5 ; 136
 dc.w PMRobertRt1-list5 ; 137
 dc.w PMFionaRt1-list5 ; 138
 dc.w PMCliffordRt1-list5 ; 139
 dc.w PMJarvisrt1-list5 ; 140
 dc.w PMInspectorRt1-list5 ; 141
;
; Murder 2
 dc.w 0 ; 142
 dc.w 0 ; 143 - user
 dc.w PMSueRt2-list5 ; 144
 dc.w PMVeraRt2-list5 ; 145
 dc.w PMKathyRt2-list5 ; 146
 dc.w PMAnthonyRt2-list5 ; 147
 dc.w PMWilliamRt2-list5 ; 148
 dc.w PMRobertRt2-list5 ; 149
 dc.w PMFionaRt2-list5 ; 150
 dc.w PMCliffordRt2-list5 ; 151
 dc.w PMJarvisrt2-list5 ; 152
 dc.w PMInspectorRt2-list5 ; 153
;
; Murder 3
 dc.w 0 ; 154
 dc.w 0 ; 155 - user
 dc.w PMSueRt3-list5 ; 156
 dc.w PMVeraRt3-list5 ; 157
 dc.w PMKathyRt3-list5 ; 158
 dc.w PMAnthonyRt3-list5 ; 159
 dc.w PMWilliamRt3-list5 ; 160
 dc.w PMRobertRt3-list5 ; 161
 dc.w PMFionaRt3-list5 ; 162
 dc.w PMCliffordRt3-list5 ; 163
 dc.w PMJarvisrt3-list5 ; 164
 dc.w PMInspectorRt3-list5 ; 165
;
 dc.w 0
 dc.w 0
;
StartRt
; each of the race track entries has a 4-byte entry:
; VERB PREP NOUN1 NOUN2
on equ 1
in equ 7
CARRIED EQU 4
worn equ 5
;
iplay equ 33
iPUT equ 108
iFOLLOW equ 113
iAnswer equ 125
iDial equ 126
drop equ 107
attack equ 40
open equ 114
go equ 96 ; go to room noun1 (=setupgo)
quick equ 128 ; prep value for GO, makes actor move quickly
close equ 115
wait equ 92
examine equ 100
take equ 105
give equ 111
find equ 139
; "find" variants (used as preposition values)...
Local equ 1 ; go to object/person if in current room, and stop 
; finding if it no longer exists in the room
RoomOnly equ 2 ; go to the room containing the object/person
Coarse equ 4 ; go to roughly where the object is, i.e. not to the 
; exact pixel
kill equ 93
waitforpersontoleave equ 94
waitnoun1free equ 95 ; wait until BUSY flag for npc noun1 
; is cleared after a racetrackreturn, so that they are free to 
; do another telegosub without fear of the stack being cluttered
waitforperson equ 89
waituntiltime equ 90
waitforperiod equ 91
Wwaitforperiod equ waitforperiod*256
put equ 108
returnobject equ 136
gdfind equ 139
light equ 165
ride equ  185
stand equ 46
lie equ 47
iSIT equ 48 ; sit with nullobject finds nearest chair/sofa
remove equ 109
;
; Special racetrack verbs..
RevealMurder equ 30 ; actor+all others in ROOM learn of the murder
IntrusionOn equ 31*256 ; ready for intrusion RT
IntrusionOff equ 32*256
TeleGosub equ 34 ; TELEGOSUB.b,NPC.b,RT.w
resume equ 128 ; prep addition for telegosub, to make actor 
; resume whatever he or she was doing before the gosub
TeleGoto equ 37 ; TELEGOTO.b,NPC.b,RT.w
WRtConversation equ 35*256 ; prepare conversation
iLOCKDOOR equ 36 ; verb alone, makes room inaccessible
iUNLOCKDOOR equ 38 ; verb alone, makes room inaccessible
SetNoun1Busy equ 39 ; set flag for npc noun1 being busy until 
; he reaches a racetrackreturn
Occupation equ 41*256 ; sets current "occupation" message for actor, so 
; that a message is shown when player enters. zero to kill occupation 
LocalMove equ 143 ; localmove,0,cellx,cellz
iGODOOR equ 124 ; go to the door leading towards room noun1
FaceNoun1 equ 245 ; face object/person Noun1
Animate equ 246 ; animate,numframes,sequence.w
AnimateCD equ 244 ; as above, but uses current direction
;
; animation sequences...
StandingAnimation equ 2710
ReachLeftAnimation equ 2720 ; reach with left hand
ReachRightAnimation equ 2730 ; reach with right hand

CrouchAndSit equ 3390 ; crouch & sit

SitAnimation equ 3200 ; sit without crouch
reachupanimation equ 2750 ; reach up (not all dirs)
ReachDownAnimation equ 2760 ; reach down
; now handled in code (standupifsitting) ; StandUpAnimation equ 2570
KissAnimation equ 2730
ReadAnimation equ 2780 ; sat down, reading book
ReadNewsPaper equ 3370 ; sat down, reading paper
SitDrinkAni equ 3380 ; sat down, drinking
PickUpPhone equ 2940 ; north only
DropPhone equ 2942 ; north only
Eating equ 2790
Smoking equ 3033
VeraProdWashing equ 2723 ; temp reach east
PourAnimation equ 3029
MoveMouthEmphasis equ 3060
MoveMouthShock equ 3110
MoveMouthAnger equ 3100
;
ShrugAni equ 3220
JarvisMovingTrayAni equ 3230 ; no rasteroffset
JarvisStandingTrayAni equ 3240 ; no rasteroffset
MenPunchLeftAni equ 3263
MenPunchRightAni equ 3262
MenAdjustTie equ 3258
SamGunAni equ 3265
SamFiresGunAni equ 3267
SamFallsDownAni equ 3269
SamBlowsNoseAni equ 3272
SamUsesPerfumeAni equ 3273
SamWashHandsAni equ 3275 ; east only?
SamDryHandsAni equ 3280 ; east only?
KathyLoungingAni equ 3286 ; no rasteroffset
AnthonyLoungingAni equ 3288 ; no rasteroffset
StandLookLeftAni equ 3250
StandLookRightAni equ 3252
WomenUseLipstick equ 2821 ; sitting
MenCombHair equ 2826
AnthonyPolishMonacle equ 2833
;
Conditional equ 247
RConditional equ 250 ; RConditional,0,ROOM,null
;
; noun1 variants for special conditionals
actorAlive=233 
actorDead=234 
actorStanding=235 
Samknowsaboutmurder=236 ; TRUE if npc is sat down
actorsitting=237 ; TRUE if npc is sat down
Inspectorquestioning equ 238 ; TRUE when Inspector questioning someone
toomanypeople equ 239 ; TRUE when > 2 people in room (ex.player)
;Jarvisphonedpolice equ 240 ; TRUE once Jarvis has phoned the police
murderbeendone equ 241 ; TRUE when murder sequence complete
isroomemptyexceptuser equ 250 ; TRUE when room is empty except for 
; Actor and User
random equ 251 ; TRUE if random(255) AND noun2=prep
; noun2 MUST be of 3,7,15,31,63 etc.
; NB: if prep>250, then  use actor*(prep-250)
readyformurder equ 252 ; TRUE when murder sequence is to begin
;dinnerisready equ 253 ; TRUE when dinner is ready
;dinnerisserved equ 254 ; TRUE when all guests have arrived for dinner
isroomempty equ 255 ; TRUE when room is empty except for Actor
;
ActorSaidVaryMessage equ 240
WActorSaidVaryMessage equ 240*256
;
ActorSaidSingleMessage equ 241
WActorSaidSingleMessage equ 241*256
;
ActorVaryMessage equ 248 ; goes straight on in same turn to next step in rt
WRtActorVaryMessage equ ActorVaryMessage*256
;
ActorSingleMessage equ 249 ; this completes actor's turn. Like ActorM1Dot
WActorSingleMessage equ ActorSingleMessage*256
;
racetrackmessage equ 251
WRtMessage equ racetrackMessage*256
;
racetrackgosub equ 253
WRtGosub equ racetrackGosub*256
;
racetrackgoto equ 254
WRTgoto equ racetrackGoto*256
;
racetrackreturn equ 255
;
; Expressions...
Emphasis equ 1
Shock equ 2
Anger equ 3
; Message priorities...
SamNotHidden equ 16
SamHidden equ 32
SamAdjacent equ 48
; Show portrait...
portrait equ 128
; Show Sam's portrait
SamPortrait equ 64
;
; nouns...
people equ 237
everything equ 234
nullobject equ 255
;
; prepositions...
to equ 202
; note that:
;
; NOUN1 will always be searched for if not accessible
; to the verb (using the usual accessability rules)
;
; NOUN2 will normally be searched for using the same rules.
; There are situations where this is awkward - so if the
; preposition is WITH, then NOUN2 must be carried (or it will
; be searched for by the npc).
;
;---
rtmess equ 5000
rtmess1 equ 5000
rtmess2 equ 5000
rtmess3 equ 5000
rtmess4 equ 5000
dmess equ 2900
debugmarker equ 4999
;---
;
;-------------------------------------------------------------------------
; MURDER 1
;-------------------------------------------------------------------------
;
; BEFORE DINNER...
;
;---
SueRt1
 dc.w WRtGosub,SueUnpacks-list5
 dc.w WRtGosub,SuevisitsVera-list5
;
; go back to bedroom
Suegetschanged
 dc.w Wwaitforperiod,30
 dc.b racetrackmessage,emphasis
 dc.w rtmess+3000 ; "I'm going to get ready for dinner," 
; said Sue
 dc.b TeleGoto,Kathy
 dc.w KathyDinner-list5 ; trigger Kathy to go to dinner
 dc.b TeleGoto,William
 dc.w WilliamDinner-list5 ; trigger William to go to dinner
 dc.b TeleGoto,Anthony
 dc.w AnthonyDinner1-list5 ; trigger Anthony to go to dinner
 dc.b TeleGoto,Robert
 dc.w RobertDinner-list5 ; trigger Robert to go to dinner
 dc.b TeleGoto,Vera
 dc.w VeraMurdersSue-list5 ; trigger Vera to kill her!
;
 dc.b go,0,92,nullobject
 dc.w IntrusionOn,IntrusionSueRoom-list5
;
; Sue is about to be murdered (Messages 3010-19 are used to trigger 
; flags for each murder).
 dc.b racetrackmessage,emphasis
 dc.w rtmess+3010 ; "Now where is that dress?", quizzed 
; Sue.
;
SueWaitsMurder
 dc.b find,0,bed,nullobject
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w SitAnimation+south
 dc.w WRtMessage,rtmess+1200 ; Sue sat down, slightly irritated
 dc.w Wwaitforperiod,30
 dc.b racetrackmessage,Shock
 dc.w rtmess+1201 ; "Looks like it's going to be a disaster," 
; sighed Sue
 dc.w Wwaitforperiod,30
 dc.b racetrackmessage,Shock
 dc.w rtmess+1202 ; "I mean," continued Sue, "look at the 
; way everyone's arguing"
 dc.w Wwaitforperiod,30
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1203 ; "Ah, well", sighed Sue, "I'd better get 
; ready for dinner
 dc.w Wwaitforperiod,20
 dc.b open,0,wardrobe,nullobject
 dc.w WRtMessage,rtmess+1204 ; Sue fumbled about in the wardrobe
 dc.w WRtGosub,Reach2timesSlowlyRT-list5 ; reach out 2 times 
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1205 ; "Now, what shall I wear?", said Sue
 dc.w WRtGosub,Reach4timesSlowlyRT-list5 ; reach out 4 times 
 dc.w WRtGoto,SueWaitsMurder-list5
;---
VeraRt1
 dc.w IntrusionOn,IntrusionVeraPicksWeed-list5
VeraRt11
 dc.w WRtGosub,Verainkitchen-list5
 dc.w WRtGosub,Verainkitchen1-list5
 dc.w WRtGosub,Verainkitchen2-list5
 dc.w WRtGosub,Verainkitchen3-list5
 dc.w WRtGosub,Verainkitchen4-list5
 dc.w WRtGoto,VeraRt11-list5
;
VeraMurdersSue
 dc.w IntrusionOff,0
; the 'secret route' used by Vera will contradict the floorpointers, 
; so we must make each individual move...
;
 dc.b go,0,82,nullobject ; scullery
 dc.b go,0,69,nullobject ; secret stairs
 dc.b go,0,71,nullobject ; ne corridor
 dc.b go,0,63,nullobject ; bathroom
 dc.b go,0,72,nullobject ; se corridor
 dc.b go,0,94,nullobject ; master bedroom
 dc.b go,0,95,nullobject ; dressing room
 dc.b go,0,92,nullobject ; Sue's bedroom
 dc.b waitforperson,0,Sue,nullobject ; just in case!
;
; Messages 3030-39 are intercepted to confirm that the murder has 
; taken place. All npc's are then given a new 'post-murder' racetrack. 
;
 dc.w WRtMessage,rtmess+3030 ; <Sue screams>
 dc.b racetrackreturn,0,nullobject,nullobject
;---
KathyRt1
 dc.w WRtGosub,studyrt-list5
; dc.b go,0,88,nullobject
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read book in library
 dc.w WRtGoto,KathyRt1-list5
;
; Kathy goes to dinner
Kathydinner
 dc.w WRtGosub,KathyPreDinner-list5 ; wait until all guests arrive for 
; dinner
Kathydinnerloop
 dc.w WRtGosub,KPDLoop-list5
; dc.b conditional,0,dinnerisserved,nullobject ; all guests here for dinner?
; dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGoto,Kathydinnerloop-list5
;---
AnthonyRt1
 dc.w WRtGosub,AnthonyUnpacks-list5
AnthonyWaitForDinner
 dc.w WRtGosub,drawingrt-list5
 dc.w WRtGoto,AnthonyWaitForDinner-list5
;
; Anthony gets changed before dinner
AnthonyDinner1
 dc.b racetrackmessage,emphasis
 dc.w rtmess1+1120 ; "I'd better get changed for dinner," 
; said Anthony
 dc.b go,0,97,nullobject
 dc.w IntrusionOn,IntrusionAnthonyRoom-list5 ; turned off after murder
 dc.b open,0,wardrobe,nullobject
Anthonychanging
 dc.w WRtMessage,rtmess1+1121 ; Anthony searched through his wardrobe
 dc.w WRtGosub,Reach4timesSlowlyRT-list5 ; reach out 4 times 
 dc.b racetrackmessage,emphasis
 dc.w rtmess1+1122 ; "Hmm, where's my trousers," said Anthony
 dc.w WRtGosub,Reach2timesSlowlyRT-list5 ; reach out 2 times 
 dc.b racetrackmessage,emphasis
 dc.w rtmess1+1123 ; "Now which tie should I wear," pondered Anthony
 dc.w WRtGosub,Reach4timesSlowlyRT-list5 ; reach out 4 times 
 dc.w WRtGoto,Anthonychanging-list5
;---
WilliamRt1
 dc.w WRtGosub,WilliamVisitsRobert-list5
WilliamWaitForDinner
 dc.w WRtGosub,LibraryRT-list5
 dc.w WRtGoto,WilliamWaitForDinner-list5
;
; William goes to dinner
Williamdinner
 dc.w WRtGosub,WilliamPreDinner-list5 ; wait until all guests arrive for 
; dinner
Williamdinnerloop
 dc.w WRtGosub,WPDLoop-list5
; dc.b conditional,0,dinnerisserved,nullobject ; all guests here for dinner?
; dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGoto,Williamdinnerloop-list5
;---
RobertRt1
 dc.w IntrusionOn,IntrusionRobertRoom-list5
RobertRt11
 dc.w WRtGosub,Robertinstudy1-list5
 dc.w WRtGosub,Robertinstudy2-list5
 dc.w WRtGosub,Robertinstudy3-list5
 dc.w WRtGoto,RobertRt11-list5
;
; Robert goes to dinner
Robertdinner
 dc.w IntrusionOff,0
 dc.w WRtGosub,RobertPreDinner-list5 ; wait until all guests arrive for 
; dinner
Robertdinnerloop
 dc.w WRtGosub,RPDLoop-list5
; dc.b conditional,0,dinnerisserved,nullobject ; all guests here for dinner?
; dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGoto,Robertdinnerloop-list5
;---
FionaRt1
 dc.w WRtGosub,FionaArrivesrt-list5
;
; follow Clifford & talk to him
FionameetsClifford
 dc.b conditional,0,Kathy,nullobject ; if Kathy is here, they 
 dc.w WRtActorVaryMessage,rtmess1+1150 ; 'bitch' each other
 dc.b ifollow,0,Clifford,nullobject ; find Clifford
; Clifford's racetrack handles all arguing in the hall...
 dc.b Rconditional,0,83,nullobject
 dc.w WRtGoto,FionameetsClifford-list5
 dc.b conditional,1,random,1
 dc.w WRtActorVaryMessage,rtmess+1020
; began hen-pecking Clifford
; nagged Clifford
; said, "You haven't a smile for the cat, Clifford"
; said, "I wish you would pull your weight, Clifford"
; cursed Clifford for picking his nose
 dc.w WRtGoto,FionameetsClifford-list5
;---
CliffordRt1
 dc.w WRtGosub,CliffordArrivesRT-list5
; Trigger Jarvis to start his proper racetrack...
 dc.w WRtMessage,rtmess+259 ; "I think everybody's here now", said 
; Jarvis
;
; Clifford argues with Fiona in the hall
Cliffordargues
 dc.b go,0,83,nullobject ; go to hall
 dc.b waitforperson,0,Fiona,nullobject ; (just in case)
Cliffordargues1
 dc.b localmove,0,6,9 ; walk to front left of hall
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1220 ; "Oh shut up, Fiona," snapped Clifford
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1221 ; "I'll say what I please," replied Fiona
 dc.b localmove,0,15,9 ; walk to front right of hall
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1222 ; "Just stop nagging me, wife," seethed 
; Clifford
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1223 ; "I'll nag until you listen!", insisted 
; Fiona
 dc.b localmove,0,6,9 ; walk to front left of hall
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1224 ; "Where are my earplugs?", said Clifford
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1225 ; "Ooh, you're so rude, Clifford," seethed 
; Fiona
 dc.b localmove,0,15,9 ; walk to front right of hall
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1226 ; "And your so damned annoying, woman," 
; replied Clifford
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1227 ; "I haven't even started yet, Cliff," 
; snarled Fiona
 dc.b localmove,0,6,9 ; walk to front left of hall
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1228 ; "What are we arguing about anyway?", 
; asked Clifford
 dc.w Wwaitforperiod,25
 dc.b FaceNoun1,0,Fiona,nullobject ; face Fiona
 dc.b racetrackmessage,Shock
 dc.w rtmess+1229 ; "I haven't a clue, dear," replied Fiona
 dc.w WRtGoto,Cliffordargues1-list5
;---
; Only triggered once all guests have arrived
JarvisRt1
; Jarvis prepares the dinner table until all guests arrive
 dc.w IntrusionOff,0
 dc.w WRtGoto,JarvisPrepareTable-list5 ; go dining room & set table etc.
;---
InspectorRt1
 dc.b racetrackreturn,0,nullobject,nullobject
;---
;
; After the Murder...
;
;---
; Sue is the victim
PMSueRt1
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Vera retraces her steps back to the kitchen
PMVeraRt1
; the 'secret route' used by Vera will contradict the floorpointers, 
; so directional verbs are used rather than 'go room' verbs...
;
 dc.b go,0,95,nullobject ; dressing room
 dc.b go,0,94,nullobject ; master bedroom
 dc.b go,0,72,nullobject ; se corridor
 dc.b go,0,63,nullobject ; bathroom
 dc.b go,0,71,nullobject ; ne corridor
 dc.b go,0,69,nullobject ; secret stairs
 dc.b go,0,82,nullobject ; scullery
 dc.b go,0,80,nullobject ; kitchen
;
; hang up pinnafore etc...
 dc.b put,in,washer,pinnafore
;
; Messages 3079-9 are used when the murder sequence is complete, and 
; the guilty party has returned to whatever he or she was doing 
; before the murder...
;
; (This message shouldn't really be seen in theory, but just in 
; case...)
;
 dc.w WRtMessage,rtmess+3070 ; Vera looked around sheepishly
;
 dc.w WRtGosub,WaitForeverRT-list5 ; Kathy handles RTs
;
VeraPreInterrogate
; hide breadknife in cellar
 dc.b go,quick,75,nullobject ; go cellar
 dc.b drop,0,breadknife,nullobject
 dc.w WRtGoto,VeraStandardLoopRT-list5
;---
; Dummy racetrack used when an npc is to wait forever, but be able 
; to execute telepathic gosubs. A loop is used because a telepathic 
; gosub must wait until the existing command has finished. In that 
; case, a waitforperson,0,0,nullobject would prevent any following 
; gosubs from being executed.
WaitForeverRT
WaitForever
 dc.b wait,0,nullobject,nullobject ; wait 1 turn
 dc.w WRtGoto,WaitForEverRT-list5
;---
; Kathy is in the dining room
PMKathyRt1
 dc.b Conditional,0,ActorStanding,nullobject
 dc.w WRtGosub,KathyPreDinner-list5 ; just in case we're not sitting 
; at the table
 dc.w WRtGoto,WaitforeverRt-list5
;
PMKathyRt12
 dc.b waitforpersontoleave,0,William,nullobject
;
; Comfort Vera in the kitchen until William arrives
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15100 ;$ Oh, I wonder how Vera's taking this. I'd better visit her
 dc.b go,0,80,nullobject ; go kitchen
 dc.b waitforperson,0,Vera,nullobject ; make sure Vera's here
 dc.b facenoun1,0,Vera,nullobject ; Kathy faces Vera
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w FaceKathyRt-list5 ; Vera faces Kathy
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15010 ; Such terrible news, Vera!
 dc.b find,coarse,Vera,nullobject ; walk over to Vera
 dc.b waitnoun1free,0,Vera,nullobject ;*
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w FaceKathyRt-list5 ; Vera faces Kathy
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15011 ; I'm afraid someone's stabbed Sue
 dc.b RevealMurder,0,nullobject,nullobject ; reveal to everyone in room
 dc.w Wwaitforperiod,10
 dc.b waitnoun1free,0,Vera,nullobject ;*
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w FaceKathyRt-list5 ; Vera faces Kathy
 dc.b waitnoun1free,0,Vera,nullobject ;*
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w MoveMouthShockRt-list5 ; Vera looks shocked
 dc.w WRtMessage,15012 ; "Oh, that's dreadful!", said Vera
KathyComfortsVera
 dc.w Wwaitforperiod,10
 dc.b waitnoun1free,0,Vera,nullobject ;*
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w Reach3TimesRt-list5 ; Vera reaches out
 dc.b facenoun1,0,Vera,nullobject
 dc.w WRtGosub,Reach3TimesRT-list5 ; Kathy reaches out
 dc.b actorvarymessage,emphasis
 dc.w 15015
; Kathy comforted Vera
; Vera and Kathy talked solemnly
; Kathy reassured Vera
; Vera talked quietly to Kathy
; Kathy whispered to Vera
 dc.b waitnoun1free,0,Vera,nullobject ;*
 dc.b SetNoun1Busy,0,Vera,nullobject ;*
 dc.b telegosub,Vera
 dc.w MoveMouthShockRt-list5 ; Vera moves mouth
 dc.w WRtGoto,KathyComfortsVera-list5 ; until William arrives
;
; Kathy follows William until they have a secret meeting in the 
; billiard room
KathyGoBilliardRoom
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15105 ;$ We'd better go to the billiard room. It's should be 
; quiet there
 dc.b go,0,85,nullobject ; go billiard room 
 dc.w WRtGoto,WaitForeverRT-list5
;
; Kathy waits in bedroom for a meeting with William
KathyWaitBedroomMeeting
 dc.b go,0,93,nullobject ; go bedroom
 dc.w IntrusionOn,IntrusionKathyRoom-list5
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRT-list5
;
KathyPreInterrogate
 dc.w Wwaitforperiod,250 ; a chance to have sex with player?
 dc.w WRtGoto,KathyStandardLoopRT-list5
;---
; Anthony is getting changed
PMAnthonyRt1
 dc.b racetrackmessage,Shock
 dc.w rtmess+4400 ; "Did you hear somebody scream?", said 
; Anthony
;
 dc.b go,0,84,nullobject ; walk to landing
 dc.b waitforperson,0,Fiona,nullobject ; wait for Clifford+Fiona
 dc.b racetrackmessage,emphasis
 dc.w rtmess+4401 ; "I think the noise came from Sue's 
; room," said Anthony to Clifford
 dc.b iGODOOR,0,92,nullobject ; walk to Sue's door
 dc.w WRtMessage,rtmess+4402 ; "Sue?", shouted Anthony, "Are 
; you okay?"
;
 dc.b go,0,92,nullobject ; go to Sue's room 
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtMessage,rtmess+4404 ; "Sue?!", yelled Anthony
 dc.b find,coarse,bed,nullobject ; face Sue
 dc.b animateCD,14
 dc.w ReachDownAnimation ; reach down
 dc.b racetrackmessage,Shock
 dc.w rtmess+4405 ; "She's dead," said Anthony glumly
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+4406 ; "We'd better break it to the others," 
; said Anthony
;
; Find Sam and break the news to him
 dc.b find,coarse,user,nullobject
 dc.b RevealMurder,0,nullobject,nullobject ; reveal murder to sam & 
; everyone in the room
 dc.w WRtConversation,CAnthonyRevealsMurder-list4
 dc.b racetrackmessage,shock+portrait
 dc.w rtmess4+4410 ; "I don't quite know how to put this, Sam, but 
; someone's stabbed Sue!", stammered Anthony
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject
 dc.b RConditional,0,77,nullobject
 dc.w WRtGoto,AnthonyCrossedDiningRoom-list5 ; already in dining room
 dc.b racetrackmessage,anger
 dc.w rtmess4+4411 ; "I'm off to break the news to everyone," added 
; Anthony
;
AnthonyCrossedDiningRoom
 dc.b go,0,77,nullobject ; go dining room
; the following people MUST arrive to hear the news...
 dc.b waitforperson,0,Kathy,nullobject
 dc.b waitforperson,0,William,nullobject
 dc.b waitforperson,0,Robert,nullobject
 dc.b waitforperson,0,Jarvis,nullobject
 dc.b racetrackmessage,Shock
 dc.w rtmess+4408 ; "I'm afraid there's bad news," said 
; Anthony. "Sue's dead"
 dc.b RevealMurder,0,nullobject,254 ; reveal to everyone
 dc.b telegoto,Robert
 dc.w PMRobertRt12-list5 ; Robert yells
 dc.b telegoto,William
 dc.w PMWilliamRt12-list5 ; William moves
 dc.b telegoto,Kathy
 dc.w PMKathyRt12-list5 ; Kathy moves
 dc.b faceNoun1,0,Robert,nullobject ; face Sir Robert
 dc.w WRtConversation,0
;
; go drawing room for a drink with Fiona
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15101 ;$ I'm going for a drink. I think I need one
 dc.b go,0,79,nullobject ; drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,Fiona,nullobject ; wait for Fiona
 dc.b SetNoun1Busy,0,Fiona,nullobject
 dc.b telegosub,Fiona
 dc.w MoveMouthEmphasisRT-list5 ; make Fiona speak
 dc.b racetrackmessage,emphasis
 dc.w 15030 ; Anthony asked if Fiona would like a sherry
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w 15031 ; "Just a small tot," said Fiona
;
; Anthony pours the drinks and gives Fiona one(!)
 dc.w WRtGosub,AnthonyFionaDrinkRT-list5
;
; Anthony sits down, sips sherry and talks to Fiona
 dc.b iSIT,0,nullobject,nullobject
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Wwaitforperiod,20
 dc.b WaitNoun1Free,0,Fiona,nullobject
 dc.b SetNoun1Busy,0,Fiona,nullobject
 dc.b telegosub,Fiona
 dc.w MoveMouthEmphasisRT-list5 ; make Fiona speak
 dc.b racetrackmessage,emphasis
 dc.w 15034 ; Anthony and Fiona chatted while they drank the sherry
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,15035 ; Fiona finished her sherry
 dc.b WaitNoun1Free,0,Fiona,nullobject
 dc.b telegoto,Fiona
 dc.w FionaComfortsRobert-list5 ; Fiona comforts Robert
 dc.b waitforpersontoleave,0,Fiona,nullobject
;
; Anthony stays drinking until Fiona returns
AnthonyWaitFionaToReturn
 dc.w WRtGosub,DrawingRt-list5
 dc.w WRtGosub,AnthonyWaitFionaToReturn-list5
;
; Fiona returns to comfort Anthony
AFionaComfortsAnthony
 dc.b find,0,Fiona,nullobject ; get up & walk over to Fiona
 dc.w WRtGosub,WaitForEverRT-list5
;
; Anthony finishes his drinking binge
AnthonyHadEnough
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15062 ; My, this sherry's going to my head
 dc.b find,0,table,nullobject
 dc.w WRtMessage,15063 ; Put down his glass
 dc.w WRtGosub,Reach2TimesRT-list5
 dc.b facenoun1,0,user,nullobject ; face Sam
 dc.w WRtConversation,CAnthonyDrunk-list4
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15064 ; I think I'll (hic) go and lie down before I fall over
;
; Anthony goes to his room for a lie down
 dc.b go,0,97,nullobject ; go bedroom
 dc.b iSIT,0,bed,nullobject ; sit on bed
 dc.w WRtGosub,Wait200orSam-list5
; shame to waste this bit of the racetrack!)
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15065 ; Oh, my poor head's spinning
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,15066 ; Anthony yawned
 dc.w Wwaitforperiod,20
;
; Anthony wants a piss
 dc.w WRtConversation,0
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15067 ; I think I need the toilet
 dc.b open,0,wardrobe,nullobject ; open wardrobe
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15068 ; Oops! Wrong door
 dc.b conditional,0,KathysWhiskyBottle,nullobject ; bottle here?
 dc.b racetrackmessage,emphasis
 dc.w 15069 ; "And what this bottle doing here?", quizzed 
; Anthony
 dc.b facenoun1,0,user,nullobject ; face Sam
 dc.w WRtMessage,15070 ; Anthony looked confused
 dc.w WRtGosub,ToiletRt-list5 ; go upstairs toilet
;
; Anthony tries to leave the house
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15102 ;$ I could do with a breath of fresh air
 dc.b go,0,47,nullobject ; go front of house
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15071 ; I really feel like going home
 dc.b telegosub,Inspector+resume
 dc.w InspectorVisitAnthony-list5 ; Inspector catches Anthony leaving
 dc.b go,0,45,nullobject ; go archway
 dc.b waitforperson,0,Inspector,nullobject
; finding the Inspector & then waiting makes absolutely sure Anthony 
; is sent on a questioning racetrack straight away
 dc.b find,0,Inspector,nullobject
 dc.w Wwaitforperiod,50
;
AnthonyPreInterrogate
 dc.w WRtGoto,AnthonyStandardLoopRT-list5
;
; Subroutine, also used in murder 2
AnthonyFionaDrinkRT
 dc.b find,0,table,nullobject
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach for drink
 dc.w WRtMessage,15032 ; Anthony poured a drink for Fiona and himself
 dc.b animate,28
 dc.w PourAnimation
; dc.b find,0,table,nullobject ; face table after pouring animation
; dc.w WRtGosub,Reach2TimesRT-list5 ; reach for drink
; dc.b animate,28
; dc.w PourAnimation
 dc.b find,0,Fiona,nullobject ; walk over to Fiona
 dc.b WaitNoun1Free,0,Fiona,nullobject
 dc.b SetNoun1Busy,0,Fiona,nullobject
 dc.b telegosub,Fiona
 dc.w MoveMouthEmphasisRT-list5 ; make Fiona speak
 dc.w WRtMessage,15033 ; Fiona took a glass of sherry from Anthony
 dc.b find,0,Fiona,nullobject
 dc.w WRtGoto,Reach1TimesRT-list5 ; give her the drink
;---
; William is in the dining room
PMWilliamRt1
 dc.b Conditional,0,ActorStanding,nullobject
 dc.w WRtGosub,WilliamPreDinner-list5 ; just in case we're not sitting 
; at the table
 dc.w WRtGoto,WaitforeverRt-list5
;
PMWilliamRt12
 dc.b waitforpersontoleave,0,Robert,nullobject ; wait for Robert to leave
;
; Run to the body
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15103 ;$ Oh my god! Being a doctor, I suppose I'd better take a 
; look at her
 dc.b go,0,92,nullobject ; go Sue's room
 dc.b find,coarse,bed,nullobject ; run to Sue
 dc.b ActorSaidSingleMessage,shock
 dc.w 15020 ; Oh, dear! I'd better get my bag
 dc.b go,0,93,nullobject ; go bedroom
 dc.b open,0,wardrobe,nullobject
 dc.b take,0,doctorbag,nullobject ; take it
 dc.b close,0,wardrobe,nullobject
 dc.b go,0,92,nullobject ; go Sue's room
 dc.b find,0,bed,nullobject ; return to Sue
 dc.b drop,0,doctorbag,nullobject ; drop bag
 dc.b examine,0,doctorbag,nullobject
 dc.w WRtGosub,ReachDown2TimesRT-list5 ; reach into bag
 dc.b facenoun1,0,Sue,nullobject
 dc.w WRtMessage,15021 ; William examined the body
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach towards body
 dc.b facenoun1,0,user,nullobject
 dc.w WRtConversation,CWilliamConfirmsDeath-list4
 dc.b ActorSaidSingleMessage,portrait+emphasis
 dc.w 15022 ; I'm afraid there's no hope for her
 dc.b take,0,doctorbag,nullobject ; take it
 dc.b go,0,93,nullobject ; return to bedroom
 dc.b put,in,wardrobe,doctorbag ; put bag in wardrobe
 dc.b close,0,wardrobe,nullobject
 dc.w WRtConversation,0
;
; Join Kathy to talk
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15104 ;$ I wonder where Kathy's got to
 dc.b find,0,Kathy,nullobject ; find Kathy
 dc.b racetrackmessage,emphasis
 dc.w 15023 ; William whispered something to Kathy
 dc.b telegoto,Kathy
 dc.w KathyGoBilliardRoom-list5 ; make Kathy follow along, talking
 dc.b telegoto,Vera
 dc.w VeraPreInterrogate-list5 ; Vera starts her standard rt
;
; William has a secret meeting with Kathy in the billiard room
 dc.b go,0,85,nullobject ; go billiard room
 dc.b find,coarse,table,nullobject ; go to table
 dc.b waitforperson,0,Kathy,nullobject ; wait for Kathy to arrive
 dc.b facenoun1,0,Kathy,nullobject
 dc.w WRtGosub,WilliamKathySecretMeeting-list5
;
; William and Kathy collect bottles & William hides them in 
; Anthony's room
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15106 ;$ Come on, Kathy. Let's go to our room
 dc.b TeleGoto,Kathy
 dc.w KathyWaitBedroomMeeting-list5 ; Kathy waits in bedroom for meeting
 dc.b go,0,93,nullobject ; go bedroom
 dc.b open,0,wardrobe,nullobject
 dc.b take,0,Kathyswhiskybottle,nullobject
 dc.b conditional,0,Kathyswhiskybottle,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15107 ;$ I'd better hide this somewhere
 dc.b close,0,wardrobe,nullobject
 dc.b go,0,97,nullobject ; go Anthony's room
 dc.b conditional,0,Kathyswhiskybottle,nullobject
 dc.b put,in,wardrobe,Kathyswhiskybottle ; hide bottle in wardrobe
 dc.b close,0,wardrobe,nullobject ; close the wardrobe
;
; meet Kathy in the bedroom for a meeting
 dc.b go,0,93,nullobject ; go bedroom
 dc.b waitforperson,0,Kathy,nullobject
 dc.b find,0,Kathy,nullobject
 dc.w WRtGosub,WilliamKathySecretMeeting-list5 ; have a secret meeting
 dc.b telegoto,Kathy
 dc.w KathyPreInterrogate-list5 ; put Kathy on standard rt
;
; William burns incriminating letter in the fire
 dc.b open,0,chest,nullobject
 dc.b take,0,letter,nullobject
 dc.b close,0,chest,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15108 ;$ Well, I think I'll go and sit in the study for a while
 dc.b go,0,81,nullobject ; go study (has fireplace)
 dc.w WRtGosub,Wait200orSam-list5
 dc.b put,in,fireplace,letter ; put letter in fire (hard-coded to burn!)
 dc.b facenoun1,0,user,nullobject ; face Sam
 dc.b racetrackmessage,emphasis
 dc.w 15027 ; "Got to keep the fire going, eh, Sam?", stammered William
;
WilliamPreInterrogate
 dc.w WRtGoto,WilliamStandardLoopRT-list5 ; Read books in library 
;---
WilliamKathySecretMeeting
 dc.w WRtGosub,WilliamKathyMeeting-list5 ; will & Kathy chat
 dc.b conditional,0,user,nullobject ; user eavesdropping?
 dc.w WRtGoto,UserListensWilliamKathy-list5
 dc.w WRtGosub,WilliamKathyMeeting-list5 ; will & Kathy chat
 dc.b conditional,0,user,nullobject ; user eavesdropping?
 dc.w WRtGoto,UserListensWilliamKathy-list5
 dc.w WRtGosub,WilliamKathyMeeting-list5 ; will & Kathy chat
;
; user eavesdrops on Kathy & William / or Kathy & William finish 
; their meeting racetrack
UserListensWilliamKathy
 dc.b facenoun1,0,user,nullobject
 dc.b ActorSaidSingleMessage,portrait+emphasis
 dc.w 15026 ; How dare you eavesdrop on us, Sam
 dc.b racetrackreturn,0,nullobject,nullobject
;---
WilliamKathyMeeting
 dc.b SetNoun1Busy,0,Kathy,nullobject
 dc.b telegosub,Kathy
 dc.w FaceWilliamRT-list5
 dc.b WaitNoun1Free,0,Kathy,nullobject
 dc.b SetNoun1Busy,0,Kathy,nullobject
 dc.b telegosub,Kathy
 dc.w MoveMouthEmphasisRT-list5
 dc.b racetrackmessage,emphasis
 dc.w 15025 ; William and Kathy muttered discreetly to themselves
 dc.w Wwaitforperiod,10
 dc.b WaitNoun1Free,0,Kathy,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Robert is in the dining room
PMRobertRt1
 dc.b Conditional,0,ActorStanding,nullobject
 dc.w WRtGosub,RobertPreDinner-list5 ; just in case we're not sitting 
; at the table
 dc.b Conditional,0,Anthony,Nullobject
 dc.w WRtGoto,RAnthonyRevealsMurder-list5
 dc.b conditional,0,random,3
 dc.w WRtActorVaryMessage,rtmess+4600
; said, "Jarvis won't be long with dinner"
; said, "Dinner should be ready now"
; said, "I wonder where the others are?"
; said, "Sue's taking a long time in coming down"
; said, "I'm starving"
 dc.b wait,0,nullobject,nullobject
 dc.w WRtGoto,PMRobertRt1-list5
;
RAnthonyRevealsMurder
; Anthony is immediately sent on his racetrack to reveal the murder 
; to the guests, as he may be only crossing the dining room on his 
; way to tell Sam. In this instance, the racetrack to tell Sam is 
; aborted, since he MUST reveal the murder as soon as he meets 
; the guests.
 dc.b telegoto,Anthony
 dc.w AnthonyCrossedDiningRoom-list5
 dc.w WRtGoto,WaitForEverRT-list5 ; Anthony triggers PMRobertRt12
;
PMRobertRt12
 dc.b racetrackmessage,Shock
 dc.w rtmess+4610 ; "Dead?", yelled Sir Robert
 dc.b telegoto,Jarvis
 dc.w JGPrt-list5
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,Jarvis,nullobject
 dc.b racetrackmessage,anger
 dc.w rtmess+4611 ; "Jarvis!", shouted Sir Robert, "Get 
; the police"
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+4612 ; "Everyone into the study," added Sir Robert
 dc.b waitforpersontoleave,0,Fiona,nullobject
;
RobertPreInterrogate
 dc.w WRtGoto,RobertStandardLoopRT-list5
;---
RFionaComfortsRobert
 dc.b go,0,94,nullobject ; master bedroom
 dc.b iSIT,0,Nsofa,nullobject ; sit north facing sofa
 dc.w WRtGoto,WaitFionaMeeting-list5 ; wait for Fiona to come & go
;---
; Fiona is arguing with Clifford in the hall
PMFionaRt1
 dc.b ifollow,0,Clifford,nullobject ; keep following Clifford
 dc.b Rconditional,0,92,nullobject ; reached Sue's room?
 dc.w WRtGoto,PMFiona10-list5
 dc.w WRtGoto,PMFionaRt1-list5
;
PMFiona10
 dc.b RevealMurder,0,nullobject,nullobject
;
; go for a drink with Anthony
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15109 ;$ I'm not one to drink, but this is certainly an 
; exception
 dc.b go,0,79,nullobject ; drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForeverRT-list5 ; Anthony controls the racetrack
;
; Fiona comforts Robert
FionaComfortsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15110 ;$ I bet daddy's devestated. I'd better go and see him
 dc.b telegosub,Robert+resume
 dc.w RFionaComfortsRobert-list5 ; Robert goes bedroom & waits for Fiona
 dc.b go,0,94,nullobject ; master bedroom
 dc.b waitforperson,0,Robert,nullobject ; make sure Robert's here
 dc.b find,0,Robert,nullobject ; find him
 dc.w WRtMessage,15040 ; "I can hardly believe what's happened," 
; mumbled Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find him (he may have sat down)
 dc.b racetrackmessage,emphasis
 dc.w 15041 ; Fiona tried comforting Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find him (he may have sat down)
 dc.w WRtGosub,FionaComfortsRobert1-list5
 dc.w WRtGosub,FionaComfortsRobert1-list5 ; comfort Sir Robert
 dc.w WRtGosub,FionaComfortsRobert1-list5
;
; return to Anthony and comfort him
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15111 ;$ I'll be in the study with Anthony if you need me, father
 dc.b go,0,79,nullobject ; go drawing room
 dc.b waitforperson,0,Anthony,nullobject ; make sure Anthony is here
 dc.b telegoto,Anthony
 dc.w AFionaComfortsAnthony-list5
 dc.b find,0,Anthony,nullobject ; walk over to him
 dc.b racetrackmessage,emphasis
 dc.w 15050 ; "I've just been talking to Robert", began Fiona
 dc.w WRtGosub,Reach2TimesRT-list5
 dc.b telegosub,Anthony
 dc.w Reach2TimesRT-list5 ; make Anthony reach out
 dc.w WRtMessage,15051 ; Anthony looked interested
 dc.w WRtGosub,Reach1TimesRT-list5
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15052 ; Let's sit down
 dc.b SetNoun1Busy,0,Anthony,nullobject
 dc.b telegosub,Anthony
 dc.w SitDownRT-list5
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b WaitNoun1Free,0,Anthony,nullobject ; wait until Anthony's sitting
 dc.b SetNoun1Busy,0,Anthony,nullobject
 dc.b telegosub,Anthony
 dc.w MoveMouthEmphasisRT-list5 ; make Anthony speak
 dc.b ActorSingleMessage,emphasis
 dc.w 15053 ; talked discreetly between themselves
 dc.w Wwaitforperiod,20
 dc.b WaitNoun1Free,0,Anthony,nullobject ; wait until Anthony's sitting
 dc.b SetNoun1Busy,0,Anthony,nullobject
 dc.b telegosub,Anthony
 dc.w MoveMouthEmphasisRT-list5 ; make Anthony speak
 dc.b racetrackmessage,emphasis+SAMPORTRAIT
 dc.w 15054 ; Sam overheard Fiona talking about Sir Robert
 dc.b WaitNoun1Free,0,Anthony,nullobject ; wait until Anthony's sitting
 dc.b SetNoun1Busy,0,Anthony,nullobject
 dc.b telegosub,Anthony
 dc.w MoveMouthEmphasisRT-list5 ; make Anthony speak
 dc.w WRtMessage,15055 ; "Why don't you tell Sam", Anthony suggested 
; to Fiona
;
; tell Sam it was Sir Robert
 dc.b find,0,table,nullobject
 dc.w WRtMessage,15056 ; Fiona put her drink on the table
 dc.b find,roomonly,user,nullobject ; find Sam
 dc.w WRtConversation,CFionaBlamesRobert-list4
 dc.b RacetrackMessage,Anger+Portrait
 dc.w 15057 ; "Just a quick word in your ear, Sam", said Fiona
 dc.b find,roomonly,user,nullobject ; find Sam
 dc.b RacetrackMessage,Anger+Portrait
 dc.w 15058 ; "Between you and me," whispered Fiona, "I'm certain 
; that Robert's trying to cover something up"
;
; return to drawing room for a final drink
 dc.b go,0,79,nullobject
 dc.w WRtConversation,0
 dc.b find,0,table,nullobject
 dc.w WRtMessage,15059 ; Fiona resumed her drink
 dc.w WRtGosub,Reach2TimesRT-list5
 dc.b iSIT,0,nullobject,nullobject
 dc.b telegoto,Anthony
 dc.w AnthonyHadEnough-list5 ; Anthony finished drinking
 dc.b waitforpersontoleave,0,Anthony,nullobject ; wait for Anthony to leave
 dc.w WRtMessage,15060 ; Fiona finished her drink
 dc.b find,0,table,nullobject
 dc.w WRtMessage,15061 ; Fiona put her empty glass on the table
 dc.w WRtGosub,Reach2TimesRT-list5
;
; Fiona visits bill and Kathy
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15112 ;$ I can't help but wonder where Kathy and William 
; have got to. I think I'll go and find them
 dc.b telegosub,Kathy+resume
 dc.w KWMeetFiona-list5
 dc.b telegosub,William+resume
 dc.w KWMeetFiona-list5
 dc.b go,0,93,nullobject ; go bedroom
 dc.b waitforperson,0,William,nullobject
 dc.b waitforperson,0,Kathy,nullobject ; wait for William & Kathy
 dc.w WRtGosub,Wait200orSam-list5
 dc.b find,0,William,nullobject ; walk over to William
 dc.b Conditional,0,ActorSitting,William ; William sitting
 dc.w WRtGoto,WillDontFaceFiona-list5
 dc.b SetNoun1Busy,0,William,nullobject
 dc.b telegosub,William
 dc.w MoveMouthEmphasisRT-list5 ; make William speak
 dc.b waitnoun1free,0,William,nullobject
WillDontFaceFiona
 dc.b telegosub,William
 dc.w MoveMouthEmphasisRT-list5 ; make William speak
 dc.b ActorSingleMessage,emphasis
 dc.w 15075 ; whispered descreetly to William
 dc.b SetNoun1Busy,0,Kathy,nullobject
 dc.b telegosub,Kathy
 dc.w FaceUserRT-list5 ; make Kathy face Sam
 dc.b waitnoun1free,0,Kathy,nullobject
 dc.b telegosub,Kathy
 dc.w MoveMouthEmphasisRT-list5 ; make Kathy speak
 dc.w WRtMessage,15076 ; "Shh!", hissed Kathy, "Sam's listening"
 dc.b facenoun1,0,user,nullobject
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15077 ; Have you no manners, Sam?
;
FionaPreInterrogate
 dc.w WRtGoto,FionaStandardLoopRT-list5
;---
; Kathy & William meet Fiona
KWMeetFIona
 dc.b go,0,93,nullobject ; go bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
WaitFionaMeeting
 dc.b waitforperson,0,Fiona,nullobject
KWMFFionahere
 dc.b wait,0,nullobject,nullobject ; wait 1 turn
 dc.b conditional,0,Fiona,nullobject ; Fiona still here?
 dc.w WRtGoto,KWMFFionahere-list5
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; do one iteration of Fiona comforting Robert
FionaComfortsRobert1
 dc.w Wwaitforperiod,50
 dc.w WRtGosub,Reach3TimesRT-list5 ; Kathy reaches out
 dc.b actorvarymessage,emphasis
 dc.w 15045
; Fiona comforted Sir Robert
; Sir Robert mumbled something to Fiona
; Fiona whispered something to Sir Robert
; Fiona talked softly to Sir Robert
; Sir Robert chatted with Fiona
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Clifford is arguing with Fiona in the hall
PMCliffordRt1
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,Shock
 dc.w rtmess+4800 ; "Am I hearing things, or did someone 
; just scream upstairs?", pondered Clifford
 dc.b go,0,84,nullobject ; walk to landing
 dc.b waitforperson,0,Anthony,nullobject ; wait for Anthony
;
PMCFollowAnthony
 dc.b ifollow,0,Anthony,nullobject ; keep following Anthony
 dc.b Rconditional,0,92,nullobject ; reached Sue's room?
 dc.w WRtGoto,Clifford10-list5
 dc.w WRtGoto,PMCFollowAnthony-list5
;
Clifford10
 dc.b RevealMurder,0,nullobject,nullobject
;
; arrange to meet Sam in the billiard room
CWaitUntilSamKnowsMurder
 dc.b conditional,0,Samknowsaboutmurder,nullobject
 dc.w WRtGoto,CArrangeMeetSam-list5
 dc.b wait,0,nullobject,nullobject ; wait one turn (prevent hang-up)
 dc.w WRtGoto,CWaitUntilSamKnowsMurder-list5
CArrangeMeetSam
 dc.b find,coarse,user,nullobject ; find Sam
 dc.w WRtConversation,CCliffordArrangeMeeting-list4
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15080 ; Psst! Sam! I'd like to see you in the games room
CliffordMeetsSam
 dc.b go,0,85,nullobject ; go games room
 dc.w WRtConversation,0
 dc.w WRtGosub,Wait200orSam-list5
 dc.b conditional,0,isroomemptyexceptuser,nullobject
 dc.w WRtGoto,OkCliffordMeetsUser-list5
;
; somebody else is listening
 dc.b facenoun1,0,user,nullobject
 dc.b RacetrackMessage,emphasis+portrait
 dc.w 15086 ; "I'll meet you here later, Sam," said Clifford, "When 
; there's nobody else around"
 dc.w WRtGosub,PMLibraryRT-list5 ; do something to pass time
 dc.w WRtGoto,CliffordMeetsSam-list5
;
OkCliffordMeetsUser
 dc.b find,coarse,user,nullobject ; walk over to Sam
 dc.w WRtConversation,CCliffordBlamesRobert-list4
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15081 ; I thought you might like to know who killed Sue
 dc.b facenoun1,0,user,nullobject ; in case Sam's moved
 dc.w WRtGosub,Reach3TimesRT-list5 ; reach out
 dc.b facenoun1,0,user,nullobject ; in case Sam's moved
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15082 ; I'm certain it was Sir Robert, but I need your help 
; to prove it...
 dc.w WRtConversation,0
;
; arrange to meet Sir Robert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15113 ;$ I wonder what the old man has to say for himself
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b telegosub,Robert
 dc.w FaceCliffordRT-list5 ; make Robert face Clifford
 dc.b ActorSingleMessage,emphasis
 dc.w 15083 ; arranged to meet later with Sir Robert
;
; read paper in study before meeting Robert
 dc.w WRtGosub,PMstudyRT-list5
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15114 ;$ Oh, I nearly forgot! I arranged to meet Sir Robert in 
; his room
 dc.b telegosub,Robert+resume
 dc.w RobertMeetsClifford-list5
 dc.b go,0,94,nullobject ; go master bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,Robert,nullobject
 dc.w WRtGosub,Wait200orSam-list5
 dc.b give,0,Robert,photo ; give photo to Sir Robert
 dc.b telegoto,Robert
 dc.w RobertBurnsPhoto-list5 ; make Robert burn the photo & then return 
; from previously called 'WaitForEver'
 dc.b racetrackmessage,emphasis
 dc.w 15084 ; Clifford grinned as Sir Robert hissed through his teeth
;
CliffordPreInterrogate
 dc.w WRtGoto,CliffordStandardLoopRT-list5
;---
; Robert & Clifford meet and burn the blackmail photo
RobertMeetsClifford
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15115 ;$ I think I'll go and sit down in my room for a bit
 dc.b go,0,94,nullobject ; go master bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRTGoto,WaitForEverRT-list5
;---
RobertBurnsPhoto
 dc.b put,in,fireplace,photo ; put photo in fore
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Jarvis is in the dining room
PMJarvisRt1
; make sure Jarvis gets to kitchen before Vera, so that 
; he can testify against her
 dc.b racetrackmessage,emphasis
 dc.w rtmess+4900 ; "I wonder how the dinner's doing?", said 
; Jarvis
 dc.b go,0,80,nullobject
 dc.w Wwaitforperiod,40
 dc.b conditional,0,Vera,nullobject
 dc.w WRtGosub,Veranotmissing-list5
 dc.b racetrackmessage,anger
 dc.w rtmess+4901 ; "Vera?", called Jarvis. "Where are you?"
;
 dc.b go,0,77,nullobject ; return to dining room
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,Robert,nullobject ; face Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+4902 ; "Has anyone seen Vera?", said Jarvis
VeraNotMissing
 dc.b go,0,77,nullobject
 dc.w WRtGoto,WaitForEverRt-list5 ; wait for Robert's instructions
;
JGPrt
 dc.w WRtGosub,JarvisGetPolice-list5
;
JarvisPreInterrogate
 dc.w WRtGoto,JarvisStandardLoopRT-list5
;---
PMInspectorRt1
 dc.w WRtGosub,InspectorArrives-list5
;
; visit people who have no special PM racetracks
 dc.w WRtgosub,InspectorvisitSam-list5
 dc.w WRtGosub,InspectorVisitJarvis-list5
 dc.w WRtGosub,InspectorVisitVera-list5
;
 dc.w WRtGosub,InspectorStandardRT-list5 ; do standart RT once only
;
; visit people who have special PM racetracks
 dc.w WRtGosub,InspectorVisitRobert-list5
 dc.w WRtGosub,InspectorVisitClifford-list5
 dc.w WRtGosub,InspectorVisitFiona-list5
 dc.w WRtGosub,InspectorVisitWilliam-list5
 dc.w WRtGosub,InspectorVisitKathy-list5
; (Anthony triggers his own interrogation)
 dc.w WRtGoto,InspectorEnd-list5 ; repeat standard RT
;
;-------------------------------------------------------------------------
; MURDER 2
;-------------------------------------------------------------------------
;
SueRt2
PMSueRt2 ; also PM rt until robert has hidden clifford's body
 dc.w WRtGosub,ReadInLibraryRt-list5 ; read in library
 dc.w WRtGosub,StudyRt-list5 ; read newspaper in study
 dc.w WRtGoto,SueRt2-list5
;---
VeraRt2
 dc.w IntrusionOn,IntrusionVeraKitchen-list5
PMVeraRt2 ; also PM rt until robert has hidden clifford's body
 dc.w WRtGosub,Verainkitchen-list5
 dc.w WRtGosub,Verainkitchen1-list5
 dc.w WRtGosub,Verainkitchen2-list5
 dc.w WRtGosub,Verainkitchen3-list5
 dc.w WRtGosub,Verainkitchen4-list5
 dc.w WRtGoto,PMVeraRt2-list5
;---
KathyRt2
 dc.w WRtMessage,rtmess+3080 ; trigger 'personarriving'
 dc.w WRtGosub,KathywaitsforJarvis-list5 ; arrive immediately
; Trigger Jarvis to start his proper racetrack...
 dc.b racetrackmessage,emphasis
 dc.w rtmess+259 ; "I think everybody's here now", said 
; Jarvis
 dc.w WRtGosub,KathyUnpacks-list5 ; unpack
;
PMKathyRt2 ; also PM rt until robert has hidden clifford's body
 dc.w WRtGosub,DrawingRt-list5
 dc.w WRtGosub,ReadInLibraryRt-list5
 dc.w WRtGoto,PMKathyRt2-list5
;---
AnthonyRt2
 dc.w Wwaitforperiod,100
 dc.w WRtGosub,AnthonyVisitsVera-list5 ; visit vera
PMAnthonyRt2
 dc.w WRtGosub,StudyRT-list5
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read until dinner
 dc.w WRtGoto,PMAnthonyRt2-list5
;---
WilliamRt2
 dc.w WRtGosub,WilliamArrivesRT-list5
 dc.w WRtGosub,WilliamUnpacks-list5
;
PMWilliamRt2 ; also PM rt until robert has hidden clifford's body
 dc.w WRtGosub,WilliamVisitsVera-list5
PMWilliamRt22
 dc.w WRtGosub,toiletrt-list5
 dc.w WRtGosub,DrawingRt1-list5 ; drink sherry
 dc.w WRtGoto,PMWilliamRt22-list5
;---
RobertRt2
 dc.w WRtGosub,Robertinstudy1-list5
 dc.w WRtGosub,Robertinstudy2-list5
 dc.w WRtGoto,RobertRt2-list5
;---
CliffordRt2
 dc.w Wwaitforperiod,100
 dc.b find,roomonly,robert,nullobject ; find robert
 dc.b telegoto,robert
 dc.w RobertArguesWithClifford-list5 ; put robert on arguing RT
 dc.b find,0,robert,nullobject
 dc.b SetNoun1Busy,0,robert,nullobject
 dc.b telegosub,robert
 dc.w MoveMouthAngerRt-list5
 dc.w WRtConversation,CCliffordArguesM2-list4
 dc.w Occupation,16000 ; was arguing with Sir Robert * clifford <E>
 dc.w WRtMessage,rtmess+1400 ; "Well, well," sneered Sir Robert, 
; "I shouldn't need to guess what you want, Clifford"
 dc.b racetrackmessage,SamAdjacent
 dc.w 6405 ; Sam heard Clifford arguing with Robert in the master 
; bedroom
 dc.b find,0,robert,nullobject
 dc.b waitnoun1free,0,robert,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1401 ; Clifford returned a devious grin
 dc.b facenoun1,0,Robert,nullobject
 dc.b SetNoun1Busy,0,robert,nullobject
 dc.b telegosub,robert
 dc.w MoveMouthAngerRt-list5
 dc.w WRtMessage,rtmess+1402 ; "Don't play games with me, sonny", 
; growled Sir Robert at Clifford
 dc.b find,0,robert,nullobject
 dc.b waitnoun1free,0,robert,nullobject
 dc.b racetrackmessage,anger
 dc.w rtmess+1403 ; Clifford began arguing with Sir Robert
;
 dc.b facenoun1,0,Fiona,nullobject
 dc.b telegoto,fiona
 dc.w FionaStaysInStudy-list5
 dc.w WRtMessage,rtmess+1410 ; Clifford told Fiona to leave the room 
; while he had a chat with Robert
 dc.b facenoun1,0,user,nullobject ; face sam
 dc.w WRtConversation,CCliffordThrowsSamOutM2-list4
 dc.b racetrackmessage,anger+portrait
 dc.w rtmess+1411 ; "And that goes for you too, Sam", snapped Clifford
 dc.b iLOCKDOOR,0,nullobject,nullobject ; make sure sam doesn't enter
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,4999 ; special message to throw sam out of the room
 dc.b waitforpersontoleave,0,user,nullobject
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b racetrackmessage,SamAdjacent
 dc.w 6405 ; Sam heard Clifford arguing with Robert in the master 
; bedroom
;
; Clifford is about to be murdered (Messages 3010-19 are used to trigger 
; each murder).
;
 dc.w WRtMessage,rtmess+3011 ; <null>
;
; Messages 3030-39 are intercepted to confirm that the murder has 
; taken place. All npc's are then given a new 'post-murder' racetrack. 
;
 dc.w WRtMessage,rtmess+3031 ; <Smash of glass>
 dc.b racetrackreturn,0,nullobject,nullobject
;---
RobertArguesWithClifford
 dc.w WRtConversation,CRobertArguesM2-list4
 dc.b find,0,clifford,nullobject
 dc.w WRtGoto,WaitForeverRt-list5 ; controlled by clifford
;---
FionaRt2
 dc.b waitforpersontoleave,0,clifford,nullobject
 dc.b go,0,94,nullobject ; go robert's room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtConversation,CFionaListensArgumentM2-list4
 dc.w WRtGoto,WaitForEverRT-list5
;
; Fiona goes to Robert's study while the murder takes place
FionaStaysInStudy
 dc.b go,0,95,nullobject ; go to study
 dc.w WRtGoto,WaitForEverRT-list5 ; wait until murdeer
;---
; Only triggered once all guests have arrived
JarvisRt2
 dc.w WRtGoto,JarvisRt1-list5 ; as murder 1
;---
InspectorRt2
 dc.b racetrackreturn,0,nullobject,nullobject
;---
;
; After the murder...
;
;---
; murder is revealed
SueLearnsOfMurder2
 dc.b revealmurder,0,nullobject,nullobject
;
; Allow time for Fiona to reach the body
 dc.w WRtConversation,CSueWorriedAboutFionaM2-list4
 dc.b racetrackmessage,shock+portrait
 dc.w 15230 ; Ooh, I'd better go and see how Fiona is
 dc.b go,quick,37,nullobject ; go shed
 dc.b find,0,clifford,nullobject ; stand by body
 dc.b waitforperson,0,fiona,nullobject ; make sure fiona's here
 dc.w Occupation,16001 ; was comforting fiona
 dc.b facenoun1,0,fiona,nullobject ; face fiona
 dc.b actorsinglemessage,emphasis
 dc.w 15231 ; tried to comfort Fiona
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; reach out
 dc.w Occupation,16002 ; was being blamed by Fiona * Sue <E>
 dc.w WRtConversation,CSueBlamedByFionaM2-list4
 dc.w WRtMessage,15232 ; Fiona screamed at Sue and accused 
; her of killing Clifford
 dc.w Occupation,0
;
; Sue weeps in her bedroom
 dc.b find,roomonly,user,nullobject ; find player
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15233 ; Oh, Sam! Fiona thinks I killed Clifford. I think 
; I need to lie down
 dc.b waitnoun1free,0,fiona,nullobject
 dc.b telegoto,fiona
 dc.w FionaWeepsInBedroom-list5 ; trigger fiona to go to her room
 dc.b go,0,92,nullobject ; go bedroom
 dc.b telegoto,robert
 dc.w RobertComfortsSueM2-list5 ; trigger robert to comfort sue
 dc.b iSIT,0,bed,nullobject ; sit on bed
SueWeepsM2
 dc.w WActorSingleMessage,15234 ; sobbed quietly
 dc.w Wwaitforperiod,10
 dc.w WRtGoto,SueWeepsM2-list5 ; robert takes RT control soon
;
; triggered by anthony...
SueAnthonyDrinkM2
 dc.w WRtConversation,0
; Sue drinks with Anthony
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForeverRT-list5 ; Anthony takes over RT
;
; triggered by anthony...
SueDrinksM2
; Sue continues drinking while Anthony meets Fiona in the shed
 dc.w WRtGosub,DrawingRt1-list5
 dc.w WRtGoto,SueDrinksM2-list5
;
; triggered by anthony...
SueSitsStillM2
; Sue sits still while meeting begins in drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRT-list5 ; kathy controls RT
;
; triggered by fiona...
SueKathyLibraryM2
; After Fiona has shouted at Sue, she is taken to the library by Kathy
 dc.w WRtConversation,CSueUpsetByFionaM2-list4
 dc.b go,0,88,nullobject ; go library
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForeverRT-list5 ; Kathy controls RT
;
SueStandardM2
 dc.w WRtConversation,0
 dc.w WRtGoto,SueStandardLoopRT-list5
;---
; murder is revealed
VeraLearnsOfMurder2
 dc.b revealmurder,0,nullobject,nullobject
 dc.w WRtConversation,CVeraLearnsMurderM2-list4 ; heard cliff fall
 dc.w WRtGoto,VeraStandardLoopRT-list5
;---
; murder is revealed
KathyLearnsOfMurder2
;
; Kathy visits the body with William
 dc.b waitforpersontoleave,0,william,nullobject ; make sure william's gone
 dc.w WRtConversation,CKathyHelpsWilliamM2-list4
 dc.b ActorSaidSingleMessage,shock+portrait
 dc.w 15210 ; I'd better go and meet Bill in the shed
;
; Follow William to the shed
KfollowsWtoshed
 dc.b find,roomonly,william,nullobject
 dc.b conditional,0,clifford,nullobject
 dc.w WRtGoto,KathyArrivedInShed-list5
 dc.b wait,0,nullobject,nullobject ; wait 1 turn (prevent hang-up)
 dc.w WRtGoto,KfollowsWtoshed-list5
;
KathyArrivedInShed
 dc.b find,0,clifford,nullobject
 dc.w WRtConversation,CKathyShockedByBodyM2-list4
 dc.b RacetrackMessage,shock+portrait
 dc.w 15211 ; Kathy squealed at the sight of Clifford's body
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b facenoun1,0,william,nullobject ; face him
 dc.w WRtGoto,WaitForeverRt-list5 ; william control's racetrack
;
; Kathy drinks with William in the drawing room
KathyDrinksM2
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject
 dc.w WRtGoto,WaitForeverRt-list5 ; william control's racetrack
;
; Kathy argues with William in their bedroom
KathyArguesM2
 dc.b go,0,93,nullobject go bedroom
 dc.b iSIT,0,bed,nullobject ; sit on bed
 dc.b waitforperson,0,william,nullobject ; wait for william
 dc.w WRtGosub,Wait200orSam-list5
 dc.b find,0,william,nullobject ; walk to william
 dc.w WRtGoto,WaitForeverRt-list5 ; william control's racetrack
;
; Kathy burns William's letter
KathyBurnLetterM2
 dc.w Occupation,16004 ; was looking suspicious * Kathy
 dc.w WRtConversation,CKathyThrowsSamOutM2-list4
 dc.b open,0,chest,nullobject
 dc.b take,0,letter,nullobject
 dc.b close,0,chest,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15108 ; Well, I think I'll go and sit in the study for a while
 dc.w WRtConversation,0
 dc.b go,0,81,nullobject ; go study (has fireplace)
 dc.w Occupation,16005 ; was burning one of William's letters * Kathy <E>
 dc.b put,in,fireplace,letter ; put letter in fire (hard-coded to burn!)
 dc.b facenoun1,0,user,nullobject ; face Sam
 dc.w WRtConversation,CKathyBurnsLettersM2-list4
 dc.b racetrackmessage,emphasis+portrait
 dc.w 15212 ; "William leaves his waste paper everywhere!", snapped 
; Kathy
;
; Kathy accuses Sue to Sam
 dc.b find,roomonly,user,nullobject
 dc.w WRtConversation,CKathyBlamesSueM2-list4
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15213 ; There's something you ought to know, dearest
 dc.w Wwaitforperiod,10
 dc.b find,roomonly,user,nullobject
 dc.b actorsaidsinglemessage,anger
 dc.w 15214 ; Kathy's the one who killed Clifford. It must be her
 dc.w WRtConversation,0
;
; Fall though, OR triggered by anthony if late...
KathyDrawingRoomRT
; Kathy waits in drawing room for meeting with Anthony, Fiona & Sue
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRT-list5 ; fiona takes control in drawing room
;
; triggered by fiona...
KathySueLibraryM2
; Kathy takes Sue to library after Fiona has yelled at her
 dc.w WRtConversation,CKathyScoldsFionaM2-list4
 dc.b actorsaidsinglemessage,anger+portrait
 dc.w 15215 ; Fiona! Stop shouting. Come on, Sue, I want a word in 
; the library
 dc.b go,0,88,nullobject ; go library
 dc.w Occupation,16006 ; was comforting Sue * Kathy
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b telegoto,william
 dc.w WilliamSitsStillM2-list5 ; make william sit still in library
 dc.b waitforperson,0,sue,nullobject ; make sure sue's here
 dc.b waitforperson,0,william,nullobject ; and william, for safety
;
; Kathy comforts Sue in the library
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w FaceKathyRT-list5 ; make sue face kathy
 dc.b find,0,sue,nullobject ; kathy goes to sue
 dc.w WRtGosub,ComfortSue-list5
 dc.w Occupation,0
;
; Trigger William to comfort Sue while Kathy visits fiona
 dc.b telegoto,william
 dc.w WilliamComfortsSueM2-list5
;
; Kathy has words with Fiona about Sue
 dc.b find,0,fiona,nullobject ; find fiona
 dc.w Occupation,16007 ; was yelling at Fiona * Kathy
 dc.b setnoun1busy,0,fiona,nullobject
 dc.b telegosub,fiona
 dc.w FaceKathyRt-list5 ; make fiona face kathy
 dc.b find,0,fiona,nullobject ; find fiona
 dc.b racetrackmessage,anger+portrait
 dc.w 15216 ; "Fiona! I wish you'd leave Sue alone", said Kathy
 dc.w WRtGosub,Reach1TimesRT-list5 ; reach out
 dc.b find,0,fiona,nullobject ; find fiona
 dc.b racetrackmessage,anger
 dc.w 15217 ; "Just give Sue the benefit of the doubt, Fiona" added 
; Kathy
 dc.w WRtGosub,Reach1TimesRT-list5 ; reach out
 dc.b waitnoun1free,0,fiona,nullobject
 dc.b setnoun1busy,0,fiona,nullobject
 dc.b telegosub,fiona
 dc.w MoveMouthEmphasisRT-list5 ; make fiona talk
 dc.b find,0,fiona,nullobject ; find fiona
 dc.b waitnoun1free,0,fiona,nullobject
 dc.w WRtMessage,15218 ; Fiona apologised for blaming Sue and put 
; it down to her being so upset
 dc.w WRtConversation,0
 dc.w Occupation,0
;
 dc.b telegoto,fiona
 dc.w FionaStandardM2-list5 ; fiona finishes her specific RT
;
; Kathy returns to Sue
 dc.b go,0,88,nullobject ; go library
;
 dc.b telegoto,william
 dc.w WilliamStandardM2-list5 ; william finishes his specific RT
;
 dc.b find,0,sue,nullobject ; go to sue
 dc.w Occupation,16008 ; was reassuring Sue * Kathy
 dc.b racetrackmessage,emphasis
 dc.w 15219 ; "I've had a word with Fiona," said Kathy, "And she's 
; willing to give you the benefit of the doubt"
;
 dc.b telegoto,sue
 dc.w SueStandardM2-list5 ; sue finishes her specific RT
 dc.b telegoto,anthony
 dc.w AnthonyStandardM2-list5 ; anthony finishes his specific RT
 dc.w Occupation,0
;
; Kathy invites Sam to her bedroom
 dc.b find,roomonly,user,nullobject ; find sam
 dc.w WRtConversation,CKathyInvitesSamM2-list4
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15270 ; Psst! Sam! Meet me in my bedroom!
 dc.b go,0,93,nullobject ; go bedroom
 dc.w Occupation,16009 ; was waiting for Sam * Kathy
 dc.b iSIT,0,bed,nullobject ; sit on bed
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtConversation,CKathyForeplayM2-list4 ; leads to sex scene
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15271 ; Do you like me, Sam?
 dc.w Wwaitforperiod,250 ; allow sam time to reply
 dc.w WRtConversation,0
 dc.w Occupation,0
;
 dc.w WRtGoto,KathyStandardLoopRT-list5
;---
; murder is revealed
AnthonyLearnsOfMurder2
 dc.b revealmurder,0,nullobject,nullobject
;
; Anthony drinks until Fiona needs comforting
 dc.w WRtGosub,DrawingRt-list5
AnthonyDrinksM2
 dc.w WRtGosub,DrawingRt1-list5
 dc.w WRtGoto,AnthonyDrinksM2-list5
;
; triggered by fiona...
AnthonyComfortsFionaM2
 dc.w WRtConversation,CAnthonyWorriedAboutFionaM2-list4
 dc.b actorsinglemessage,emphasis+portrait
 dc.w 15260 ; I'd think I'll see how Fiona's coping
 dc.b find,roomonly,fiona,nullobject
 dc.w Occupation,16009 ; was comforting Fiona * Anthony
 dc.w WRtGosub,ComfortFionaInBedroom-list5
 dc.w Occupation,0
 dc.w WRtConversation,0
;
; Trigger robert to take over comforting Fiona
 dc.b telegoto,robert
 dc.w RobertComfortsFionaM2-list5
;
; Join Sue for drinks
 dc.b telegoto,sue
 dc.w SueAnthonyDrinkM2-list5
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,sue,nullobject ; wait for sue
AnthonySueDrinkM2
 dc.w Occupation,16010 ; was drinking sherry with Sue * Anthony
 dc.b racetrackmessage,emphasis
 dc.w 15262 ; Anthony and Sue talked about how upset Fiona was
 dc.w Wwaitforperiod,20
 dc.b find,0,table,nullobject
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach for drink
 dc.w WRtMessage,15263 ; Anthony poured a drink for Sue and himself
 dc.b animate,28
 dc.w PourAnimation
; dc.b find,0,table,nullobject ; face table after pouring animation
; dc.w WRtGosub,Reach2TimesRT-list5 ; reach for drink
; dc.b animate,28
; dc.w PourAnimation
 dc.b find,0,Sue,nullobject ; walk over to Sue
 dc.b WaitNoun1Free,0,Sue,nullobject
 dc.b SetNoun1Busy,0,Sue,nullobject
 dc.b telegosub,Sue
 dc.w MoveMouthEmphasisRT-list5 ; make Sue speak
 dc.w WRtMessage,15264 ; Sue took a glass of sherry from Anthony
 dc.b find,0,Sue,nullobject
 dc.w WRtGoto,Reach1TimesRT-list5 ; give her the drink
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w WRtGoto,AnthonySueDrinkM2-list5 ; loop until robert's 
; finished comforting fiona
;
; triggered by robert, when he's finished comforting fiona...
AnthonyMeetsFionaM2
 dc.w Occupation,0
 dc.b facenoun1,0,user,nullobject ; face sam (if he's here)
 dc.b ActorSingleMessage,emphasis
 dc.w 15265 ; I'm just off for a quick wander
;
; Anthony leaves Sue drinking while he meets Fiona in the shed
 dc.b telegoto,sue
 dc.w SueDrinksM2-list5
 dc.b find,0,clifford,nullobject ; stand by body
 dc.b conditional,0,fiona,nullobject
 dc.w WRtGoto,AFionaArrivedM2-list5
 dc.w Occupation,16011 ; was waiting for Fiona * Anthony
 dc.b waitforperson,0,fiona,nullobject ; make sure fiona's here
AFionaArrivedM2
 dc.w Occupation,16012 ; and Fiona were whispering between 
; themselves * Anthony
 dc.b telegosub,fiona
 dc.w FaceAnthonyRT-list5 ; make fiona face anthony
 dc.b facenoun1,0,fiona,nullobject ; anthony faces fiona
 dc.b waitnoun1free,0,fiona,nullobject
 dc.b setnoun1busy,0,fiona,nullobject
 dc.b telegosub,fiona
 dc.w MoveMouthEmphasisRT-list5 ; make fiona talk
 dc.b racetrackmessage,emphasis
 dc.w 15266 ; Anthony and Fiona whispered between themselves
 dc.b waitnoun1free,0,fiona,nullobject
 dc.w WRtConversation,CAnthonyThrowsSamOutM2-list4
 dc.w WRtMessage,15267 ; "Shh! Sam's listening", hissed Anthony
;
; Return to drawing room for a meeting with guests
;
; FIONA:
 dc.b telegoto,fiona
 dc.w FionaDrawingRoomRT-list5 ; send fiona to drawing room
;
; KATHY:
 dc.b telegoto,kathy
 dc.w KathyDrawingRoomRT-list5 ; send kathy to drawing room, in the 
; event that she hasn't already arrived (she could still be waiting for 
; sam to witness her having an argument in her bedroom)
;
; SUE: (already in drawing room, since anthony left her there)
;
 dc.b telegoto,william
 dc.w WilliamReadsM2-list5 ; also, make sure william's in the library
;
 dc.w Occupation,0
 dc.w WRtConversation,0
 dc.b go,0,79,nullobject ; go drawing room
 dc.b telegoto,sue
 dc.w SueSitsStillM2-list5 ; make sue sit still
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRT-list5 ; fiona takes control in drawing room
;
AnthonyStandardM2
 dc.w WRtGoto,AnthonyStandardLoopRT-list5
;
; A subroutine, also used by Robert
ComfortFionaInBedroom
 dc.b go,0,91,nullobject ; go fiona's bedroom
 dc.b waitforperson,0,fiona,nullobject ; make sure fiona's here
ComfortFiona
 dc.b find,0,fiona,nullobject ; find fiona
 dc.b actorsinglemessage,emphasis
 dc.w 15231 ; tried to comfort Fiona
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach out
 dc.b waitnoun1free,0,fiona,nullobject
 dc.b setnoun1busy,0,fiona,nullobject
 dc.b telegosub,fiona
 dc.w Reach2TimesRT-list5 ; make fiona reach out
 dc.b find,0,fiona,nullobject ; find fiona
 dc.b waitnoun1free,0,fiona,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; murder is revealed
WilliamLearnsOfMurder2
 dc.b revealmurder,0,nullobject,nullobject
;
; William visits the body with Kathy
 dc.w WRtConversation,CWilliamGoesToBodyM2-list4
 dc.w Occupation,16013 ; was going to get his doctor's bag * William
 dc.b actorsaidsinglemessage,shock+portrait
 dc.w 15020 ; Oh, dear! I'd better get my bag
 dc.b go,0,93,nullobject ; go bedroom
 dc.b open,0,wardrobe,nullobject
 dc.b take,0,doctorbag,nullobject ; take it
 dc.b examine,0,doctorbag,nullobject ; examine it
 dc.w Occupation,16014 ; had got his doctor's bag, and was 
; on his way to Clifford * William
 dc.b close,0,wardrobe,nullobject
 dc.b find,0,clifford,nullobject ; run to Clifford
 dc.w Occupation,16015 ; and Kathy were examining Clifford's body * William
 dc.w WRtMessage,15021 ; William examined the body
 dc.w WRtConversation,CWilliamConfirmsDeath2-list4
 dc.b drop,0,doctorbag,nullobject ; drop bag
 dc.b examine,0,doctorbag,nullobject
 dc.w WRtGosub,ReachDown2TimesRT-list5 ; reach into bag
 dc.b examine,0,clifford,nullobject
;
; Whisper to Kathy
 dc.b waitforperson,0,kathy,nullobject ; wait for kathy
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,kathy
 dc.w FaceWilliamRt-list5 ; make kathy face william
 dc.b find,0,kathy,nullobject ; william goes to kathy
 dc.b waitnoun1free,0,kathy,nullobject
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,kathy
 dc.w MoveMouthShockRt-list5 ; make kathy speak
 dc.w Wactorsinglemessage,15200 ; and Kathy whispered between themselves
 dc.b waitnoun1free,0,kathy,nullobject
;
; Examine body
 dc.b find,0,clifford,nullobject
 dc.w WRtMessage,15021 ; William examined the body
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach towards body
 dc.b facenoun1,0,user,nullobject
 dc.b ActorSaidSingleMessage,portrait+emphasis
 dc.w 15290 ; I'm afraid there's no hope for him
 dc.b take,0,doctorbag,nullobject ; take it
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15201 ; I think we both need a drink, Kathy
 dc.b telegoto,kathy
 dc.w KathyDrinksM2-list5 ; kathy drinks with william in drawing room
;
; Return doctor's bag to bedroom
 dc.w Occupation,16016 ; was on his way to his room to put his 
; doctor's bag away * William
 dc.b go,0,83,nullobject ; go hall
 dc.b go,quick,93,nullobject ; return to bedroom (quickly)
 dc.w Occupation,0
 dc.b put,in,wardrobe,doctorbag ; put bag in wardrobe
 dc.b close,0,wardrobe,nullobject
 dc.w WRtConversation,0
;
; Drink with Kathy in drawing room
 dc.b go,quick,79,nullobject ; go drawing room (quickly)
 dc.b find,0,table,nullobject ; go to table
 dc.b waitforperson,0,kathy,nullobject ; make sure kathy's here
 dc.w Occupation,16017 ; was drinking sherry with Kathy * William
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15202 ; A drop of Bob's vintage sherry should cheer us up, 
; eh, Kathy?
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach for drink
 dc.b animate,28
 dc.w PourAnimation
 dc.b find,0,kathy,nullobject ; walk over to kathy
 dc.b SetNoun1Busy,0,kathy,nullobject
 dc.b telegosub,Kathy
 dc.w reach1timesRT-list5 ; make kathy reach out
 dc.w WRtMessage,15291 ; Kathy took a glass of sherry from William
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b animateCD,8
 dc.w SitDrinkAni
;
; Make Kathy get up and argue
 dc.w Occupation,16018 ; was arguing with Kathy * William
 dc.b telegoto,Kathy
 dc.w KathyArguesM2-list5
 dc.w WRtMessage,15205 ; Kathy began to walk off
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.w Occupation,0
 dc.b facenoun1,0,user,nullobject ; face sam
 dc.w WRtConversation,CWilliamAngryWithKathyM2-list4
 dc.b ActorSaidSingleMessage,emphasis+portrait
 dc.w 15204 ; What's got into that woman
;
; Argue with Kathy in bedroom
 dc.b go,0,93,nullobject go bedroom
 dc.b waitforperson,0,kathy,nullobject ; make sure Kathy's here
 dc.w Occupation,16018 ; was arguing with Kathy * William
 dc.w WRtGosub,Wait200orSam-list5
 dc.b find,0,kathy,nullobject ; walk to kathy
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,Kathy
 dc.w Reach1TimesRt-list5 ; make kathy wave her arms about
 dc.w WRtMessage,15203 ; William and Kathy argued loudly
 dc.w WRtGosub,Reach2TimesRt-list5 ; william waves his arms about
 dc.b facenoun1,0,user,nullobject
 dc.b telegoto,kathy
 dc.w KathyBurnLetterM2-list5 ; kathy burns the letter
 dc.w WRtConversation,CWilliamThrowsSamOutM2-list4
 dc.b ActorSaidSingleMessage,portrait+emphasis
 dc.w 15026 ; How dare you eavesdrop on us, Sam
;
; William hides the bottles in Sue's room
 dc.w Occupation,16018 ; looked to be doing something suspicious * William
 dc.b open,0,wardrobe,nullobject
 dc.b take,0,Kathyswhiskybottle,nullobject
 dc.b conditional,0,Kathyswhiskybottle,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15107 ;$ I'd better hide this somewhere
 dc.b close,0,wardrobe,nullobject
 dc.b go,0,92,nullobject ; go Sue's room
 dc.b conditional,0,Kathyswhiskybottle,nullobject
 dc.w WRtConversation,CWilliamHidesBottleM2-list4
 dc.b conditional,0,Kathyswhiskybottle,nullobject
 dc.b put,in,wardrobe,Kathyswhiskybottle ; hide bottle in wardrobe
 dc.b close,0,wardrobe,nullobject ; close the wardrobe
 dc.w WRtConversation,0
;
WilliamReadsM2
 dc.w WRtGosub,ReadInLibraryRt-list5 ; read in library
 dc.w WRtGoto,WilliamReadsM2-list5
;
; triggered by kathy...
WilliamSitsStillM2
; William sits still while Kathy comforts Sue
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRT-list5 ; kathy controls RT
;
; triggered by kathy...
WilliamComfortsSueM2
; Now it's William's turn to comfort Sue
 dc.w Occupation,16019 ; was comforting Sue * William
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w FaceWilliamRT-list5 ; make sue face william
 dc.b find,0,sue,nullobject ; william goes to sue
 dc.w WRtGosub,ComfortSue-list5
 dc.w WRtGoto,WilliamComfortsSueM2-list5
;
WilliamStandardM2
 dc.w Occupation,0
 dc.w WRtGoto,WilliamStandardLoopRT-list5
;---
; Robert hides Clifford's body
PMRobertRt2
 dc.b iUNLOCKDOOR,0,nullobject,nullobject
; the 'secret route' used by Robert will contradict the floorpointers, 
; so directional verbs are used rather than 'go room' verbs...
;
 dc.b go,quick,72,nullobject ; se corridor
 dc.b go,quick,63,nullobject ; bathroom
 dc.b go,quick,71,nullobject ; ne corridor
 dc.b go,quick,69,nullobject ; secret stairs
 dc.b go,quick,82,nullobject ; scullery
 dc.b go,quick,40,nullobject ; garden
 dc.b go,quick,39,nullobject ; garden (body)
;
 dc.b take,0,Clifford,nullobject ; take Clifford's body
 dc.b go,quick,37,nullobject ; go shed
 dc.b drop,0,Clifford,nullobject ; drop body in shed
;
 dc.b go,quick,40,nullobject ; return to garden
 dc.b go,quick,82,nullobject ; scullery
 dc.b go,quick,69,nullobject ; secret stairs
 dc.b go,quick,71,nullobject ; ne corridor
 dc.b go,quick,63,nullobject ; bathroom
 dc.b go,quick,72,nullobject ; se corridor
 dc.b go,quick,94,nullobject ; bedroom
;
; Messages 3079-9 are used when the murder sequence is complete, and 
; the guilty party has returned to whatever he or she was doing 
; before the murder...
;
; (This message shouldn't really be seen in theory, but just in 
; case...)
;
 dc.w WRtMessage,rtmess+3071 ; Robert looked around sheepishly
;
 dc.b go,0,95,nullobject ; study (Fiona)
 dc.b find,0,Fiona,nullobject
 dc.w Occupation,16020 ; was explaining to Fiona where 
; Clifford had gone * Sir Robert
 dc.b telegoto,fiona
 dc.w RobertreturnsToFiona-list5 ; stop reading, & when robert has 
; left the room, go looking for clifford
 dc.b setnoun1busy,0,fiona,nullobject
 dc.b telegosub,fiona
 dc.w MoveMouthEmphasisRT-list5
 dc.b waitnoun1free,0,fiona,nullobject
 dc.w WRtMessage,rtmess+1420 ; "You were a long time", quizzed Fiona
 dc.b racetrackmessage,anger
 dc.w rtmess+1421 ; "You'd better go and see that husband 
; of yours," growled Sir Robert
 dc.w Wwaitforperiod,20
 dc.w WRtConversation,CRobertThrownCliffordOutM2-list4
 dc.b racetrackmessage,emphasis+portrait
 dc.w rtmess+1422 ; "He's been told to leave the house", added Sir 
; Robert
;
; trigger jarvis to find the body
 dc.b telegoto,jarvis
 dc.w JarvisFindsBody-list5
;
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
 dc.w Occupation,0
;
; stay in room for a while
 dc.w WRtGoto,RobertRt2-list5
;
; murder is revealed
RobertLearnsOfMurder2
 dc.b revealmurder,0,nullobject,nullobject
;
; Robert blames gypsies and goes patrols the garden until 
; Sue is ready to be comforted
 dc.b facenoun1,0,user,nullobject ; face sam
 dc.w WRtConversation,CRobertBlamesGypsiesM2-list4
 dc.b racetrackmessage,shock
 dc.w 15240 ; "I'll bet those damned gypsies killed him!", stormed 
; Sir Robert. "I'm going to have a look around the garden"
RobertPatrolsM2
 dc.w Occupation,16021 ; was looking for gypsies * Sir Robert
 dc.w WRtGosub,RobertPatrolsGardenRT-list5 
 dc.w WRtGoto,RobertPatrolsM2-list5
;
; triggered by sue...
RobertComfortsSueM2
 dc.w Occupation,0
 dc.w WRtConversation,CRobertWorriedAboutSueM2-list4
 dc.b go,0,92,nullobject ; go sue's bedroom
 dc.b waitforperson,0,sue,nullobject ; make sure sue's here
RCSM2
 dc.w Occupation,16022 ; was comforting Sue * Sir Robert
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w FaceRobertRT-list5 ; make sue face sir robert
 dc.b facenoun1,0,sue,nullobject ; robert faces sue
 dc.w WRtGosub,ComfortSue-list5
 dc.w WRtGoto,RCSM2-list5 ; Until ready to comfort Fiona
;
; triggered by anthony...
RobertComfortsFionaM2
 dc.w Occupation,0
 dc.w WRtConversation,CRobertWorriedAboutFionaM2-list4
 dc.b actorsinglemessage,emphasis+portrait
 dc.w 15242 ; I'd better try to sort things out with Fiona
 dc.b find,roomonly,fiona,nullobject
 dc.w Occupation,16023 ; was comforting Fiona * Sir Robert
 dc.w WRtGosub,ComfortFionaInBedroom-list5
 dc.b telegoto,anthony
 dc.w AnthonyMeetsFionaM2-list5 ; trigger anthony to meet fiona
 dc.b telegoto,fiona
 dc.w FionaMeetsAnthonyM2-list5 ; trigger fiona to meet anthony
 dc.w WRtConversation,0
 dc.w Occupation,0
;
; Accuse Sam to Gormley
 dc.b telegosub,inspector+resume
 dc.w InspectorMeetsRobertM2-list5 ; inspector meets sir robert
 dc.b go,0,94,nullobject ; go master bedroom
 dc.b conditional,0,inspector,nullobject
 dc.w WRtGoto,RInspectorArrivedM2-list5
 dc.w Occupation,16024 ; was waiting for the Inspector * Sir Robert
 dc.b waitforperson,0,inspector,nullobject ; make sure inspector's here
RInspectorArrivedM2
 dc.w Occupation,16025 ; said, "Speak of the devil", as 
; Sam arrived * Sir Robert
 dc.b find,0,inspector,nullobject ; go to inspector
 dc.b actorsinglemessage,emphasis
 dc.w 15243 ; and the Inspector whispered to each other
 dc.w WRtGosub,Reach1TimesRT-list5 ; reach out
 dc.w WRtConversation,CRobertBlamesSamM2-list4
 dc.b racetrackmessage,emphasis+portrait
 dc.w 15244 ; "I'm certain it was Sam", Sir Robert 
; whispered
 dc.b facenoun1,0,user,nullobject ; face sam
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
 dc.w Occupation,0
;
; Robert goes below window to find photo
 dc.b go,0,39,nullobject ; go right side garden
 dc.b conditional,0,photo,nullobject ; photo here?
 dc.w WRtGoto,RobertBurnsPhotoM2-list5
 dc.w WRtGoto,RobertStandardLoopRT-list5
;
RobertBurnsPhotoM2
 dc.w WRtConversation,CRobertBurnsPhotoM2-list4
 dc.w Occupation,16026 ; was looking for something * Sir Robert
 dc.b take,0,photo,nullobject ; take photo
 dc.w Occupation,0
 dc.b go,0,94,nullobject ; go bedroom
 dc.w Occupation,16027 ; was burning a photograph * Sir Robert <E>
 dc.b put,in,fireplace,photo ; burn photo
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.w WRtGoto,RobertStandardLoopRT-list5
;
; A subroutine, also used by Kathy
ComfortSue
 dc.b find,0,sue,nullobject
 dc.b actorsinglemessage,emphasis
 dc.w 15241 ; tried to comfort Sue
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach out
 dc.b waitnoun1free,0,sue,nullobject
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w Reach2TimesRT-list5 ; make sue reach out
 dc.b find,0,sue,nullobject
 dc.b waitnoun1free,0,sue,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;---
PMFionaRt2
; continue reading in robert's dressing room
 dc.b go,0,95,nullobject ; go to study
 dc.w Occupation,16028 ; was waiting for Clifford and Sir Robert 
; finish arguing * Fiona
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
;
PMFionaRt22
 dc.w WRtConversation,CFionaWaitsForRobertM2-list4
 dc.w WActorSingleMessage,rtmess+641 ; read the newspaper
 dc.w WRtGosub,READN3timesRT-list5 ; read 3 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+642 ; read newspaper
 dc.w WRtGosub,READN3timesRT-list5 ; read 3 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+643 ; browsed through the horoscopes 
; and laughed
 dc.w WRtGosub,READN3timesRT-list5 ; read 3 times in current dirn. 
 dc.w WRtGoto,PMFionaRt22-list5 ; continue reading
;
RobertReturnsToFiona
 dc.w Occupation,0
 dc.w WRtConversation,0
 dc.b waitforpersontoleave,0,robert,nullobject ; wait for robert to leave
 dc.b racetrackmessage,anger
 dc.w rtmess+1412 ; "Typical men!", huffed Fiona
FionaLooksForClifford
 dc.w Occupation,16029 ; was looking for Clifford * Fiona
 dc.b go,0,47,nullobject ; go to front of house
 dc.w WRtConversation,CFionaCantFindCliffordM2-list4
 dc.b racetrackmessage,emphasis+portrait
 dc.w rtmess+1413 ; "Clifford?!", called Fiona
 dc.b go,0,49,nullobject ; go to front of house
 dc.b racetrackmessage,emphasis+portrait
 dc.w rtmess+1414 ; "Where are you, Cliff?!", shouted Fiona
 dc.b go,0,38,nullobject ; go to front of house
 dc.b racetrackmessage,emphasis+portrait
 dc.w rtmess+1415 ; "No sign of Clifford", said Fiona. "I might as 
; well have dinner"
 dc.w WRtGoto,FionaLooksForClifford-list5
;
FionaLearnsOfMurder2
 dc.w Occupation,16270 ; was on her way to see Clifford's body * Fiona
 dc.b revealmurder,0,nullobject,nullobject
 dc.b facenoun1,0,user,nullobject
 dc.w WRtConversation,CFionaLearnsMurderM2-list4
 dc.b racetrackmessage,shock+portrait
 dc.w rtmess+1437 ; Fiona screamed in shock and began to head off to 
; the shed
 dc.b go,quick,37,nullobject ; go shed (quickly)
 dc.b find,0,clifford,nullobject
 dc.w Occupation,16030 ; was in tears * Fiona
 dc.b racetrackmessage,shock+portrait
 dc.w 15220 ; Fiona sobbed over Clifford's body
 dc.b waitforperson,0,sue,nullobject ; wait for sue
 dc.b facenoun1,0,sue,nullobject
 dc.w WRtGosub,MoveMouthAngerRT-list5 ; move mouth while sue controls 
; comforting racetrack (this is faster than sending fiona on a 
; telegosub, as we don't want to spend much time in the shed because 
; william and Kathy are soon to arrive)
 dc.w Wwaitforperiod,10
 dc.w WRtGosub,MoveMouthAngerRT-list5 ; move mouth while sue controls 
 dc.w WRtGoto,WaitForeverRT-list5 ; sue takes over
;
; triggered by sue...
FionaWeepsInBedroom
 dc.b find,roomonly,user,nullobject ; find player
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15221 ; I can't take any of this. I'm going to my room
 dc.b go,0,91,nullobject ; go bedroom
 dc.b telegoto,anthony
 dc.w AnthonyComfortsFionaM2-list5 ; trigger anthony to comfort fiona
 dc.b iSIT,0,bed,nullobject ; sit on bed
FionaWeepsM2
 dc.b conditional,1,random,15 ; 1/16 chance of message...
 dc.w WActorSingleMessage,15234 ; sobbed quietly
 dc.w Wwaitforperiod,10
 dc.w WRtGoto,FionaWeepsM2-list5 ; anthony first takes RT control, 
; and when he's finished, robert takes over
;
; triggered by robert when he's finished comforting fiona...
FionaMeetsAnthonyM2
; Fiona meets anthony in the shed
 dc.b go,0,37,nullobject ; go shed
 dc.b find,0,clifford,nullobject ; stand by body
 dc.b conditional,0,anthony,nullobject
 dc.w WRtGoto,WaitForEverRT-list5 ; anthony controls RT
 dc.w Occupation,16271 ; was waiting for Anthony * Fiona
 dc.b waitforperson,0,anthony,nullobject
 dc.w Occupation,0
 dc.w WRtGoto,WaitForEverRT-list5 ; anthony controls RT
;
; triggered by anthony...
FionaDrawingRoomRT
; Fiona waits in drawing room for meeting with Anthony, Kathy & Sue
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,sue,nullobject
 dc.b waitforperson,0,kathy,nullobject
 dc.b waitforperson,0,anthony,nullobject ; make sure others have arrived
;
; Fiona yells at Sue
 dc.w WRtGosub,Wait200orSam-list5
 dc.b find,0,Sue,nullobject ; walk over to sue
 dc.w Occupation,16031 ; was yelling at Sue * Fiona <E>
 dc.w WRtConversation,CFionaBlamesSueM2-list4
 dc.b actorsinglemessage,anger+portrait
 dc.w 15222 ; began to yell at Sue
;
; Trigger Kathy to take Sue into the library
 dc.b telegoto,kathy
 dc.w KathySueLibraryM2-list5
 dc.b telegoto,sue
 dc.w SueKathyLibraryM2-list5
;
 dc.w WRtGosub,Reach2TimesRT-list5 ; reach out
;
; Resume drinking with Anthony when Kathy & Sue have left
 dc.b waitforpersontoleave,0,sue,nullobject
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.w Occupation,16032 ; was in a mood over Sue * Fiona
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.b actorsaidsinglemessage,anger+portrait
 dc.w 15223 ; God, I hate that Lombard woman!
 dc.w WRtGoto,WaitForeverRT-list5
;
FionaStandardM2
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.w WRtGoto,FionaStandardLoopRT-list5
;---
; Clifford is dead!
PMCliffordRt2
 dc.b racetrackreturn,0,nullobject,nullobject
;---
PMJarvisrt2
 dc.w Occupation,16033 ; was preparing for dinner * Jarvis
 dc.w WRtGoto,JarvisPrepareTable-list5
;
JarvisFindsBody
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1430 ; "That should do," said Jarvis
 dc.b go,0,80,nullobject ; go kitchen
 dc.b facenoun1,0,Vera,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+1431 ; "The table's ready," said Jarvis. "I'm going to look 
; at the cabbages"
 dc.w Occupation,16034 ; was going to do some gardening * Jarvis
 dc.b go,0,82,nullobject ; scullery
 dc.b go,0,40,nullobject ; garden
 dc.b go,0,37,nullobject ; go to shed (body)
 dc.w Occupation,16035 ; looked horrified * Jarvis
 dc.b RevealMurder,0,nullobject,nullobject ; reveal to everyone in room
 dc.b facenoun1,0,clifford,nullobject
 dc.w WRtConversation,CJarvisRevealsMurderM2-list4
 dc.b racetrackmessage,Shock+portrait
 dc.w rtmess+1432 ; "Oh dear!", exclaimed Jarvis as he saw Clifford's 
; body
;
; Find Sam and break the news to him
 dc.b find,roomonly,user,nullobject
 dc.b RevealMurder,0,nullobject,nullobject ; reveal murder to sam
;; dc.b conditional,0,samknowsaboutmurder
;; dc.w WRtGoto,JDontRevealToSamM2-list5 ; sam already knows
;; dc.b racetrackmessage,shock+portrait
;; dc.w rtmess4+1440 ; "There's some bad news, Sam!", quavered Jarvis, "I'm 
;;; afraid someone's killed Clifford"
;; dc.b RevealMurder,0,nullobject,nullobject ; reveal to everyone in room
;; dc.w Wwaitforperiod,10
;;JDontRevealToSamM2
;
; Since people are scattered around the house in M2, jarvis calls 
; out loud, to reveal the murder
; (telegoto commands don't take any turns)
 dc.b telegoto,fiona
 dc.w FionalearnsOfMurder2-list5
 dc.b telegoto,vera
 dc.w VeraLearnsOfMurder2-list5
 dc.b telegoto,sue
 dc.w SuelearnsOfMurder2-list5
 dc.b telegoto,kathy
 dc.w KathylearnsOfMurder2-list5
 dc.b telegoto,william
 dc.w WilliamlearnsOfMurder2-list5
 dc.b telegoto,anthony
 dc.w AnthonylearnsOfMurder2-list5
 dc.b telegoto,robert
 dc.w RobertlearnsOfMurder2-list5
;
 dc.b find,roomonly,user,nullobject
 dc.b racetrackmessage,shock+portrait
 dc.w rtmess+1433 ; Jarvis shouted the news through the house, so 
; that everyone would hear
 dc.b RevealMurder,0,nullobject,254 ; reveal murder to all npcs (254)
;
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
;
 dc.w WRtGosub,JarvisGetpolice-list5 ; call police
;
 dc.w WRtGoto,JarvisStandardLoopRt-list5
;---
PMInspectorRt2
 dc.w WRtGosub,InspectorArrives-list5
;
; visit people who have no special PM racetracks
 dc.w WRtgosub,InspectorvisitSam-list5
 dc.w WRtGosub,InspectorVisitJarvis-list5
 dc.w WRtGosub,InspectorVisitVera-list5
;
 dc.w WRtGosub,InspectorStandardRT-list5 ; do standart RT once only
;
; visit people who have special PM racetracks
 dc.w WRtGosub,InspectorVisitRobert-list5
 dc.w WRtGosub,InspectorVisitFiona-list5
 dc.w WRtGosub,InspectorVisitWilliam-list5
 dc.w WRtGosub,InspectorVisitKathy-list5
 dc.w WRtGosub,InspectorVisitAnthony-list5
 dc.w WRtGoto,InspectorEnd-list5 ; repeat standard RT
;
; Subroutine triggered by Sir Robert, to meet him in his bedroom
InspectorMeetsRobertM2
 dc.w Occupation,16037 ; was on his way to meet Sir 
; Robert * Gormley
 dc.b go,0,94,nullobject ; go master bedroom
 dc.b waitforperson,0,robert,nullobject ; make sure robert's here
 dc.w Occupation,0
 dc.w WRtGosub,Wait200orSam-list5
 dc.b find,0,robert,nullobject ; go to robert
 dc.b waitforpersontoleave,0,robert,nullobject ; robert finished
 dc.b find,roomonly,user,nullobject ; find sam
 dc.w WRtConversation,CInspectorSuspectsSamM2-list4
 dc.b ActorSaidSingleMessage,anger+portrait
 dc.w 15280 ; If what Sir Robert says is true, then you be back in 
; the slammer. Just be careful, Sam
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; MURDER 3
;-------------------------------------------------------------------------
;
SueRt3
 dc.w WRtGosub,SitDiningRoomS1-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
; talk with robert in his room
SueMeetsRobertM3
 dc.b go,quick,94,nullobject
 dc.b iSIT,0,nullobject,nullobject
 dc.b waitforperson,0,robert,nullobject ; robert here?
;
WaitRobertToSit
 dc.b wait,0,nullobject,nullobject ; wait 1 turn (prevent hang-up)
 dc.b conditional,0,actorstanding,robert ; robert sat down?
 dc.w WRtGoto,WaitRobertToSit-list5
 dc.b find,0,robert,nullobject
PMSueRt3
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;---
VeraRt3
 dc.w WRtMessage,rtmess+259 ; put jarvis on standard RT
PMVeraRt3
 dc.w WRtGoto,VeraRt2-list5 ; as murder 2
;---
KathyRt3
 dc.w WRtGosub,SitDiningRoomS3-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
; go bedroom for an argument with william
KathyArguesWilliam
 dc.b waitforpersontoleave,0,robert,nullobject
 dc.b waitforpersontoleave,0,sue,nullobject
 dc.b go,0,93,nullobject ; go bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,william,nullobject
 dc.w WRtConversation,CKathyArguesWilliamM3-list4 ;***
 dc.w WRtGoto,WaitForEver-list5 ; william takes over soon
;
KathyLeavesWilliamM3
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b go,0,84,nullobject ; go landing
 dc.b facenoun1,0,sam,nullobject
 dc.w WRtConversation,CKathyLeavesWilliamM3-list4 ;***
 dc.b racetrackmessage,anger
 dc.w 15330 ; "There's no reasoning with William in there!", sobbed 
; Kathy. "I'm off to dry my eyes"
 dc.b go,0,63,nullobject ; go main bathroom
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b telegoto,fiona
 dc.w FionaKillsBill-list5 ; send fiona to kill bill
PMKathyRt3
 dc.w WRtGosub,gotoilet-list5
;---
AnthonyRt3
 dc.w WRtGosub,SitDiningRoomN1-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
AnthonyArguesM3
 dc.b waitforpersontoleave,0,william,nullobject
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.w WRtConversation,CAnthonyAngryAtWillM3-list4 ;***
;
MoveMouthLoop
 dc.w WRtGosub,MoveMouthEmphasisRT-list5
 dc.w Wwaitforperiod,25
 dc.w WRtGosub,MoveMouthShockRT-list5
 dc.w Wwaitforperiod,25
 dc.w WRtGosub,MoveMouthAngerRT-list5
 dc.w Wwaitforperiod,25
 dc.w WRtGoto,MoveMouthLoop-list5
;
AnthonyCliffDrink
 dc.w WRtConversation,0
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
PMAnthonyRt3
 dc.w WRtGoto,WaitForEverRT-list5 ; until murder
;---
WilliamRt3
 dc.w WRtGosub,SitDiningRoomS2-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
; go bedroom for an argument with kathy
WilliamArguesKathy
 dc.b waitforpersontoleave,0,robert,nullobject
 dc.b waitforpersontoleave,0,sue,nullobject
 dc.b facenoun1,0,kathy,nullobject
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15331 ; Come on, Kathy. I'd like a word with you in the 
; bedroom
 dc.b go,0,93,nullobject ; go bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,kathy,nullobject
 dc.w WRtConversation,CWilliamArguesKathyM3-list4 ;***
 dc.w Occupation,16300 ; and Kathy were Arguing ; William
 dc.b find,coarse,kathy,nullobject
 dc.w Wwaitforperiod,25
 dc.b conditional,0,sam,nullobject
 dc.w WRtGoto,SamListensArgument-list5
 dc.b racetrackmessage,samadjacent
 dc.w 6510 ; Sam heard william and Kathy arguing in their room
 dc.w Wwaitforperiod,25
 dc.b conditional,0,sam,nullobject
 dc.w WRtGoto,SamListensArgument-list5
 dc.b racetrackmessage,samadjacent
 dc.w 6511 ; William and Kathy argued loudly in the green bedroom
 dc.w WRtGosub,Wait200orSam-list5
;
; trigger Fiona to eavesdrop on the argument
SamListensArgument
 dc.b telegoto,fiona
 dc.w FionaListensArgument-list5
;
; trigger clifford to drink with anthony
 dc.b telegoto,clifford
 dc.w CliffAnthonyDrink-list5
;
; trigger anthony to drink with clifford
 dc.b telegoto,Anthony
 dc.w AnthonyCliffDrink-list5
;
; William argues with Kathy
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,kathy
 dc.w FaceWilliamRt-list5 ; kathy faces william
 dc.b racetrackmessage,emphasis
 dc.w rtmess2+1500 ; "I've had it up to here with your damned Flirting!", 
; growled William
 dc.b waitnoun1free,0,kathy,nullobject
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,kathy
 dc.w MoveMouthEmphasisRt-list5 ; kathy moves mouth
 dc.w WRtMessage,rtmess2+1501 ; "Flirting?", said Kathy, "I don't know what you're 
; talking about!"
 dc.b find,coarse,kathy,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess2+1502 ; "Do you think I'm stupid!", shouted William
 dc.b waitnoun1free,0,kathy,nullobject
 dc.b setnoun1busy,0,kathy,nullobject
 dc.b telegosub,kathy
 dc.w MoveMouthEmphasisRt-list5 ; kathy moves mouth
 dc.w WRtMessage,rtmess2+1503 ; "But it's only a bit of fun", sobbed Kathy
 dc.b find,coarse,kathy,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess2+1504 ; "You won't be saying that when our marriage 
; breaks up!", replied William
;
; trigger kathy to leave the room
 dc.b telegoto,kathy
 dc.w KathyLeavesWilliamM3-list5
;
; murder is about to take place
 dc.w WRtMessage,rtmess2+1520 ; Kathy started sobbing and decided to 
; leave the room
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRt-list5 ; until murder
;---
RobertRt3
 dc.b localmove,0,8,5 ; stand behind fiona & anthony
 dc.b animate,1
 dc.w standinganimation+5 ; face south
 dc.w WRtConversation,CRobertRevealsWillM3-list4 ;***
 dc.w Occupation,16301 ; was reading out his new will ; Robert
 dc.w WRtGosub,Wait200orSam-list5 ; wait 200 / wait for sam
 dc.b facenoun1,0,sam,nullobject
 dc.b RacetrackMessage,emphasis
 dc.w 15300 ; "I hope everything's clear", said Sir Robert as 
; he finished announching the changes in his will
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; reach out
 dc.b RacetrackMessage,emphasis
 dc.w 15309 ; "To summarise," said Sir Robert, "Bill will be inheriting 
; the bulk of the estate when I kick the bucket"
 dc.b animateCD,3
 dc.w ReachRightAnimation ; reach out
;
; send people about their way
 dc.b telegoto,william
 dc.w WilliamArguesKathy-list5
 dc.b telegoto,kathy
 dc.w KathyArguesWilliam-list5
 dc.b telegoto,fiona
 dc.w FionaArguesM3-list5
 dc.b telegoto,clifford
 dc.w CliffordArguesM3-list5
 dc.b telegoto,anthony
 dc.w AnthonyArguesM3-list5
;
; chat with sue in the master bedroom
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b RacetrackMessage,emphasis
 dc.w 15301 ; "Well," said Sir Robert, "I've got a few things to 
; discuss with Miss Lombard"
 dc.b telegoto,sue
 dc.w SueMeetsRobertM3-list5 ; sue follows
 dc.b go,quick,94,nullobject ; go bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere & chat with sue
 dc.b waitforperson,0,sue,nullobject ; sue here?
 dc.w Occupation,16302 ; was discussing business with Sue ; Robert
 dc.b racetrackmessage,emphasis
 dc.w 15302 ; Sir Robert discussed his will with Sue
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w MoveMouthEmphasisRT-list5 ; sue talks
 dc.b waitnoun1free,0,sue,nullobject
 dc.w WRtMessage,15303 ; Sue expressed how pleased she was about the 
; changes to Robert's will
;
PMRobertRt3
RobertTalksSueM3
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w MoveMouthEmphasisRT-list5 ; sue talks
 dc.b waitnoun1free,0,sue,nullobject
 dc.b ActorVaryMessage,emphasis
 dc.w 15310
; and Sue talked business
; said how pleased he was for William
; talked quietly with Sue
; and Sue whispered between themselves
; talked with Sue about his will
 dc.w Wwaitforperiod,20
 dc.w WRtGoto,RobertTalksSueM3-list5
;---
CliffordRt3
 dc.w WRtGosub,SitDiningRoomN3-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
CliffordArguesM3
 dc.b waitforpersontoleave,0,william,nullobject
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.w WRtConversation,CCliffordAngryAboutWillM3-list4 ;***
 dc.w WRtGoto,MoveMouthLoop-list5
;
CliffAnthonyDrink
PMCliffordRt3
 dc.w WRtConversation,0
 dc.w WRtGosub,DrawingRt-list5
 dc.w WRtGoto,CliffAnthonyDrink-list5 ; until murder
;---
FionaRt3
 dc.w WRtGosub,SitDiningRoomN2-list5 ; sit at dinner table
 dc.w WRtGoto,WaitForEverRT-list5 ; robert controls RT
;
FionaArguesM3
 dc.b waitforpersontoleave,0,william,nullobject
 dc.b waitforpersontoleave,0,kathy,nullobject
 dc.w WRtConversation,CFionaAngryAboutWillM3-list4 ;***
 dc.w Occupation,16303 ; was talking angrily about the changes 
; to the will ; Fiona
;
FionaArguesM31
 dc.b actorsaidsinglemessage,anger
 dc.w 15340 ; I think it's disgusting that Bill should inherit 
; everything
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w 15341 ; "Bill's not even in the family business", stormed 
; Clifford
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w 15342 ; "Too true!", said Anthony, "Why should he inherit 
; the estate?"
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,anger
 dc.w 15343 ; "Bill's such a little creep!", sniffed Fiona
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w 15344 ; "I'm going to complain to Sir Robert", said Clifford
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w 15345 ; "How could he consider leaving the business to such 
; a bafoon", added Clifford
 dc.w Wwaitforperiod,20
 dc.w WRtGoto,FionaArguesM31-list5
;
; Fiona listens to Kathy and William arguing
FionaListensArgument
 dc.w Occupation,0
 dc.b racetrackmessage,anger
 dc.w 15320 ; Sam heard some shouting coming from upstairs.%
; "I'm going to try and change the old fool's mind!", snapped Fiona
 dc.b go,quick,84,nullobject ; go to landing
 dc.b igodoor,0,93,nullobject ; wait at Kathy & William's door
 dc.w WRtConversation,CFionaListensArgumentM3-list4 ;***
 dc.w Occupation,16304 ; was eavesdropping on William and Kathy's 
; argument ; Fiona
 dc.b racetrackmessage,shock
 dc.w 15321 ; "Just listen to Kathy and William arguing in 
; there!", tutted Fiona
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,15322 ; Fiona was listening to Kathy and William arguing 
; in their room
;
; Resume the visit to Sir Robert
 dc.b go,0,72,nullobject ; SE corridor
 dc.w Occupation,0
 dc.b actorsaidsinglemessage,shock
 dc.w 15323 ; I can still hear William arguing from here. I would 
; have though the inheritance would have cheered him up
;
FionaDisuadeRobert
 dc.b find,coarse,robert,nullobject ; find Sir Robert
 dc.w WRtConversation,CFionaAngryAboutWillM3-list4 ;***
 dc.w Occupation,16305 ; was trying to change Sir Robert's 
; mind over the will
 dc.b racetrackmessage,anger
 dc.w 15325 ; Fiona butted in on Sir Robert's conversation with Sue
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b find,coarse,robert,nullobject ; find Sir Robert
 dc.b racetrackmessage,anger
 dc.w 15326 ; Fiona tried in vain to change Sir Robert's mind 
; over his will
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b find,coarse,robert,nullobject ; find Sir Robert
 dc.b racetrackmessage,anger
 dc.w 15327 ; Fiona snapped at Sir Robert for writing the will out 
; to William. Sir Robert ignored her and continued talking to Sue
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.w WRtGoto,FionaDisuadeRobert-list5
;
FionaKillsBill
 dc.w Occupation,16306 ; had given up trying to disuade Sir Robert
 dc.b go,0,72,nullobject ; go via corridor
 dc.b go,0,84,nullobject ; & landing
 dc.b go,0,91,nullobject ; to bedroom (apparently for cherub's head)
;
; Flag the start of the murder
 dc.w WRtMessage,rtmess2+3012 ; Fiona decided to give up trying 
; disuade Sir Robert
;
 dc.b find,0,william,nullobject ; find & kill william
;
; Messages 3030-39 are intercepted to confirm that the murder has 
; taken place. All npc's are then given a new 'post-murder' racetrack. 
;
 dc.w WRtMessage,rtmess+3032 ; A muffled thump came from an upstairs 
; bedroom
;
 dc.b racetrackreturn,0,nullobject,nullobject
;---
JarvisRt3
 dc.b find,roomonly,sam,nullobject ; find sam
 dc.w WRtConversation,CJarvisExplainsDiscusionM3-list4 ;***
 dc.b racetrackmessage,emphasis+portrait
 dc.w 15350 ; "Hello Sir," began Jarvis, "I believe Sir Robert's 
; having a discussion in the dining room"
 dc.b facenoun1,0,sam,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 15351 ; "I'm going for a read in the library while things 
; are quiet. Shout if you need me", added Jarvis
 dc.w WRtGosub,libraryRT1-list5
 dc.w WRtConversation,0
;
PMJarvisRt3
 dc.w WRtGoto,JarvisStandardLoopRt-list5 ; standard cleaning
;---
InspectorRt3
 dc.b racetrackreturn,0,nullobject,nullobject
;---
;
; After the murder...
;
;---
SueLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15380 ; was speechless upon hearing the news
 dc.w WRtConversation,CSueLearnsOfMurderM3-list4 ;***
;
; meet clifford on landing
 dc.b go,0,84,nullobject ; go landing
 dc.w WRtGoto,WaitForEverRt-list5 ; clifford & then fiona take over
;
; Sue & Fiona tell Gormley that Kathy killed William
SueTellsGormley
 dc.w WRtConversation,CSueBlamesKathyM3-list4 ;***
 dc.b conditional,0,inspector,nullobject
 dc.w WRtGoto,SueWaitsInspectorFree-list5 ; inspector already here
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15458 ; Come on then, Fiona. We'd better find the Inspector 
; and tell him
SueWaitsInspectorFree
 dc.w Occupation,16307 ; wanted a word with the inspector
 dc.b wait,0,nullobject,nullobject ; *** HANG UP? ***
 dc.b find,roomonly,inspector,nullobject
 dc.b conditional,0,Inspectorquestioning,nullobject ; inspector busy
 dc.w WRtGoto,SueWaitsInspectorFree-list5
 dc.b setnoun1busy,0,inspector,nullobject
 dc.b telegosub,inspector
 dc.w FaceSueRt-list5 ; make inspector face sue
 dc.b find,roomonly,inspector,nullobject
 dc.b actorsinglemessage,emphasis+portrait
 dc.w 15450 ; told the Inspector that Kathy killed William
 dc.b waitnoun1free,0,inspector,nullobject
 dc.b setnoun1busy,0,inspector,nullobject
 dc.b telegosub,inspector
 dc.w MoveMouthEmphasisRt-list5 ; make inspector face sue
 dc.b find,roomonly,inspector,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 15451 ; The inspector listened and made notes while Sue 
; gave evidence against Kathy
;
; Sue goes for drinks with Fiona
 dc.b telegoto,fiona
 dc.w FionaDrinksWithSue-list5
 dc.w WRtGosub,DrawingRt-list5 ; fiona supplies conversation messages
;
; Fiona tries to stop Sue going to the murder room
 dc.b telegoto,fiona
 dc.w WaitForEverRt-list5 ; stop fiona spooling messages
 dc.b find,coarse,fiona,nullobject ; walk over to Fiona
 dc.w WRtConversation,CSueWantsToGoMurderRoomM3-list4 ;***
 dc.w Occupation,16308 ; was about to go to the murder room, 
; against Fiona's wishes
 dc.b racetrackmessage,emphasis
 dc.w 15455 ; "I'm going to visit the murder room, Fiona", said Sue, 
; stubbornly
 dc.b telegosub,fiona
 dc.w MoveMouthAngerRT-list5
 dc.w Wwaitforperiod,10
 dc.w WRtMessage,15456 ; "I can't see the point in that", objected Fiona 
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; sue reaches out in protest
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15459 ; Well, I'm going no matter what you say
 dc.b telegoto,fiona
 dc.w FionaHidesCherub-list5
 dc.w Occupation,0
;
; Visit the murder room. Clifford gives a message for Fiona
 dc.b find,coarse,william,nullobject
 dc.w WRtConversation,CSueLearnsOfMurderM3-list4 ;***
 dc.b actorsaidsinglemessage,shock
 dc.w 15381 ; Oh, how positively gruesome
 dc.w WRtGosub,reach2TimesRt-list5 ; wave arms about
 dc.b setnoun1busy,0,clifford,nullobject
 dc.b telegosub,clifford+resume
 dc.w CliffordGivesMessageSue-list5 ; clifford gives sue a message
 dc.b facenoun1,0,clifford,nullobject
 dc.b waitnoun1free,0,clifford,nullobject
;
; Return to the drawing room, and relay Clifford's message 
; to Fiona
 dc.b go,0,79,nullobject ; go drawing room
 dc.b conditional,0,fiona,nullobject ; fiona here?
 dc.w WRtGoto,RelayMessageToFiona-list5
;
; Fiona takes control in the event that she arrives AFTER Sue
SueDrinksM3
 dc.w WRtGosub,DrawingRt-list5
 dc.w WRtGoto,SueDrinksM3-list5
;
; Sue takes control in the event that she arrives AFTER Fiona
RelayMessageToFiona
 dc.b find,0,fiona,nullobject ; walk over to fiona
 dc.w WRtConversation,CSueGivesFionaMessageM3-list4 ;***
 dc.w Occupation,16316 ; was giving Fiona a message from Clifford ; Sue
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15457 ; Oh, Fiona!", began Sue, "Clifford said that he 
; wanted a word with you. He's in the murder room"
 dc.b telegoto,fiona
 dc.w FionaFindsClifford-list5
;
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.w WRtGoto,SueStandardLoopRt-list5
;---
CliffordGivesMessageSue
 dc.w Occupation,16309 ; was giving Sue a message for Fiona
 dc.b find,coarse,sue,nullobject ; find sue
 dc.w WRtConversation,CCliffordGivesSueMessageM3-list4 ;***
 dc.b racetrackmessage,emphasis
 dc.w 15454 ; "Sue, would you go and tell Fiona that I want a 
; word? Thanks", grinned Clifford
 dc.b find,coarse,wardrobe,nullobject ; return to wardrobe (with anthony)
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
VeraLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CVeraLearnsOfMurderM3-list4 ;***
 dc.w WRtGoto,VeraStandardLoopRt-list5
;---
KathyDiscoversBody
 dc.b go,0,84,nullobject ; go landing
 dc.b RacetrackMessage,anger
 dc.w RtMess2+1570 ; "I do hope William's not sulking again," said 
; Kathy
;
; Kathy returns to her bedroom to find William dead
 dc.b find,coarse,william,nullobject ; find william
 dc.b racetrackmessage,Shock+portrait
 dc.w rtmess2+1571 ; Kathy's screamed at the sight of William's 
; dead body
 dc.b RevealMurder,0,nullobject,nullobject
 dc.b conditional,0,user,nullobject
 dc.w WRtGoto,KathySuspectsSam-list5 ; Sam here
;
; Find Sam and break the news to him
 dc.b find,roomonly,user,nullobject
 dc.b RevealMurder,0,nullobject,nullobject ; reveal murder to sam
 dc.b racetrackmessage,shock+portrait
 dc.w rtmess4+1573 ; "Oh Sam! Something terrible's happened", screamed 
; Kathy
 dc.w WRtConversation,CKathyRevealsToSam-list4 ; prepare conversation
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,shock
 dc.w rtmess4+1574 ; "Someone's killed William!", revealed
; Kathy
 dc.w Wwaitforperiod,30
;
; Kathy reveals the news to everyone
KathyRevealsMurder
 dc.b find,roomonly,sam,nullobject ; find sam
 dc.b racetrackmessage,shock
 dc.w 6575 ; Kathy shouted the bad news through the house, so that 
; everyone would hear
 dc.b RevealMurder,0,nullobject,254 ; reveal murder to all npcs (254)
;
; reveal the murder to everyone
 dc.b telegoto,jarvis
 dc.w JarvisLearnsOfMurder3-list5
 dc.b telegoto,anthony
 dc.w AnthonyLearnsOfMurder3-list5
 dc.b telegoto,Fiona
 dc.w FionaLearnsOfMurder3-list5
 dc.b telegoto,Clifford
 dc.w CliffordLearnsOfMurder3-list5
 dc.b telegoto,Robert
 dc.w RobertLearnsOfMurder3-list5
 dc.b telegoto,Sue
 dc.w SueLearnsOfMurder3-list5
 dc.b telegoto,vera
 dc.w veraLearnsOfMurder3-list5
;
; Kathy drinks beside the body
 dc.w WRtConversation,CKathyTurnsToDrinkM3-list4 ;***
 dc.w Occupation,16310 ; was going to drown her sorrows in Whisky ; Kathy
 dc.b take,0,kathyswhiskybottle,nullobject
KathyCriesOverBill
 dc.b find,0,table,nullobject ; go table
 dc.b animateCD,8
 dc.w SitDrinkAni ; pour from bottle
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,15360 ; Kathy drowned her sorrows over Bill's body
 dc.b animateCD,8
 dc.w SitDrinkAni ; pour from bottle
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,15361 ; "He's dead," sobbed Kathy as she took another
; mouthful of whisky
 dc.b animateCD,8
 dc.w SitDrinkAni ; pour from bottle
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,15362 ; Kathy drank her whisky in silence
 dc.b animateCD,8
 dc.w SitDrinkAni ; pour from bottle
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,15363 ; Kathy cried in her drunken state
 dc.w WRtConversation,CKathyDrunkM3-list4 ;***
 dc.w Occupation,16311 ; was getting progressively drunk
 dc.w WRtGoto,KathyCriesOverBill-list5
;---
KathySuspectsSam
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,Shock+portrait
 dc.w rtmess2+1576 ; "You have something to do with this, don't you, 
; Sam?!", shrieked Kathy
 dc.w WRtConversation,CKathySuspectsSam-list4 ; prepare conversation
;
; Find Sam and accuse him
 dc.b find,roomonly,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w rtmess4+1577 ; "I hope you can prove your innocence, Sam", snapped
; Kathy
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w rtmess+1578 ; "Because I'm off to tell the others", added 
; Kathy
 dc.w WRtGoto,KathyRevealsMurder-list5
;---
AnthonyLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CAnthonyLearnsOfMurderM3-list4 ;***
 dc.b actorsaidsinglemessage,shock
 dc.w 15382 ; Goodness me! I'd better take a look at the body
;
; rush to the body
 dc.b find,coarse,william,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15383 ; cringed at the sight of William's body
 dc.w WRtGosub,reach2TimesRt-list5 ; wave arms about
 dc.w WRtGoto,WaitForEverRt-list5 ; fiona takes control
;
AnthonyComfortsKathy
 dc.b find,0,kathy,nullobject
 dc.b actorsinglemessage,emphasis
 dc.w 15400 ; tried comforting Kathy
 dc.w WRtGosub,Reach2TimesRt-list5 ; wave arms about
 dc.b find,0,kathy,nullobject
 dc.b actorsinglemessage,emphasis
 dc.w 15401 ; quizzed Kathy about William's death
 dc.w WRtGosub,Reach2TimesRt-list5 ; wave arms about
 dc.b find,0,kathy,nullobject
 dc.b actorsinglemessage,emphasis
 dc.w 15402 ; told Kathy to pull herself together
 dc.w WRtGosub,Reach2TimesRt-list5 ; wave arms about
 dc.w WRtGoto,AnthonyComfortsKathy-list5 ; clifford takes over
;
AnthonyJoinsClifford
 dc.b find,coarse,wardrobe,nullobject ; stand at wardrobe with clifford
 dc.w WRtConversation,CAnthonyTalksAboutKtoCM3-list4 ;***
 dc.w Occupation,16312 ; was keeping an eye on Kathy whilst 
; talking to Clifford ; Anthony
 dc.w WRtGoto,WaitForEverRT-list5 ; clifford takes control
;
AnthonyOpensDoctorBag
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b waitforpersontoleave,0,clifford,nullobject
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtConversation,CAnthonyCantOpenBagM3-list4 ;***
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15430 ; I can't crack the combination on William's bag. Can 
; you help, Sam?
 dc.w Wwaitforperiod,210
 dc.w WRtGoto,AnthonyStandardLoopRt-list5
;
; special racetrack to be used when sam has opened the doctor's 
; bag
DoctorBagOpen
 dc.w WRtConversation,0
 dc.b actorsinglemessage,emphasis+portrait
 dc.w 15431 ; thanked Sam for opening the bag. "It's almost as if 
; you were an expert at picking locks!", he said thankfully
 dc.b find,coarse,william,nullobject
 dc.b drop,0,doctorbag,nullobject
 dc.b examine,0,doctorbag,nullobject
 dc.b examine,0,william,nullobject
 dc.w WRtGosub,Reach2TimesRt-list5
 dc.b actorsaidsinglemessage,emphasis+portrait
 dc.w 15432 ; Well, I'm no doctor, but I'm sure William died from 
; a blow to the back of the head
 dc.w WRtGoto,AnthonyStandardLoopRt-list5
;---
; William is dead
PMWilliamRt3
 dc.b racetrackreturn,0,nullobject,nullobject
;---
RobertLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CRobertLearnsOfMurderM3-list4 ;***
 dc.b racetrackmessage,anger
 dc.w 15370 ; "Where the hell's my gun!", roared Sir Robert 
; as he heard the bad news
 dc.b take,0,shotgun,nullobject
 dc.w Occupation,16312 ; was stalking the murderer
 dc.w WRtGoto,RobertStandardLoopRT-list5
;---
PMFionaRt3
; Fiona returns to her room, hiding the cherub's head in 
; the wardrobe
 dc.b go,quick,91,nullobject
 dc.b put,in,wardrobe,cherub ; put head in wardrobe
 dc.b CLOSE,0,wardrobe,nullobject ; close wardrobe
;
; Messages 3079-9 are used when the murder sequence is complete, and 
; the guilty party has returned to whatever he or she was doing 
; before the murder...
;
; (This message shouldn't really be seen in theory, but just in 
; case...)
;
 dc.w WRtMessage,rtmess+3072 ; Fiona coughed nervously
;
 dc.b telegoto,kathy
 dc.w KathyDiscoversBody-list5
;
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGoto,WaitForEverRt-list5 ; until fiona learns of murder
;
FionaLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CFionaLearnsOfMurderM3-list4 ;***
 dc.b actorsaidsinglemessage,shock
 dc.w 15384 ; Oh dear! That's dreadful news
;
; rush to the body
 dc.b find,coarse,william,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15385 ; looked at the body in silence
 dc.w WRtGosub,reach2TimesRt-list5 ; wave arms about
 dc.b find,0,bed,nullobject
;
; discuss death with anthony
 dc.b waitforperson,0,anthony,nullobject
 dc.b find,0,anthony,nullobject
 dc.w WRtConversation,CFionaSuspectsKathyM3-list4 ;***
 dc.w Occupation,16313 ; and Anthony speculated about Kathy's 
; involvement
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w FaceFionaRT-list5 ; make anthony face fiona
 dc.b actorsinglemessage,shock
 dc.w 15390 ; and Anthony discussed William's death
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w MoveMouthShockRT-list5 ; make anthony talk
 dc.b facenoun1,0,kathy,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15391 ; gave Kathy a suspicious glance
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b facenoun1,0,anthony,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15392 ; whispered to Anthony about Kathy
;
 dc.b telegoto,anthony
 dc.w AnthonyComfortsKathy-list5 ; anthony keeps an eye on kathy
;
; tell Clifford and Sue that Kathy killed William
 dc.w Occupation,0
 dc.b go,0,84,nullobject
 dc.b waitforperson,0,clifford,nullobject
 dc.b waitforperson,0,sue,nullobject
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtConversation,CFionaBlamesKathyM3-list4 ;***
 dc.w Occupation,16314 ; was telling Clifford and Sue that Kathy 
; Killed William ; Fiona
 dc.b find,0,clifford,nullobject
 dc.b actorsinglemessage,shock+portrait
 dc.w 15393 ; told Clifford and Sue that it was Kathy who killed 
; William
 dc.b telegoto,clifford
 dc.w CliffordJoinsAnthony-list5 ; clifford joins anthony beside body
;
 dc.b telegoto,sue
 dc.w SueTellsGormley-list5 ; sue & fiona find gormley & blame kathy
 dc.w Occupation,0
FionaFollowsSue
 dc.b find,roomonly,sue,nullobject
 dc.b wait,0,nullobject,nullobject ; *** HANG UP? ***
 dc.w WRtGoto,FionaFollowsSue-list5 ; follow sue until she takes control
;
FionaDrinksWithSue
 dc.b go,0,79,nullobject ; go drawing room
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b waitforperson,0,sue,nullobject
 dc.w WRtConversation,CFionaBlamesKathyM3-list4 ;***
 dc.w Occupation,16315 ; and Sue were discussing Kathy's guilt
FionaTalksWithSue
 dc.w WRtGosub,Wait100orSam-list5 ; time for sam to arrive
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15440 ; Well, that's sorted out. I just hope the Inspector 
; can prove it was Kathy
 dc.w WwaitForPeriod,20
 dc.b racetrackmessage,emphasis
 dc.w 15441 ; Sue nodded. "Kathy's as guilty as hell", she said, 
; "I doubt it will take much effort to prove it"
 dc.w WwaitForPeriod,20
 dc.b racetrackmessage,emphasis
 dc.w 15442 ; "I wouldn't overestimate the Inspector", dismissed 
; Fiona, "He's as thick as pig-doings"
 dc.w WwaitForPeriod,20
 dc.b racetrackmessage,emphasis
 dc.w 15443 ; Sue smiled at Fiona's wit
 dc.w WRTGoto,WaitForEverRT-list5 ; sue takes control
;
FionaHidesCherub
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b waitforpersontoleave,0,sue,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15394 ; All this confusion is giving me a headache. I'm going 
; to my room for a while
 dc.w WRtConversation,CFionaHidesChrubM3-list4 ;*** "stop following me"
 dc.b go,0,91,nullobject
 dc.b open,0,wardrobe,nullobject
 dc.b conditional,0,cherub,nullobject ; cherub here?
 dc.w WRtGosub,FionaHidesCherubOk-list5
 dc.w WRtConversation,0
;
; Return to the drawing room, and await Clifford's message, 
; relayed by Sue
 dc.b go,0,79,nullobject ; go drawing room
 dc.b conditional,0,sue,nullobject ; sue here?
 dc.b telegoto,sue
 dc.w RelayMessageToFiona-list5 ; if so, sue reveals message
;
; If Sue is not currently here, then do a loop, whereupon Sue 
; will automatically relay the message when she arrives
FionaDrinksM3
 dc.w WRtGosub,DrawingRt-list5
 dc.w WRtGoto,FionaDrinksM3-list5
;
; fiona joins clifford, who gives her the photo
FionaFindsClifford
 dc.b find,0,clifford,nullobject
 dc.b telegoto,clifford
 dc.w CliffordGivesFionaPhoto-list5 ; give photo to fiona & leave
 dc.b waitforpersontoleave,0,clifford,nullobject
;
; fiona takes a bath
 dc.b go,0,63,nullobject ; main bathroom
 dc.w Occupation,16317 ; was about to take a bath
 dc.b find,0,bathtub,nullobject
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,shock+portrait
 dc.w 15395 ; Fiona screamed as Sam entered the room
 dc.b facenoun1,0,sam,nullobject
 dc.w WRtMessage,4999 ; throw sam out
 dc.w Occupation,0
;
; fiona burns the photo
 dc.b go,0,81,nullobject ; go study
 dc.w WRtConversation,CFionaBurnsPhotoM3-list4 ;***
 dc.w Occupation,16318 ; appeared to be burning something
 dc.b conditional,0,photo,nullobject
 dc.b put,in,fireplace,photo ; burn photo
 dc.w Wwaitforperiod,50
 dc.w WRtConversation,0
 dc.w Occupation,0
;
 dc.w WRtGoto,FionaStandardLoopRT-list5
;---
FionaHidesCherubOk
 dc.b take,0,cherub,nullobject
 dc.b go,quick,75,nullobject ; go cellar
 dc.b drop,0,cherub,nullobject
 dc.b go,0,78,nullobject ; return to larder
 dc.b conditional,0,sam,nullobject ; sam already here
 dc.w WRtGoto,FionaHiddenCherub-list5
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtMessage,15396 ; Fiona had just returned from the cellar
FionaHiddenCherub
 dc.b racetrackreturn,0,nullobject,nullobject
;---
CliffordLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CCliffordLearnsOfMurderM3-list4 ;***
 dc.b actorsaidsinglemessage,shock
 dc.w 15386 ; Oh dear! I could feel something bad brewing up
 dc.w WRtGosub,reach2TimesRt-list5 ; wave arms about
;
; meet sue on landing
 dc.b go,0,84,nullobject ; go landing
 dc.b waitforperson,0,sue,nullobject
 dc.w Occupation,16319 ; was discussing the murder with Sue
CliffordMeetsSue
 dc.b find,0,sue,nullobject
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w FaceCliffordRT-list5 ; make sue face clifford
 dc.b racetrackmessage,shock
 dc.w 15410 ; Sue asked Clifford about William's death
 dc.b waitnoun1free,0,sue,nullobject
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w MoveMouthShockRT-list5 ; make sue talk
 dc.b facenoun1,0,sue,nullobject
 dc.b actorsinglemessage,shock
 dc.w 15411 ; and Sue talked in whispers
 dc.b facenoun1,0,sue,nullobject
 dc.b actorsaidsinglemessage,shock
 dc.w 15412 ; how can you be sure it was her?
 dc.b waitnoun1free,0,sue,nullobject
 dc.b setnoun1busy,0,sue,nullobject
 dc.b telegosub,sue
 dc.w MoveMouthAngerRT-list5 ; make sue talk
 dc.b racetrackmessage,shock
 dc.w 15413 ; Sue muttered something suspicious to Clifford
 dc.b waitnoun1free,0,sue,nullobject
 dc.w WRtGoto,CliffordMeetsSue-list5 ; fiona takes control
;
CliffordJoinsAnthony
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b find,0,anthony,nullobject ; find anthony
 dc.w WRtGosub,Wait200orSam-list5
 dc.b actorsinglemessage,emphasis
 dc.w 15420 ; wanted a quiet word with Anthony
 dc.b telegoto,anthony
 dc.w AnthonyJoinsClifford-list5
 dc.b find,coarse,wardrobe,nullobject ; stand at wardrobe with anthony
;
; Clifford and Anthony talk in whispers
 dc.w WRtConversation,CCliffordTalksAboutKtoAM3-list4 ;***
 dc.w Occupation,16320 ; and Anthony talked about the murder, while 
; keeping a close watch on Kathy
CliffJoinsAnthony1
 dc.b find,0,anthony,nullobject ; clifford faces Anthony
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w FaceCliffordRT-list5 ; make anthony face clifford
 dc.b actorsinglemessage,emphasis
 dc.w 15421 ; advised Anthony to keep an eye on Kathy
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w MoveMouthEmphasisRT-list5 ; make anthony talk
 dc.b facenoun1,0,anthony,nullobject ; clifford faces Anthony
 dc.b racetrackmessage,emphasis
 dc.w 15422 ; Clifford and Anthony talked in whispers
 dc.b facenoun1,0,kathy,nullobject ; face kathy
 dc.w WRtGosub,Reach1TimesRt-list5 ; point to kathy
 dc.b facenoun1,0,anthony,nullobject ; clifford faces Anthony
 dc.b racetrackmessage,emphasis
 dc.w 15423 ; descreetly muttered something about Kathy
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w FaceKathyRt-list5 ; make anthony face kathy
 dc.b racetrackmessage,emphasis
 dc.w 15424 ; Anthony gave Kathy a questioning glance
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w FaceCliffordRT-list5 ; make anthony face clifford again
 dc.b racetrackmessage,emphasis
 dc.w 15425 ; See, I told you so
 dc.b waitnoun1free,0,anthony,nullobject
 dc.b setnoun1busy,0,anthony,nullobject
 dc.b telegosub,anthony
 dc.w MoveMouthEmphasisRT-list5 ; make anthony talk
 dc.b facenoun1,0,anthony,nullobject ; clifford faces Anthony
 dc.b racetrackmessage,emphasis
 dc.w 15426 ; talked in whispers to Clifford
 dc.b waitnoun1free,0,anthony,nullobject
 dc.w WRtGoto,CliffJoinsAnthony1-list5 ; fiona takes control
;
CliffordGivesFionaPhoto
 dc.w WRtConversation,CCliffordGivesPhotoFM3-list4 ;***
 dc.w Occupation,16321 ; was about to pass somthing to Fiona
 dc.w WRtGosub,Wait200orSam-list5
 dc.b facenoun1,0,fiona,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15460 ; Ah, glad you got my message, darling
 dc.b conditional,0,photo,nullobject
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15461 ; burn it or something
 dc.w Wwaitforperiod,25
 dc.w Occupation,0
 dc.w WRtConversation,0
;
 dc.b telegoto,anthony
 dc.w AnthonyOpensDoctorBag-list5 ; anthony tries to open doctor's bag
;
 dc.w WRtGoto,CliffordStandardLoopRT-list5
;---
JarvisLearnsOfMurder3
 dc.b RevealMurder,0,nullobject,nullobject
 dc.w WRtConversation,CJarvisLearnsOfMurderFM3-list4 ;***
 dc.b racetrackmessage,Shock
 dc.w rtmess2+1581 ; "Oh, how ghastly!", remarked Jarvis. "I'd better 
; call the police"
;
 dc.w WRtGosub,JarvisGetpolice-list5 ; call police
;
 dc.w WRtGoto,JarvisStandardLoopRT-list5
;---
PMInspectorRt3
 dc.w WRtGosub,InspectorArrives-list5
;
; visit people who have no special PM racetracks
 dc.w WRtgosub,InspectorvisitSam-list5
 dc.w WRtGosub,InspectorVisitJarvis-list5
 dc.w WRtGosub,InspectorVisitVera-list5
;
 dc.w WRtGosub,InspectorStandardRT-list5 ; do standart RT once only
;
; visit people who have special PM racetracks
 dc.w WRtGosub,InspectorVisitRobert-list5
 dc.w WRtGosub,InspectorVisitFiona-list5
 dc.w WRtGosub,InspectorVisitClifford-list5
 dc.w WRtGosub,InspectorVisitAnthony-list5
 dc.w WRtGosub,InspectorVisitKathy-list5
 dc.w WRtGoto,InspectorEnd-list5 ; repeat standard RT
;
;-------------------------------------------------------------------------
; ARRIVALS OF Kathy+William, Anthony, Fiona/Clifford, Sue
;-------------------------------------------------------------------------
;
; Kathy arrives at the front door
KathyArrivesNoJarvis
 dc.w WRtGosub,KathyArrivesAtDoor-list5
 dc.b go,0,93,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
KathyArrivesRt
 dc.b go,0,45,nullobject ; go to archway
 dc.w WRtMessage,rtmess+3080 ; trigger 'personarriving'
 dc.w WRtGosub,KathyArrivesAtDoor-list5
;
; Kathy rings the bell and waits for the door to open
KathywaitsforJarvis
 dc.w Occupation,16100 ; and William were waiting for Jarvis 
; to answer the door * Kathy
 dc.b iplay,0,doorbell,nullobject ; ring doorbell
 dc.w WRtGosub,WaitAtFrontDoor-list5
 dc.w Occupation,0
;
; was door opened by Jarvis?
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,KathyfollowJarvis-list5 ; yes
;
; someone other than Jarvis has opened the door
 dc.b racetrackmessage,emphasis
 dc.w rtmess+20 ; "Thank's for letting us in," said Kathy. 
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b racetrackmessage,emphasis
 dc.w rtmess+20 ; "Thank's for letting us in," said Kathy. 
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,KathyfollowJarvis-list5 ; yes
 dc.b racetrackmessage,anger
 dc.w rtmess+21 ; "Jarvis?", shouted William, "Come and 
; help us with our luggage!"
 dc.b waitforperson,0,Jarvis,nullobject
;
; Jarvis has arrived, and Kathy follows as he leads the way to her room
KathyfollowJarvis
 dc.b ifollow,0,Jarvis,nullobject ; follow him
 dc.b Rconditional,0,93,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,KathyfollowJarvis-list5
;
KathyArrivesAtDoor
 dc.b go,0,45,nullobject ; go to archway
 dc.b waitforperson,0,William,nullobject
 dc.w WRtMessage,rtmess+0 ; "What a fine day this is for the reunion," 
; sighed William
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+north ; "It's a good while since I've seen your 
; folks", replied Kathy
 dc.b go,0,47,nullobject ; go to front of house
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+2 ; "I hope we're not too early," said Kathy
 dc.w Wwaitforperiod,10
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Actor has just arrived, and waits at front door for someone 
; to open it.
waitatfrontdoor
; message rtmess+10 is specially intercepted at an early stage, to 
; check if the door has been opened. If so, a racetrack return is 
; executed. Otherwise, the message is printed at random
 dc.w WRtActorVaryMessage,rtmess+10 ; sighed, "Come on, Jarvis."
; tapped lightly on the door.
; yawned and said, "I wish somebody would answer"
; shouted, "Hello? Is anyone home?"
; banged on the door.
 dc.w WRtGoto,waitatfrontdoor-list5
;---
; William follows Kathy until his room is reached
WilliamArrivesRt
 dc.b ifollow,0,Kathy,nullobject
 dc.b Rconditional,0,93,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,WilliamArrivesRt-list5
;---
JarvisGreetsKathyRt
; (kills any previous occupations, such as polishing bannister...)
 dc.w Occupation,16260 ; was answering the door * Jarvis
 dc.b racetrackmessage,emphasis
 dc.w rtmess+200 ; "Is that the doorbell I can hear?", muttered 
; Jarvis.
 dc.b find,0,Kathy,nullobject ; find Kathy
 dc.b racetrackmessage,emphasis
 dc.w rtmess+201 ; "Hello William", said Jarvis. "And good day 
; to you, m'lady. This way please."
 dc.w Occupation,16101 ; was escorting Kathy and William to 
; their room * Jarvis
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b iGODOOR,0,83,nullobject ; go next door
 dc.b waitforperson,0,Kathy,nullobject
 dc.w WRtMessage,rtmess+202 ; "I see you've been keeping the place tidy, 
; Jarvis," commented Kathy.
 dc.b go,0,83,nullobject ; go hall
 dc.b iGODOOR,0,84,nullobject ; go next door
 dc.b waitforperson,0,Kathy,nullobject
 dc.w WRtMessage,rtmess+203 ; Kathy chatted to Jarvis about the weather. 
; William tagged along, looking increasingly bored.
 dc.b go,0,84,nullobject ; go landing
 dc.b igodoor,0,93,nullobject ; go next door
 dc.b waitforperson,0,Kathy,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+204 ; "Same room as usual, m'lady," said Jarvis with 
; a gesture towards the door.
 dc.b go,0,93,nullobject ; go green bedroom
 dc.b waitforperson,0,William,nullobject
 dc.b find,0,William,nullobject
 dc.w WRtMessage,rtmess+205 ; "Many thanks, Jarvis", said William.
 dc.w WWaitforperiod,30
 dc.b racetrackmessage,emphasis
 dc.w rtmess+250 ; "Much appreciated," replied Jarvis. "Dinner 
; will be served at six. Until then, feel free to wander around"
 dc.w Occupation,0
 dc.w WRtGoto,JarvisInterruptible1-list5
;---
; Anthony arrives at the front door
AnthonyArrivesNoJarvis
 dc.w WRtGosub,AnthonyArrivesAtDoor-list5
 dc.b go,0,97,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
AnthonyArrivesRt
 dc.b go,0,45,nullobject ; go to archway
 dc.w WRtMessage,rtmess+3080 ; trigger 'personarriving'
 dc.w WRtGosub,AnthonyArrivesAtDoor-list5
;
; Anthony rings the bell and waits for Jarvis
AnthonywaitsforJarvis
 dc.b iplay,0,doorbell,nullobject ; ring doorbell
 dc.w Occupation,16102 ; was waiting for Jarvis to answer the door * Anthony
 dc.w WRtGosub,WaitAtFrontDoor-list5
 dc.w Occupation,0
;
; was door opened by Jarvis?
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,AnthonyfollowJarvis-list5 ; yes
;
; someone other than Jarvis has opened the door
 dc.b racetrackmessage,emphasis
 dc.w rtmess+50 ; "Thank's for letting me in," said Anthony. 
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b racetrackmessage,emphasis
 dc.w rtmess+50 ; "Thank's for letting me in," said Anthony. 
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,AnthonyfollowJarvis-list5 ; yes
 dc.b racetrackmessage,anger
 dc.w rtmess+51 ; "Jarvis?", shouted Anthony, "Where are 
; you?"
 dc.b waitforperson,0,Jarvis,nullobject
;
; Jarvis has arrived, and Anthony follows as he leads the way to his room
AnthonyfollowJarvis
 dc.b ifollow,0,Jarvis,nullobject ; follow him
 dc.b Rconditional,0,97,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,AnthonyfollowJarvis-list5
;
AnthonyArrivesAtDoor
 dc.b go,0,45,nullobject ; go to archway
 dc.w Wwaitforperiod,5
 dc.w WRtMessage,rtmess+40 ; Anthony whistled merrily to himself
 dc.b go,0,47,nullobject ; go to front of house
 dc.w WRtMessage,rtmess+41 ; Anthony hummed a little tune
 dc.b racetrackreturn,0,nullobject,nullobject
;---
JarvisGreetsAnthonyRt
 dc.w Occupation,16260 ; was answering the door * Jarvis
 dc.b racetrackmessage,emphasis
 dc.w rtmess+210 ; "Ah," began Jarvis. "There goes the 
; doorbell."
 dc.b find,0,Anthony,nullobject ; find Anthony
 dc.b racetrackmessage,emphasis
 dc.w rtmess+211 ; "Good day to you, Anthony", said Jarvis. 
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+212 ; "Yes," replied Anthony, "A fine day 
; indeed."
 dc.w Occupation,16103 ; was escorting Anthony to his room * Jarvis
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b iGODOOR,0,83,nullobject ; go next door
 dc.b waitforperson,0,Anthony,nullobject
 dc.w WRtMessage,rtmess+213 ; Anthony wiped his feet on the doormat.
 dc.b go,0,83,nullobject ; go hall
 dc.b iGODOOR,0,84,nullobject ; go next door
 dc.b waitforperson,0,Anthony,nullobject
 dc.w WRtMessage,rtmess+214 ; "Mmm," said Anthony as he sniffed the 
; air. "I wonder what's cooking?"
 dc.b go,0,84,nullobject ; go landing
 dc.b igodoor,0,97,nullobject ; go next door
 dc.b waitforperson,0,Anthony,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+215 ; "I hope your room's to your satisfaction," 
; said Jarvis as he reached to open the door
 dc.b go,0,97,nullobject
 dc.b waitforperson,0,Anthony,nullobject
 dc.b find,0,Anthony,nullobject
 dc.w WRtMessage,rtmess+216 ; "Just right," said Anthony, "I see you've 
; kept it tidy as usual, Jarvis"
 dc.w WWaitforperiod,30
 dc.b racetrackmessage,emphasis
 dc.w rtmess+251 ; "Thank you, Sir," replied Jarvis. "Dinner's 
; at six. Feel free to do as you please until then"
 dc.w Occupation,0
 dc.w WRtGoto,JarvisInterruptible2-list5
;---
; Clifford arrives at the front door
CliffordArrivesNoJarvis
 dc.w WRtGosub,CliffordArrivesAtDoor-list5
 dc.b go,0,91,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
CliffordArrivesRt
 dc.b go,0,45,nullobject ; go to archway
 dc.w WRtMessage,rtmess+3080 ; trigger 'personarriving'
 dc.w WRtGosub,CliffordArrivesAtDoor-list5
;
; Clifford rings the bell and waits for Jarvis
CliffordwaitsforJarvis
 dc.b iplay,0,doorbell,nullobject ; ring doorbell
 dc.w Occupation,16104 ; and Fiona were waiting for Jarvis 
; to answer the door * Clifford
 dc.w WRtGosub,WaitAtFrontDoor-list5
 dc.w Occupation,0
;
; was door opened by Jarvis?
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,CliffordfollowJarvis-list5 ; yes
;
; someone other than Jarvis has opened the door
 dc.b racetrackmessage,emphasis
 dc.w rtmess+90 ; "Thank's for letting us in," said Clifford. 
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b racetrackmessage,emphasis
 dc.w rtmess+90 ; "Thank's for letting us in," said Clifford. 
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,CliffordfollowJarvis-list5 ; yes
 dc.b racetrackmessage,anger
 dc.w rtmess+91 ; "Where's Jarvis got to?", mumbled Clifford.
 dc.b waitforperson,0,Jarvis,nullobject
;
; Jarvis has arrived, and Clifford follows as he leads the way to his room
CliffordfollowJarvis
 dc.b ifollow,0,Jarvis,nullobject ; follow him
 dc.b Rconditional,0,91,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,CliffordfollowJarvis-list5
;
CliffordArrivesAtDoor
 dc.b go,0,45,nullobject ; go to archway
 dc.b waitforperson,0,Fiona,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+80 ; "Why the frown?", Clifford asked Fiona.
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+81 ; "Oh," sighed Fiona, "I'm just a bit worried 
; about the way my father's letting the business drift."
 dc.b go,0,47,nullobject ; go to front of house
 dc.b waitforperson,0,Fiona,nullobject
 dc.w WRtMessage,rtmess+82 ; Clifford gave Fiona a friendly peck 
; on the cheek.
 dc.b animate,3
 dc.w KissAnimation+south ; kiss south
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Fiona follows Clifford until her room is reached
FionaArrivesRt
 dc.b ifollow,0,Clifford,nullobject
 dc.b Rconditional,0,91,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,FionaArrivesRt-list5
;---
JarvisGreetsCliffordRt
 dc.w Occupation,16260 ; was answering the door * Jarvis
 dc.w IntrusionOn,IntrusionJarvisRoom-list5 ; turned off when all guests have arrived
 dc.b racetrackmessage,emphasis
 dc.w rtmess+220 ; "I'd better answer that," sighed Jarvis 
; as the doorbell rang.
 dc.b find,0,Clifford,nullobject ; find Clifford
 dc.b racetrackmessage,emphasis
 dc.w rtmess+221 ; "Well, if it isn't Fiona and Clifford," 
; enthused Jarvis.
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+222 ; "I trust you've both been keeping well," 
; continued Jarvis as he took the couple's luggage.
 dc.w Occupation,16105 ; was escorting Clifford and Fiona to their 
; room * Jarvis
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b iGODOOR,0,83,nullobject ; go next door
 dc.b waitforperson,0,Clifford,nullobject
 dc.w WRtMessage,rtmess+223 ; Clifford droned on and on about his 
; journey to the Grange.
 dc.b go,0,83,nullobject ; go hall
 dc.b iGODOOR,0,84,nullobject ; go next door
 dc.b waitforperson,0,Clifford,nullobject
 dc.w WRtMessage,rtmess+224 ; "...they should make the roads wider," 
; added Clifford in a stern tone.
 dc.b go,0,84,nullobject ; go landing
 dc.b igodoor,0,91,nullobject ; go next door
 dc.b waitforperson,0,Clifford,nullobject
 dc.w WRtMessage,rtmess+225 ; Clifford continues his monotonous 
; protest about the British highways. Jarvis got increasingly bored. 
; a gesture towards the door.
 dc.b go,0,91,nullobject
 dc.b waitforperson,0,Fiona,nullobject
 dc.b find,0,Clifford,nullobject
 dc.w WRtMessage,rtmess+226 ; Clifford fumbled in his wallet to find a tip.
 dc.w WWaitforperiod,15
 dc.b animate,3
 dc.w reachleftanimation+west ; reach west
 dc.w WWaitforperiod,15
 dc.b racetrackmessage,emphasis
 dc.w rtmess+252 ; "Many thanks," said Jarvis as he 
; took Clifford's tip. "Have a pleasant day."
 dc.w Occupation,0
 dc.w WRtGoto,JarvisInterruptible3-list5
;---
; Sue arrives at the front door
SueArrivesNoJarvis
 dc.w WRtGosub,SueArrivesAtDoor-list5
 dc.b go,0,92,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
SueArrivesRt
 dc.b go,0,45,nullobject ; go to archway
 dc.w WRtMessage,rtmess+3080 ; trigger 'personarriving'
 dc.w WRtGosub,SueArrivesAtDoor-list5
;
; Sue rings the bell and waits for Jarvis
SuewaitsforJarvis
 dc.b iplay,0,doorbell,nullobject ; ring doorbell
 dc.w Occupation,16106 ; was waiting for Jarvis to answer the 
; door * Sue
 dc.w WRtGosub,WaitAtFrontDoor-list5
 dc.w Occupation,0
;
; was door opened by Jarvis?
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,SuefollowJarvis-list5 ; yes
;
; someone other than Jarvis has opened the door
 dc.b racetrackmessage,emphasis
 dc.w rtmess+130 ; "Thank you," said Sue, "I'm always forgetting 
; my keys, you know"
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b racetrackmessage,emphasis
 dc.w rtmess+130
 dc.b conditional,0,Jarvis,nullobject ; Jarvis here?
 dc.w WRtGoto,SuefollowJarvis-list5 ; yes
 dc.b racetrackmessage,emphasis
 dc.w rtmess+131 ; "Now where's Jarvis goto to?", said Sue
 dc.b waitforperson,0,Jarvis,nullobject
;
; Jarvis has arrived, and Sue follows as he leads the way to her room
SuefollowJarvis
 dc.b ifollow,0,Jarvis,nullobject ; follow him
 dc.b Rconditional,0,92,nullobject ; reached our room yet?
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b wait,0,nullobject,nullobject ; prevents hang-up (wait 1 turn)
 dc.w WRtGoto,SuefollowJarvis-list5
;
SueArrivesAtDoor
 dc.b go,0,45,nullobject ; go to archway
 dc.w Wwaitforperiod,5
 dc.b racetrackmessage,emphasis
 dc.w rtmess+120 ; "Hello, Sam", said Sue. "Isn't it a lovelly 
; day?"
 dc.b go,0,47,nullobject ; go to front of house
 dc.b racetrackmessage,emphasis
 dc.w rtmess+121 ; "Meeting the family will be an experience," 
; concluded Sue
 dc.b racetrackreturn,0,nullobject,nullobject
;---
JarvisGreetsSueRt
 dc.w Occupation,16260 ; was answering the door * Jarvis
 dc.b racetrackmessage,emphasis
 dc.w rtmess+230 ; "That must be Sue" said Jarvis
 dc.b find,0,Sue,nullobject ; find Anthony
 dc.b racetrackmessage,emphasis
 dc.w rtmess+231 ; "Hello, Sue", said Jarvis. "Let me help 
; you with your things"
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+232 ; "Many thanks, Jarvis," replied Sue
 dc.w Occupation,16107 ; was escorting Sue to her room * Jarvis
 dc.b go,0,86,nullobject ; go entrance hall
 dc.b iGODOOR,0,83,nullobject ; go next door
 dc.b waitforperson,0,Sue,nullobject
 dc.w WRtMessage,rtmess+233 ; "And how's your Vera today?", asked Sue
 dc.w Wwaitforperiod,10
 dc.b racetrackmessage,emphasis
 dc.w rtmess+234 ; "Oh, much the same as usual," sighed Jarvis, 
; "Still not speaking to me..."
 dc.b go,0,83,nullobject ; go hall
 dc.b iGODOOR,0,84,nullobject ; go next door
 dc.b waitforperson,0,Sue,nullobject
 dc.w WRtMessage,rtmess+235 ; "Well, at least Vara's cooking smells up to 
; scratch," said Sue, sniffing the air
 dc.b go,0,84,nullobject ; go landing
 dc.b igodoor,0,92,nullobject ; go next door
 dc.b waitforperson,0,Sue,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+236 ; "Your room's as you left it last night, Sue" 
; said Jarvis.
 dc.w Wwaitforperiod,20 ;;
 dc.b racetrackmessage,emphasis
 dc.w rtmess+237 ; "The bed didn't appear to need making", added 
; Jarvis quietly
 dc.b go,0,92,nullobject
 dc.b waitforperson,0,Sue,nullobject
 dc.b find,0,Sue,nullobject
 dc.w Wwaitforperiod,10 ;;20
 dc.w WRtMessage,rtmess+238 ; "Thank you Jarvis," said Sue. "I'll call if 
; I need you"
 dc.w WWaitforperiod,30
 dc.b racetrackmessage,emphasis
 dc.w rtmess+253 ; "Very well ma'am," said Jarvis
 dc.w Occupation,0
 dc.w WRtGoto,JarvisInterruptible-list5
;---
; General Rt for Jarvis answering door to somebody other than a new 
; arrival.
JarvisAnswerDoor
 dc.b go,0,47,nullobject
 dc.b animate,1
 dc.w standinganimation+south ; stand south
 dc.b racetrackmessage,emphasis
 dc.w rtmess+240 ; "You rang sir?", said Jarvis.
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+241 ; Jarvis shrugged his shoulders.
 dc.w WRtGoto,JarvisInterruptible-list5
;
;-------------------------------------------------------------------------
; Jarvis INTITIAL RACETRACK - USED WHILE GUESTS ARRIVE
;-------------------------------------------------------------------------
;
JarvisInitial
 dc.b go,0,83,nullobject ; go hall (user should be here)
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w rtmess+261 ; "If you'll excuse me," said Jarvis, "I've 
; got plenty of work to do."
;
; Jarvis returns at some point in this loop when he's answered the door 
; and/or finished showing someone to their room...
JarvisInterruptible
 dc.w WRtGosub,JarvisLanding-list5
JarvisInterruptible1
 dc.w WRtGosub,JarvisLibrary-list5
JarvisInterruptible2
 dc.b go,0,88,nullobject ; go games room
 dc.w WWaitforperiod,40
JarvisInterruptible3
 dc.b go,0,77,nullobject ; go dining room
 dc.w WWaitforperiod,20
 dc.w WRtMessage,rtmess+264 ; Jarvis polished the table.
 dc.w WrtGosub,polishDiningRoomTableRT-list5
 dc.w WRtGoto,JarvisInterruptible-list5
;
JarvisLanding
 dc.b go,0,84,nullobject ; go landing
 dc.w Occupation,16108 ; was dusting the bannister * Jarvis
 dc.w WWaitforperiod,20
 dc.w WRtMessage,rtmess+262 ; Jarvis polished the bannister.
 dc.w WRtGosub,polishLandingBannister-list5 
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
JarvisLibrary
 dc.b go,0,88,nullobject ; go library
 dc.w Occupation,16109 ; was cleaning the bookshelves * Jarvis
 dc.w WWaitforperiod,20
 dc.w WRtMessage,rtmess+263 ; Jarvis dusted the bookshelves.
 dc.w WRtGosub,dustLibraryBookshelves-list5 
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; Jarvis PREPARES DINNER TABLE UNTIL ALL GUESTS ARRIVE
;-------------------------------------------------------------------------
;
JarvisPrepareTable
 dc.w WRtGosub,JarvisSetsTableRT-list5 ; are all guests here for dinner?
;
; Only really used for first murder, to make sure Jarvis is in 
; the dining room at the time Sue is killed
 dc.b conditional,0,readyformurder,nullobject
 dc.w WRtGoto,SkipLibraryPrep-list5
 dc.w WRtGosub,JarvisLibrary-list5
;
SkipLibraryPrep
 dc.b go,0,77,nullobject ; go dining room
 dc.b localmove,0,14,9 ; walk to front left of table
 dc.w WActorSingleMessage,rtmess+270 ; prepared the table for dinner
 dc.w WRTGosub,prepareDiningRoomTable-list5 
;
; Only really used for first murder, to make sure Jarvis is in 
; the dining room at the time Sue is killed
 dc.b conditional,0,readyformurder,nullobject
 dc.w WRtGoto,SkipLandingPrep-list5
 dc.w WRtGosub,JarvisLanding-list5
SkipLandingPrep
;
 dc.w WRtGoto,JarvisPrepareTable-list5
;
JarvisSetsTableRT ; Used in several murders... 
 dc.b go,0,77,nullobject ; go dining room
 dc.w WActorSingleMessage,rtmess+270 ; prepared the table for dinner
 dc.w WRtGoto,prepareDiningRoomTable-list5 
;
;-------------------------------------------------------------------------
; VARIOUS GUESTS EATING DINNER
;-------------------------------------------------------------------------
;
RobertEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,50 ; allow Jarvis to serve dinner
 dc.w Occupation,16112 ; was eating his dinner * Male NPC
 dc.b animate,10
 dc.w eating
 dc.w WRtActorVaryMessage,rtmess+1680
; "Ate quietly"
; "Chewed loudly"
; "Wiped his mouth with a napkin"
; said, "Delicious"
; said, "Vera can certainly cook!"
 dc.w Wwaitforperiod,140-10
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
WilliamEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,70 ; allow Jarvis to serve dinner
 dc.w Occupation,16112 ; was eating his dinner * Male NPC
 dc.b animate,10
 dc.w eating
 dc.w Wwaitforperiod,120-10
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
AnthonyEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,90 ; allow Jarvis to serve dinner
 dc.w Occupation,16112 ; was eating his dinner * Male NPC
 dc.w WRtActorVaryMessage,rtmess+1680
 dc.w Wwaitforperiod,100
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
KathyEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,110 ; allow Jarvis to serve dinner
 dc.w Occupation,16113 ; was eating her dinner * Female NPC
 dc.b animate,10
 dc.w eating
 dc.w WRtActorVaryMessage,rtmess+1680
 dc.w Wwaitforperiod,80-10
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
FionaEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,130 ; allow Jarvis to serve dinner
 dc.w Occupation,16113 ; was eating her dinner * Female NPC
 dc.w WRtActorVaryMessage,rtmess+1680
 dc.w Wwaitforperiod,60
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
CliffordEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,150 ; allow Jarvis to serve dinner
 dc.w Occupation,16112 ; was eating his dinner * Male NPC
; dc.w WRtActorVaryMessage,rtmess+1680
 dc.w Wwaitforperiod,40
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
SueEatsDinner
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Wwaitforperiod,170 ; allow Jarvis to serve dinner
 dc.w Occupation,16113 ; was eating her dinner * Female NPC
 dc.w WRtActorVaryMessage,rtmess+1680
 dc.w Wwaitforperiod,20
 dc.w WRtConversation,0
 dc.b RacetrackMessage,shock+portrait
 dc.b racetrackreturn,0,nullobject,nullobject
;---
;
;-------------------------------------------------------------------------
; VARIOUS GUESTS GO TO DINNER & CHAT UNTIL ALL OTHER GUESTS HAVE ARRIVED
;-------------------------------------------------------------------------
;
RobertPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.w WRtGosub,SitDiningRoomN1-list5
RPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1310
; said, "It's nice to see the family again"
; said, "Is everyone ready for dinner?"
; chatted about business
; toyed with his knife and fork
; shouted, "Come on Vera, I'm starving"
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
WilliamPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.w WRtGosub,SitDiningRoomN3-list5
WPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1320
; said, "I'm ready for dinner"
; sniffed the air. "Dinner smells good," he said
; licked his lips hungrily
; talked about his practice at the surgery
; commented on the placemats
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
KathyPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.w WRtGosub,SitDiningRoomN2-list5
KPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1330
; said, "I'm famished"
; flirted with everyone at the table
; talked about the flowers in the garden
; straightened her place mat
; adjusted her napkin
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
AnthonyPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.b go,0,83,nullobject ; go via hall (enter through N door!)
 dc.w WRtGosub,SitDiningRoomS1-list5
APDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1340
; grinned as his stomach rumbled
; talked about his sports car
; rubbed his stomach
; commented on the garden
; said, "I wonder what's for dinner,"
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
FionaPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.b go,0,83,nullobject ; go via hall (enter through N door!)
 dc.w WRtGosub,SitDiningRoomS3-list5
FPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1350
; talked about her horses
; said, "Something smells good"
; talked about the family business
; chatted about horse riding
; straightened her knife and fork
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
CliffordPreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.b go,0,83,nullobject ; go via hall (enter through N door!)
 dc.w WRtGosub,SitDiningRoomS2-list5
CPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1360 ; Clifford idle chat
; said, "I could eat a horse,"
; attempted a few jokes
; cracked a joke and laughed loudly
; droned on about his journey to the Grange
; looked towards the kitchen
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;---
SuePreDinner
 dc.w WRtActorVaryMessage,rtmess+1300
; said, "Smells like dinner's ready"
; said, "I wonder if dinner's ready"
; said, "I think it's time for dinner"
; said, "Dinner should be ready by now"
; said, "I'm starving"
 dc.b go,0,83,nullobject ; go via hall (enter through N door!)
 dc.w WRtGosub,SitDiningRoomE-list5
 dc.b go,0,77,nullobject ; go to dining room
 dc.b iSIT,0,EWchair,nullobject
SPDLoop
 dc.w Occupation,16114 ; was waiting for dinner * Any NPC
 dc.b conditional,251,random,15
 dc.w WRtActorVaryMessage,rtmess+1370
; smiled politely
; said, "I'm so hungry"
; smiled at the guests
; waited quietly
; edged her chair in a little
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Sit routines used for each npc in the dining room
SitDiningRoomN1
 dc.b go,0,77,nullobject ; go to dining room
 dc.b localmove,0,7,7 ; rear left chair
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w SitAnimation+south ; sit south
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomN3
 dc.b go,0,77,nullobject ; go to dining room
 dc.b iSIT,0,Schair,nullobject ; rear right chair
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomN2
 dc.b go,0,77,nullobject ; go to dining room
 dc.b localmove,0,9,7 ; rear middle chair
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w SitAnimation+south ; sit south
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomS1
 dc.b go,0,77,nullobject ; go to dining room
 dc.b localmove,0,7,9 ; walk to table
 dc.b animate,3
 dc.w CrouchAndSit+north
 dc.b animate,3
 dc.w SitAnimation+north ; sit north
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomS3
 dc.b go,0,77,nullobject ; go to dining room
 dc.b localmove,0,11,9 ; walk to table
 dc.b animate,3
 dc.w CrouchAndSit+north
 dc.b animate,3
 dc.w SitAnimation+north ; sit north
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomS2
 dc.b go,0,77,nullobject ; go to dining room
 dc.b localmove,0,9,9 ; walk to table
 dc.b animate,3
 dc.w CrouchAndSit+north
 dc.b animate,3
 dc.w SitAnimation+north ; sit north
 dc.b racetrackreturn,0,nullobject,nullobject
;
SitDiningRoomE
 dc.b go,0,77,nullobject ; go to dining room
 dc.b iSIT,0,EWchair,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; Kathy+William, Anthony, Fiona/Clifford, Sue UNPACK IN THEIR ROOMS
;-------------------------------------------------------------------------
;
Kathyunpacks
 dc.w Occupation,16120 ; and William were unpacking * Kathy
 dc.w IntrusionOn,IntrusionKathyRoom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b waitforperson,0,William,nullobject ; wait for William
 dc.b find,0,William,nullobject ; make sure William reaches us locally 
; so that he stops following
 dc.b find,0,bed,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,6,8 ; go bed
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w SitAnimation+south ; sit south
 dc.b waitforpersontoleave,0,William,nullobject ; wait until William's gone
 dc.w Occupation,16121 ; was putting her make-up on * Kathy
 dc.w WWaitforperiod,20
 dc.w WRtMessage,rtmess+300 ; "I thought he'd never leave," said Kathy 
; with a smile.
 dc.b find,coarse,table,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,10 ;>>mike 8/9/89. 9 ; go to dresser
 dc.b animate,3
 dc.w reachleftAnimation+south ; reach south
 dc.w WRtMessage,rtmess+301 ; Kathy put on some make-up
 dc.w WWaitforperiod,20
 dc.b find,coarse,table,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,10 ;>>mike 8/9/89. 9 ; go to dresser
 dc.b animate,3
 dc.w reachrightAnimation+south ; reach south
 dc.w WRtMessage,rtmess+302 ; Kathy blew a kiss to the mirror
 dc.b find,coarse,table,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,10 ;>>mike 8/9/89. 9 ; go to dresser
 dc.b animate,3
 dc.w KissAnimation+south ; kiss south
 dc.w IntrusionOff,0
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
Williamunpacks
 dc.w IntrusionOn,IntrusionWilliamroom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b find,coarse,table,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,6,6 ; go bed
 dc.w WRtMessage,rtmess+310 ; William began to unpack
 dc.b animate,3
 dc.w reachleftAnimation+south ; reach south
 dc.b open,0,wardrobe,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,12,5 ; go wardrobe
 dc.w WRtMessage,rtmess+311 ; William sorted through his wardrobe
 dc.b animate,3
 dc.w reachleftAnimation+north ; reach north
 dc.b find,0,Kathy,nullobject ; return to Kathy
 dc.b racetrackmessage,emphasis
 dc.w rtmess+312 ; William kissed Kathy
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+313 ; "I'm going to have a wander around,"
; William announced
 dc.w WWaitforperiod,30
 dc.w WRtMessage,rtmess+314 ; "Oh, I think I'll just relax for a while," 
; replied Kathy
 dc.w IntrusionOff,0
 dc.b go,0,84,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;---
Anthonyunpacks
 dc.w Occupation,16122 ; was unpacking * Any NPC
 dc.w IntrusionOn,IntrusionAnthonyRoom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b find,coarse,bed,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,13,8 ; go bed
 dc.w WRtMessage,rtmess+320 ; Anthony began to unpack
 dc.b animate,3
 dc.w reachleftAnimation+south ; reach south
 dc.w Wwaitforperiod,20
 dc.b open,0,wardrobe,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,12,5 ; go wardrobe
 dc.w WRtMessage,rtmess+321 ; Anthony rummidged through his wardrobe
 dc.b find,0,wardrobe,nullobject
 dc.b animate,3
 dc.w reachrightAnimation+north ; reach north
 dc.b find,0,wardrobe,nullobject
 dc.b animate,3
 dc.w reachleftAnimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+322 ; "Right," said Anthony, "I'm going for a 
; browse around"
 dc.w IntrusionOff,0
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
Fionaunpacks
 dc.w Occupation,16123 ; and Clifford were unpacking * Fiona
 dc.w IntrusionOn,IntrusionFionaRoom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b open,0,wardrobe,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,12,6 ; go wardrobe
 dc.w WRtMessage,rtmess+330 ; Fiona dumped her belongings in the wardrobe 
; while Clifford sat sighing.
 dc.b animate,3
 dc.w reachleftAnimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+331 ; "I'm off for a chat with daddy," said Fiona
 dc.w IntrusionOff,0
 dc.w Occupation,0
 dc.b go,0,71,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;---
Cliffordunpacks
 dc.w IntrusionOn,IntrusionCliffordRoom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b waitforperson,0,Fiona,nullobject ; wait for Fiona
 dc.b find,0,Fiona,nullobject ; make sure Fiona reaches us locally 
; so that she stops following
 dc.b find,0,bed,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,8 ; go bed
 dc.b animate,3
 dc.w CrouchAndSit+north
 dc.b animate,3
 dc.w SitAnimation+north ; sit north
 dc.b waitforpersontoleave,0,Fiona,nullobject ; wait until Fiona's gone
 dc.w WWaitforperiod,20
 dc.b racetrackmessage,emphasis
 dc.w rtmess+340 ; "I suppose I'd better unpack," said Clifford
; dc.b animate,3
; dc.w StandupAnimation+north ; stand up north
 dc.b open,0,wardrobe,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,11,6 ; go wardrobe
 dc.w WRtMessage,rtmess+341 ; Clifford hung his clothes in the wardrobe
 dc.b animate,14
 dc.w reachdownAnimation+north ; reach north
 dc.b animate,3
 dc.w reachleftAnimation+north ; reach north
 dc.b animate,14
 dc.w reachdownAnimation+north ; reach north
 dc.b animate,3
 dc.w reachrightAnimation+north ; reach north
 dc.b racetrackmessage,emphasis
 dc.w rtmess+342 ; "That should do," said Clifford
 dc.w IntrusionOff,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
Sueunpacks
 dc.w Occupation,16122 ; was unpacking * Any NPC
 dc.w IntrusionOn,IntrusionSueRoom-list5
 dc.b waitforpersontoleave,0,Jarvis,nullobject ; Jarvis gone?
 dc.b find,0,bed,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,9 ; go bed
 dc.w WRtMessage,rtmess+350 ; Sue sat uneasily on the bed
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w SitAnimation+south ; sit south
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+351 ; "I hope everything goes well today," she
; sighed
 dc.w Wwaitforperiod,50
 dc.w WRtMessage,rtmess+352 ; "I think I'll go and see how things are
; getting on," said Sue
 dc.w IntrusionOff,0
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; Robert STAYS IN STUDY AND AWAITS VISITS FROM HIS FAMILY
;-------------------------------------------------------------------------
;
; while no guests are present, Robert will talk to user etc.
Robertinstudy1
 dc.b go,0,94,nullobject ; go bedroom
 dc.w Occupation,16124 ; was busily working * Sir Robert
 dc.w Wwaitforperiod,20
 dc.b iSIT,0,Nsofa,nullobject ; walk to sofa
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+360 ; shuffled through some papers
 dc.b animate,3
 dc.w readnewspaper+north ; read north
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+361 ; studied some paperwork
 dc.b animate,3
 dc.w readnewspaper+north ; read n
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WRtConversation,CRobertM2-list4 ; same as 2nd meeting conv.
 dc.b racetrackmessage,emphasis
 dc.w rtmess+362 ; "Well, Sam," said Robert, "How's 
; your work doing?"
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b racetrackmessage,anger
 dc.w rtmess+363 ; "Why not meet some of my family?",
; said Robert
 dc.w Wwaitforperiod,30
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+364 ; "I'm sure they'd be pleased to chat 
; with you", added Sir Robert
 dc.w Wwaitforperiod,30
 dc.w WRtConversation,0
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
Robertinstudy2
 dc.w Occupation,16125 ; was casually browsing around his room * Sir Robert
 dc.b find,coarse,window,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,15,7 ; walk to window
 dc.b animate,3
 dc.w ReachRightAnimation+east ; reach/face east
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+365 ; gazed out of the window
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b racetrackmessage,anger
 dc.w rtmess+366 ; "When is Jarvis going to mow 
; the lawns?", sighed Sir Robert
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b facenoun1,0,user,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+367 ; "Everything okay with the security 
; systems, Sam?", asked Sir Robert
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+368 ; "Why don't you check out the 
; grounds, Sam?", urged Sir Robert
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
Robertinstudy3
 dc.b go,0,95,nullobject ; go dressing room
 dc.w Occupation,16124 ; was busily working * Sir Robert
 dc.w Wwaitforperiod,20
 dc.b iSIT,0,Nsofa,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,12,7 ; walk to desk
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+369 ; searched for some papers
 dc.b animate,3
 dc.w readnewspaper+north ; read n
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+370 ; said, "I really ought to change 
; my will"
 dc.b animate,3
 dc.w readnewspaper+north ; read n
 dc.w Wwaitforperiod,75
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Robert busy with guests?
 dc.w WActorSingleMessage,rtmess+371 ; scribled onto some paper
; my will"
 dc.b animate,3
 dc.w readnewspaper+north ; read n
 dc.w Wwaitforperiod,75
; dc.b animate,3
; dc.w StandUpAnimation+north ; stand up n
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
SuevisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15130 ;$ I wonder where my darling Bob is? Maybe he's still 
; in his room
SuevisitsRobert1
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+400 ; "How are you, dear?", Sue asked Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+401 ; "Oh, so and so," replied Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+402 ; "I've been thinking about changing my will", 
; added Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+403 ; "I'll be glad to help," said Sue
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+404 ; Sir Robert gave Sue a warm smile
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+405 ; "Don't worry about the reunion," said Robert. 
; "My family aren't going to bite your head off"
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+406 ; Sue smiled back at Sir Robert. "I'll see you 
; at dinner", she said
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
KathyvisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15131 ;$ Well, I guess I'd better pay daddy a visit
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+410 ; "Hi, Robert," said Kathy
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+411 ; "Hello there Kathy", enthused Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+412 ; "How was the journey?", continued Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+413 ; "Oh, long and tiring," sighed Kathy
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+414 ; Sir Robert smirked. "That's William's 
; driving for you," he laughed
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+415 ; Sir Robert chatted to Kathy about the 
; weather.
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+416 ; Kathy muffled a yawn. "I must dash," she 
; said
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
AnthonyvisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15132 ;$ I'd better go and see old Bob. He must still be upset 
; about his wife being murdered and all
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+420 ; "It feels good to be here again," said 
; Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+421 ; Sir Robert smiled at Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+422 ; "How's the sports car running?", asked 
; Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+423 ; "Much better since I've had it tuned," 
; replied Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+424 ; "And the cash situation?", added Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+425 ; Anthony shrugged his shoulders
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+426 ; "I see," laughed Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+427 ; "And I'll see you," laughed said Anthony. 
; "At dinner"
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
WilliamvisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15133 ;$ I wonder how Bob is? I hope he's getting over his wife's 
; death
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.w WRtMessage,rtmess+430 ; "Hello there, William," said Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+431 ; William smiled. "Nice to see you again, 
; father," he said
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+432 ; "Likewise," replied Sir Robert. "And how's 
 dc.w Wwaitforperiod,20
; that lovelly wife of yours"
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+433 ; "Still the same old tease," sighed William
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+434 ; Sir Robert grinned
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+435 ; "And Sue?", asked William
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+436 ; "Prettier than ever," replied Sir Robert. 
; "We're getting along fine"
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,anger
 dc.w rtmess+437 ; William frowned slightly. "Well, can't hang 
; around here all day," he said
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
FionavisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15134 ;$ I'd better find out how daddy's coping with the 
; business, what with all the pressure after his wife was killed
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+440 ; "Well, father," began Fiona, "how's the 
; business going?"
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+441 ; "Good as always, Fiona," replied Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,anger
 dc.w rtmess+442 ; "Come on, father," frowned Fiona. "You've 
; been letting things go adrift"
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,anger
 dc.w rtmess+443 ; "Ever since you met that Sue woman," added 
; Fiona
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+444 ; Sir Robert frowned
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+445 ; "I'll speak to you later, young lady", 
; growled Sir Robert
 dc.w Wwaitforperiod,20
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+446 ; Fiona shook her head in irritation
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
CliffordvisitsRobert
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15135 ;$ I think I'll go and see how Robert's handling business. 
; I'll bet he's making a pigs ear of things, eh, what?
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w Occupation,16130 ; was talking to Sir Robert * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+450 ; "Good day, Sir Robert," said Clifford
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+451 ; "Well if it isn't our Clifford," enthused 
; Sir Robert
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+452 ; "And how was the ride over," asked Sir 
; Robert
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,anger
 dc.w rtmess+453 ; "A snail would have arrived sooner," 
; protested Clifford
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+454 ; "Traffic eh?", asked Sir Robert
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,anger
 dc.w rtmess+455 ; "If you want to call it that," droned 
; Clifford
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.w WRtMessage,rtmess+456 ; "Well, you're here now," concluded Sir 
; Robert
 dc.w Wwaitforperiod,10
 dc.b find,0,Robert,nullobject ; find Robert
 dc.b racetrackmessage,emphasis
 dc.w rtmess+457 ; "Er, yes," said Clifford as he wandered 
; off
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; Vera STAYS IN KITCHEN AND AWAITS GUESTS
;-------------------------------------------------------------------------
;
; while no guests are present, Vera will talk to user etc.
Verainkitchen
 dc.w Occupation,16135 ; was cooking the dinner * Vera
 dc.b find,0,stove,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+500 ; turned the chicken on the spit
 dc.b find,0,stove,nullobject
 dc.b animate,14
 dc.w reachleftanimation+north ; reach up north
 dc.w Wwaitforperiod,20
 dc.b find,0,stove,nullobject
 dc.b animate,14
 dc.w reachleftanimation+north ; reach up north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+501 ; stirred a pan on the stove
 dc.b find,0,stove,nullobject
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,stove,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject
 dc.b facenoun1,0,user,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+502 ; "It's a nice day, Sam," said 
; Vera
 dc.b find,0,stove,nullobject
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,stove,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
Verainkitchen1
 dc.w Occupation,16136 ; was making some soup * Vera
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+503 ; Vera sipped the soup
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject
 dc.b facenoun1,0,user,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+504 ; "Mmm, delicious," said Vera
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject
 dc.b facenoun1,0,user,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.b racetrackmessage,emphasis
 dc.w rtmess+505 ; "Thirsty work, this cooking," 
; said Vera
 dc.w Occupation,0 ; was cooking the dinner * Vera
 dc.b racetrackreturn,0,nullobject,nullobject
;
Verainkitchen2
 dc.b open,0,fridge,nullobject
 dc.w Occupation,16137 ; was having a sneaky swig of sherry * Vera
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+506 ; took a bottle of sherry from the 
; fridge
 dc.b animate,3
 dc.w reachleftanimation+east ; reach east
 dc.w Wwaitforperiod,20
 dc.b animate,28
 dc.w pouranimation ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+507 ; descreetly swigged the sherry
 dc.b animate,3
 dc.w reachleftanimation+north ; reach up north
 dc.w Wwaitforperiod,20
 dc.b animate,28
 dc.w pouranimation ; reach up north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+508 ; put the bottle back
 dc.b animate,3
 dc.w reachleftanimation+east ; reach east
 dc.w Wwaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
Verainkitchen3
 dc.w Occupation,16138 ; was doing the washing up * Vera
 dc.b find,0,sink,nullobject
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+509 ; filled the sink with water
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+510 ; washed up some dishes
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject
 dc.b facenoun1,0,user,nullobject
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+511 ; said, "My, that sherry is strong"
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,sink,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
Verainkitchen4
 dc.w Occupation,16138 ; was doing the washing up * Vera
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+512 ; finished washing up
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; is Vera busy with guests?
 dc.w WActorSingleMessage,rtmess+513 ; dried her hands
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,washer,nullobject ; go washer
 dc.w Occupation,16272 ; was prodding the washing * Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,washer,nullobject ; go washer
 dc.b animate,3
 dc.w VeraProdWashing
 dc.w Wwaitforperiod,20
 dc.b find,0,washer,nullobject ; go washer
 dc.b animate,3
 dc.w VeraProdWashing
 dc.w Wwaitforperiod,20
 dc.b find,0,washer,nullobject ; go washer
 dc.b animate,3
 dc.w VeraProdWashing
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Vera goes to herb garden to collect parsley for cooking
VeraPicksWeed
 dc.b facenoun1,0,user,nullobject ; face Sam
 dc.b ActorSaidSingleMessage,emphasis
 dc.w 15000 ; Darn it! I've run out of parsley again
 dc.b go,0,82,nullobject ; go via scullery to avoid F/Ptr breaks
 dc.b go,0,40,nullobject ; go herb garden
VeraPicksWeed1
 dc.w Occupation,16139 ; was picking some herbs for dinner * Vera
 dc.b localmove,0,6,7 ; front left of herb garden
 dc.b facenoun1,0,user,nullobject ; face user
 dc.b RaceTrackMessage,emphasis
 dc.w 15001 ; Mmm, just smell those lovelly herbs
 dc.w Wwaitforperiod,10
 dc.b animate,14
 dc.w ReachDownAnimation+3 ; reach down, east
 dc.w WRtMessage,15002 ; Vera picked some herbs
 dc.b localmove,0,14,7 ; front right of herb garden
 dc.b facenoun1,0,user,nullobject ; face user
 dc.b RaceTrackMessage,emphasis
 dc.w 15003 ; I wish Jarvis wouldn't plant his mouldy old cabbages 
; in my herb garden
 dc.w Wwaitforperiod,10
 dc.b animate,14
 dc.w ReachDownAnimation+7 ; reach down, west
 dc.w WRtMessage,15004 ; "That should be enough," said Vera as she picked 
; some more herbs
 dc.b animate,14
 dc.w ReachDownAnimation+7 ; reach down, west
 dc.w Occupation,0
 dc.b go,0,82,nullobject ; go via scullery to avoid F/Ptr breaks
 dc.b go,0,77,nullobject ; return to the kitchen
 dc.b racetrackreturn,0,nullobject,nullobject
;---
SuevisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15120 ;$ I'd better see Vera and make up for the argument we 
; had earlier
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16140 ; was arguing with Vera * Sue <E>
 dc.w WRtMessage,rtmess+520 ; "What do you want, Sue?" snapped Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,anger
 dc.w rtmess+521 ; "Just thought I'd pop in," said Sue 
; apologetically
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+522 ; "Can't you see I'm busy," replied Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,anger
 dc.w rtmess+523 ; "Sorry to bother you," sighed Sue
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
KathyvisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15121 ;$ I think I'll pay Vera a visit. She's usually good 
; company
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16145 ; was chatting with Vera * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+530 ; "Hi, Vera", said Kathy. "What's cooking?"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+531 ; "Today's dinner," replied Vera. "Like the 
; smell?"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+532 ; "Smells delicious," complemented Kathy
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+533 ; "Why thank you," said Vera, "I just hope it 
; tastes as good"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+534 ; "Oh, I'm sure it will," replied Kathy
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+535 ; "Well Vera, I'll leave you to it," added 
; Kathy
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
AnthonyvisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15122 ;$ I wonder if Vera's cooking is up to scratch today
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16145 ; was chatting with Vera * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+540 ; "Nice smell of cooking," said Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+541 ; "Thank you, Anthony," replied Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+542 ; "You're looking good these days," added 
; Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+543 ; "Well, the sun-tan's from the Bahama's," 
; enthused Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+544 ; "Expensive, was it?", asked Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+545 ; "Just about spent-up," laughed Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+546 ; "That's my Anthony," sniggered Vera. "Money's 
; for spending, eh?"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+547 ; "Certainly is," said Anthony
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+548 ; "I'll leave you to the cooking," said Anthony
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
WilliamvisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15123 ;$ Hmm, I think I'll go and find out what's for dinner
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16145 ; was chatting with Vera * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+550 ; "What's for dinner?," asked William
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+551 ; "Wait and see," replied Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+552 ; "Certainly smells good," complemented 
; William
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+553 ; "Glad you think so," said Vera. "And 
; how are you today?"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+554 ; "Top of the world," said William
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+555 ; "And your wife?" continued Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,anger
 dc.w rtmess+556 ; "Kathy's fine," sighed William
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+557 ; "Does that mean she's still flirting 
; with everything in trousers?", laughed Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+558 ; Willaim frowned and decided to leave
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
FionavisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15124 ;$ Hmm, I can smell the dinner! I think I'll 
; have a sneaky look to see what's being cooked
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16145 ; was chatting with Vera * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+560 ; "Just thought I'd see what was cooking," 
; said Fiona
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+561 ; "Can't you wait until dinner," joked 
; Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+562 ; "Is it going to be good?", asked Fiona
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+563 ; "Have I ever failed you?", replied Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+564 ; "Never," reassured Fiona
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,anger
 dc.w rtmess+565 ; "I just hope there's no arguments at the 
; table," added Fiona. "You know what Kathy's like"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+566 ; Vera shook her head. "It's about time 
; you two made up," she sighed
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,anger
 dc.w rtmess+567 ; "Some chance!", huffed Fiona
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
CliffordvisitsVera
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15125 ;$ I think I'll go and charm the socks off Vera
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w Occupation,16145 ; was chatting with Vera * Any NPC
 dc.b racetrackmessage,emphasis
 dc.w rtmess+570 ; "Good afternoon, Vera," said Clifford
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+571 ; "It certainly is," replied Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+572 ; "Your cooking smells lovelly," complemented 
; Clifford
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+573 ; "Flattery will get you nowhere," sighed 
; Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+574 ; "And how's your wife?", asked Vera
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+575 ; "Going strong," answered Clifford. "But I 
; wish she'd quit arguing with Kathy"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WRtMessage,rtmess+576 ; "So do I," agreed Vera. "But my business 
; is just in the kitchen"
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.b racetrackmessage,emphasis
 dc.w rtmess+577 ; "And you're good at it," charmed Clifford
 dc.w Wwaitforperiod,20
 dc.b find,0,Vera,nullobject ; find Vera
 dc.w WActorSingleMessage,rtmess+578 ; smiled
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; VARIOUS ACTIVITIES AROUND THE HOUSE (used by various npcs)
;-------------------------------------------------------------------------
;
pmlibraryrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15140 ;$ I fancy a nice read. I wonder if there are any new 
; books in the library?
 dc.b go,0,88,nullobject ; go library
 dc.b conditional,0,toomanypeople,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGosub,libraryrt1-list5
 dc.w WRtGoto,libraryrt1-list5
;
libraryRT
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15140
libraryRT1
 dc.b go,0,88,nullobject ; go library
 dc.w Occupation,16150 ; was browsing through some books * Any NPC
 dc.w Wwaitforperiod,20
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachleftanimation+north ; reach n
 dc.w WActorSingleMessage,rtmess+600 ; searched through the books
 dc.w Wwaitforperiod,30
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachrightanimation+north ; reach n
 dc.w WActorSingleMessage,rtmess+601 ; browsed through the book titles
 dc.w Wwaitforperiod,30
 dc.w WActorSingleMessage,rtmess+602 ; removed a book from the case
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w WActorSingleMessage,rtmess+603 ; blew the dust off the book
; sit with nullobject finds nearest chair/sofa
 dc.b iSIT,0,nullobject,nullobject
 dc.w WRtGosub,Read3timesRT-list5 ; read 3 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+605 ; said, "what a boring book"
 dc.w WRtGosub,Read1timesRT-list5 ; read 1 times in current dirn. 
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.w WActorSingleMessage,rtmess+606 ; put back the book
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w WActorSingleMessage,rtmess+607 ; searched through the books
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+608 ; pulled out a book
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w WActorSingleMessage,rtmess+609 ; said, "Hmm, this looks 
; interesting"
 dc.b iSIT,0,nullobject,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,4,6 ; move to chair
 dc.w Wwaitforperiod,50
 dc.w WActorSingleMessage,rtmess+610 ; began reading the book
 dc.w WRtGosub,Read3timesRT-list5 ; read 3 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+611 ; read the book
 dc.w WRtGosub,Read2timesRT-list5 ; read 2 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+612 ; folded over a page in the book
 dc.w WRtGosub,Read2timesRT-list5 ; read 2 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+613 ; said, "I'll finish this later"
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w WActorSingleMessage,rtmess+614 ; crammed the book into the case
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
leftgardenrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15141 ;$ I think I'll take a wander through the grounds
 dc.w WRtGosub,WatchFishRT-list5 ; Watch the fish  
;
 dc.w Occupation,16151 ; was relaxing in the garden * Any NPC
 dc.b go,0,44,nullobject ; go left side garden
 dc.w Wwaitforperiod,20
 dc.b localmove,0,5,7 ; walk to chair
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w sitanimation+south ; sit south
 dc.w WActorSingleMessage,rtmess+623 ; sat back and relaxed
 dc.w Wwaitforperiod,75
 dc.w WActorSingleMessage,rtmess+624 ; yawned tiredly
 dc.w Wwaitforperiod,75
 dc.w WActorSingleMessage,rtmess+625 ; said, "I'd better get up before 
; I nod off"
; dc.b animate,3
; dc.w standupanimation+south ; stand up south
;
 dc.b go,0,46,nullobject ; go back left garden
 dc.w Wwaitforperiod,20
 dc.b localmove,0,3,9 ; walk to flowers
 dc.w WActorSingleMessage,rtmess+626 ; picked a flower
 dc.b animate,14
 dc.w reachdownanimation+west ; reach west
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+627 ; sniffed the flower admirably
;
 dc.b go,0,48,nullobject ; go back of house
 dc.w Wwaitforperiod,20
 dc.b localmove,0,16,8 ; walk to gargoyle
 dc.w WActorSingleMessage,rtmess+628 ; pulled a face at the gargoyle
 dc.b animate,3
 dc.w kissanimation+north ; kiss north (can't see)
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;--- 
WatchFishRT 
 dc.b go,0,5,nullobject ; go water garden
 dc.w Occupation,16152 ; was admiring the fish in the stream * Any NPC
 dc.w Wwaitforperiod,20
 dc.b localmove,0,9,6 ; walk to bridge
 dc.w WActorSingleMessage,rtmess+620 ; stood on the bridge admiring 
; the fish
 dc.w Wwaitforperiod,30
 dc.w WActorSingleMessage,rtmess+621 ; picked up a few pebbles
 dc.b animate,14
 dc.w reachdownanimation+south ; reach south
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+622 ; tossed a pebble into the water
 dc.b animate,3
 dc.w reachleftanimation+south ; reach south
 dc.w Wwaitforperiod,30
 dc.b animate,3
 dc.w reachleftanimation+south ; reach south
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
rightgardenviasculleryrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15142 ;$ I could certainly do with a breath of fresh air in 
; the garden
 dc.b go,0,82,nullobject ; scullery
 dc.b go,0,40,nullobject ; right side garden
 dc.w WRtGosub,rightgarden2-list5 ; do north part first
 dc.w WRtGosub,rightgarden1-list5 ; and then south part
 dc.b go,0,40,nullobject ; right side garden
 dc.b go,0,82,nullobject ; scullery
 dc.b racetrackreturn,0,nullobject,nullobject
;
rightgardenrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15142
 dc.w WRtGosub,rightgarden1-list5 ; do south part first 
 dc.w WRtGosub,rightgarden2-list5 ; and then north part
 dc.b racetrackreturn,0,nullobject,nullobject
;
rightgarden1
 dc.b go,0,43,nullobject ; go to lawn
 dc.w Occupation,16153 ; was strolling casually through the garden * 
; Any NPC
 dc.w Wwaitforperiod,20
 dc.b localmove,0,12,6 ; walk to sundial
 dc.w WActorSingleMessage,rtmess+630 ; checked the time on the sundial
 dc.b animate,3
 dc.w reachleftanimation+south ; reach south
;
 dc.b go,0,39,nullobject ; go front right garden
 dc.w Occupation,16151 ; was relaxing in the garden * Any NPC
 dc.w Wwaitforperiod,20
 dc.b localmove,0,14,7 ; walk to chair
 dc.w WActorSingleMessage,rtmess+631 ; said, "I could do with a rest"
 dc.b animate,3
 dc.w CrouchAndSit+south
 dc.b animate,3
 dc.w sitanimation+south ; sit south
 dc.w Wwaitforperiod,75
 dc.w WActorSingleMessage,rtmess+632 ; sat back admiring the garden
 dc.w Wwaitforperiod,75
 dc.w WActorSingleMessage,rtmess+633 ; said, "I wonder how the veg is 
; doing"
; dc.b animate,3
; dc.w standupanimation+south ; stand up south
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
rightgarden2
 dc.b go,0,40,nullobject ; go veg garden
 dc.w Occupation,16154 ; was sneakily eating the vegetables from the 
; kitchen garden * Any NPC
 dc.w Wwaitforperiod,20
 dc.b localmove,0,6,6 ; walk to peas
 dc.w WActorSingleMessage,rtmess+634 ; reached for a pea pod
 dc.b animate,3
 dc.w reachrightanimation+south ; reach south
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+635 ; popped open a pea pod
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+636 ; ate some peas
 dc.w Occupation,16153 ; was strolling casually through the garden * 
;
 dc.b go,0,42,nullobject ; go back right garden
 dc.w Wwaitforperiod,20
 dc.b find,coarse,beehive,nullobject ;; GMJ 25/9/89 ;; dc.b localmove,0,15,8 ; walk to beehive
 dc.w WActorSingleMessage,rtmess+637 ; peered briefly into the beehive
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
pmstudyrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15143 ;$ I think I'll go and relax in the study for a while
 dc.b go,0,81,nullobject
 dc.b conditional,0,toomanypeople,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGosub,studyrt1-list5
 dc.b find,coarse,table,nullobject ; used to prevent repeated sitting
 dc.w WRtGoto,studyrt1-list5
;
studyrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15143
studyrt1
 dc.b go,0,81,nullobject ; go to study
 dc.w Wwaitforperiod,20
; sit with nullobject finds nearest chair/sofa
 dc.b iSIT,0,nullobject,nullobject
 dc.w Occupation,16160 ; was passing time by reading a newspaper * Any NPC
 dc.w WRtGosub,READN1timesRT-list5 ; read 1 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+640 ; opened up a newspaper
 dc.w WRtGosub,READN2timesRT-list5 ; read 2 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+641 ; read the newspaper
 dc.w WRtGosub,READN2timesRT-list5 ; read 2 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+642 ; sighed and said, "The trains 
; are still on strike"
 dc.b animateCD,3
 dc.w readnewspaper ; read n
 dc.w Wwaitforperiod,75
 dc.w WActorSingleMessage,rtmess+643 ; browsed through the horoscopes 
; and laughed
 dc.w WRtGosub,READN2timesRT-list5 ; read 2 times in current dirn. 
 dc.w WActorSingleMessage,rtmess+644 ; put away the newspaper
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; taste various vintages etc. in the drawing room
pmdrawingrt
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15144 ;$ I fancy a quick sherry. I imagine there's a bottle 
; or two in the drawing room
 dc.b go,0,79,nullobject
 dc.b conditional,0,toomanypeople,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w WRtGosub,drawingrt1-list5
 dc.w WRtGoto,drawingrt1-list5
;
DrawingRT
 dc.b actorsaidsinglemessage,emphasis
 dc.w 15144
DrawingRT1
 dc.b go,0,79,nullobject ; go to drawing room
 dc.w Occupation,16161 ; was drinking sherry * Any NPC
 dc.w Wwaitforperiod,20
 dc.b find,0,table,nullobject
 dc.w WActorSingleMessage,rtmess+651 ; searched through some bottles
 dc.b find,0,table,nullobject
 dc.b animate,3
 dc.w reachleftanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.b find,0,table,nullobject
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.w Wwaitforperiod,20
 dc.w WActorSingleMessage,rtmess+652 ; poured a glass of sherry
 dc.b find,0,table,nullobject
 dc.b animate,28
 dc.w PourAnimation
 dc.w Wwaitforperiod,20
 dc.b iSIT,0,nullobject,nullobject
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Wwaitforperiod,50
 dc.w WActorSingleMessage,rtmess+655 ; sipped the sherry
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Wwaitforperiod,200
 dc.w WActorSingleMessage,rtmess+655 ; sipped the sherry
 dc.w Wwaitforperiod,50
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; upstairs loo
toiletrt
 dc.w WActorSingleMessage,rtmess+660 ; said "Excuse me, but nature calls"
gotoilet
 dc.b go,0,63,nullobject
 dc.w Occupation,16162 ; was annoyed at Sam for barging into the 
; bathroom * Any NPC
 dc.b facenoun1,0,toilet,nullobject
 dc.b conditional,0,user,nullobject ; user on toilet?
 dc.w WRtGoto,somebodyontoilet-list5
 dc.b conditional,0,isroomempty,nullobject ; any guests on toilet?
; toilet is vacant
 dc.w WRtGoto,HaveACrapOrWhatever1-list5
;
somebodyontoilet
 dc.w Occupation,0
 dc.w WActorSingleMessage,rtmess+661 ; said "Oh, do excuse me!"
 dc.b go,0,71,nullobject ; go outside toilet
 dc.w WRtMessage,rtmess+662 ; "Where are your manners?", came an angry voice 
; from the bathroom
 dc.w WRtGoto,gotoilet1-list5 ; try downstairs loo
;---
; downstairs loo
toiletrt1
 dc.w WActorSingleMessage,rtmess+660 ; said "Excuse me, but nature calls"
gotoilet1
 dc.b go,0,65,nullobject
 dc.w Occupation,16162 ; was annoyed at Sam for barging into the 
; bathroom * Any NPC
 dc.b facenoun1,0,toilet,nullobject
 dc.b conditional,0,user,nullobject ; user on toilet?
 dc.w WRtGoto,somebodyontoilet1-list5
 dc.b conditional,0,isroomempty,nullobject ; any guests on toilet?
 dc.w WRtGoto,haveacraporwhatever1-list5
 dc.w WRtGoto,somebodyontoilet1-list5
;
; toilet is vacant
HaveACrapOrWhatever1
 dc.b isit,0,toilet,nullobject
;
; Complain if user enters
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,PlayerWatchesActorShitting-list5
 dc.w WWaitForPeriod,50
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,PlayerWatchesActorShitting-list5
 dc.w WWaitForPeriod,50
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,PlayerWatchesActorShitting-list5
 dc.w WWaitForPeriod,50
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,PlayerWatchesActorShitting-list5
 dc.w WWaitForPeriod,50
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,PlayerWatchesActorShitting-list5
; dc.b animate,3
; dc.w StandupAnimation+west ; stand up east
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; player walks in while actor is having a crap!
PlayerWatchesActorShitting
; INTERCEPT THIS MESSAGE TO MAKE PLAYER LOSE POINTS
 dc.w WRtActorVaryMessage,rtmess+670 ; shouted, "Hey! Do you mind?"
; yelled, "Get out!"
; shrieked, "Don't you have any manners?"
; shouted, "Why don't you try knocking!"
; cursed, "Get out! I'm busy!"
 dc.w WWaitForPeriod,20
 dc.w WRtMessage,rtmess+680 ; "Oops, Sorry!", apologised Sam
 dc.b racetrackreturn,0,nullobject,nullobject
;
somebodyontoilet1
 dc.w WActorSingleMessage,rtmess+661 ; said "Oh, do excuse me!"
 dc.b go,0,83,nullobject ; go outside toilet
 dc.b racetrackmessage,anger
 dc.w rtmess+662 ; "Where are your manners?", came an angry voice 
; from the bathroom
 dc.w Occupation,0
 dc.w WRtGoto,gotoilet-list5 ; try upstairs loo
; 
; --------------------------------------------------------------- 
; 
polishDiningRoomTableRT
 dc.w Occupation,16170 ; was polishing the table * Jarvis
 dc.b localmove,0,6,9
 dc.b animate,3
 dc.w ReachleftAnimation+south ; reach south
 dc.b localmove,0,8,9
 dc.b animate,3
 dc.w ReachrightAnimation+south ; reach south
 dc.b localmove,0,10,9
 dc.b animate,3
 dc.w ReachleftAnimation+south ; reach south
 dc.w WWaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
; 
polishLandingBannister
 dc.w Occupation,16108 ; was dusting the bannister * Jarvis
 dc.b localmove,0,6,7
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,8,7
 dc.b animate,3
 dc.w ReachrightAnimation+north ; reach north
 dc.b localmove,0,10,7
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.w WWaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
; 
dustLibraryBookshelves
 dc.w Occupation,16109 ; was cleaning the bookshelves * Jarvis
 dc.b LocalMove,0,6,5 ; move to bookcase
 dc.b animate,3
 dc.w reachrightanimation+north ; reach north
 dc.b localmove,0,5,5
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,4,5
 dc.b animate,3
 dc.w ReachrightAnimation+north ; reach north
 dc.w WWaitforperiod,20
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
; 
prepareDiningRoomTable
 dc.w Occupation,16111 ; was setting the table * Jarvis
 dc.b localmove,0,14,9 ; walk to front left of table
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,15,9 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,14,9 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,16,12 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,13,9 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,14,9 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.b localmove,0,16,12 ; walk right 1 cell
 dc.b animate,3
 dc.w ReachleftAnimation+north ; reach north
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-------------------------------------------------------------------------
; VARIOUS ACTIVITIES AFTER THE MURDER
;-------------------------------------------------------------------------
;
; Jarvis phone's the police
JarvisGetPolice
 dc.w Occupation,16036 ; had decided to 'phone the police * Jarvis
 dc.b go,0,86,nullobject ; go to hall
 dc.b iDial,0,telephone,nullobject ; pick up receiver
 dc.w Wwaitforperiod,20
 dc.w WRtMessage,rtmess+3050 ; "Hello," said Jarvis, "We have an 
; emergency..."
 dc.w Wwaitforperiod,30
 dc.w WRtMessage,rtmess+3051 ; "Grange Manor," said Jarvis into the 
; phone
 dc.w Wwaitforperiod,30
 dc.w WRtMessage,rtmess+3052 ; "Thank you," said Jarvis as he replaced 
; the receiver
 dc.b animate,3
 dc.w DropPhone
 dc.b telegoto,inspector
 dc.w InspectorArrives1-list5
 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
InspectorArrives
 dc.w WRtGoto,WaitForEverRt-list5
;
InspectorArrives1
IA1
; don't arrive until Sam knows about the murder
 dc.b conditional,0,Samknowsaboutmurder,nullobject
 dc.w WRtGoto,IA2-list5
 dc.b wait,0,nullobject,nullobject
 dc.w WRtGoto,IA1-list5
;
IA2
 dc.b RevealMurder,0,nullobject,nullobject
 dc.b find,roomonly,user,nullobject ; find player
 dc.w WRtConversation,CInspectorInrtoduction-list4
 dc.b racetrackmessage,1+portrait
 dc.w rtmess+3060 ; "Hello, I'm Inspector Gormley", said 
; the Inspector.
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,1
 dc.w rtmess+3065 ; "You must be Sam, the security bloke", added 
; the Inspector, "I seem to remember Bob telling me" ; $
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,1
 dc.w rtmess+3061 ; "Well, the city police should be here soon, 
; but I'll keep an eye on things until then", said the Inspector
 dc.w WRtConversation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Visit Robert
InspectorVisitRobert
 dc.b find,roomonly,Robert,nullobject
 dc.w Occupation,16180 ; was arranging a meeting with Sir Robert * Insp.

; trigger Robert's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Robert ; 
 dc.b TeleGosub,Robert+resume
 dc.w FollowInspector-list5
 dc.w Occupation,0
 dc.b go,0,94,nullobject ; go bob's room
 dc.w Occupation,16181 ; was waiting for Sir Robert
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Robert,nullobject
 dc.w Occupation,16182 ; was questioning Sir Robert
 dc.w Wwaitforperiod,20

 dc.b racetrackmessage,1
 dc.w rtmess+4000 ; "What can I do for you, Inspector" said Sir Robert
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4001 ; The Inspector chatted with Robert and scribbled 
; into his notebook
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,1
 dc.w rtmess+4002 ; "And what do you think," the Inspector asked Sam
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4003 ; "Well, Robert" said the Inspector, "That will be 
; all"

; terminate Robert's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Robert ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Clifford
InspectorVisitClifford
 dc.b find,roomonly,Clifford,nullobject
 dc.w Occupation,16190 ; was arranging a meeting with Clifford * Insp.

; trigger Clifford's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Clifford ; 
 dc.b TeleGosub,Clifford+resume
 dc.w FollowInspector-list5
 dc.b go,0,77,nullobject ; go dining room
 dc.w Occupation,16191 ; was waiting for Clifford * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Clifford,nullobject
 dc.w Occupation,16192 ; was questioning Clifford * Insp.
 dc.w Wwaitforperiod,40

 dc.b racetrackmessage,1
 dc.w rtmess+4010 ; "Hello, Inspector" said Clifford
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,40
 dc.b racetrackmessage,1
 dc.w rtmess+4011 ; "Just a few questions," said the Inspector
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n

; terminate Clifford's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Clifford ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Fiona
InspectorVisitFiona
 dc.b find,roomonly,Fiona,nullobject
 dc.w Occupation,16200 ; was arranging a meeting with Fiona * Insp.

; trigger Fiona's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Fiona ; 
 dc.b TeleGosub,Fiona+resume
 dc.w FollowInspector-list5
 dc.b go,0,77,nullobject ; go dining room
 dc.w Occupation,16201 ; was waiting for Fiona * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Fiona,nullobject
 dc.w Occupation,16202 ; was questioning Fiona * Insp.
 dc.w Wwaitforperiod,20

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4012 ; The Inspector questioned Fiona about the murder
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,1
 dc.w rtmess+4013 ; "Hmm," said the Inspector
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out

; terminate Fiona's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Fiona ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit William
InspectorVisitWilliam
 dc.b find,roomonly,William,nullobject
 dc.w Occupation,16210 ; was arranging a meeting with William * Insp.

; trigger William's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+William ; 
 dc.b TeleGosub,William+resume
 dc.w FollowInspector-list5
 dc.b go,0,93,nullobject ; go William's room
 dc.w Occupation,16211 ; was waiting for William * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,William,nullobject
 dc.w Occupation,16212 ; was questioning William * Insp.
 dc.w Wwaitforperiod,20

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4020 ; "Good evening, Inspector" said William
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4022 ; "And what have you got to say?", the Inspector 
; asked William
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4023 ; "Very good, Sir," muttered the Inspector

; terminate William's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+William ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Kathy
InspectorVisitKathy
 dc.b find,roomonly,Kathy,nullobject
 dc.w Occupation,16220 ; was arranging a meeting with Kathy * Insp.

; trigger Kathy's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Kathy ; 
 dc.b TeleGosub,Kathy+resume
 dc.w FollowInspector-list5
 dc.b go,0,93,nullobject ; go Kathy's room
 dc.w Occupation,16221 ; was waiting for Kathy * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Kathy,nullobject
 dc.w Occupation,16222 ; was questioning Kathy * Insp.
 dc.w Wwaitforperiod,40

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4021 ; The Inspector put a few questions to Kathy
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,40
 dc.b animateCD,3
 dc.w readanimation ; read n

; terminate Kathy's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Kathy ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Jarvis
InspectorVisitJarvis
 dc.b find,roomonly,Jarvis,nullobject
 dc.w Occupation,16230 ; was arranging a meeting with Jarvis * Insp.

; trigger Jarvis's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Jarvis ; 
 dc.b TeleGosub,Jarvis+resume
 dc.w FollowInspector-list5
 dc.b go,0,77,nullobject ; go dining room
 dc.w Occupation,16231 ; was waiting for Jarvis * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Jarvis,nullobject
 dc.w Occupation,16232 ; was questioning Jarvis * Insp.
 dc.w Wwaitforperiod,20

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4030 ; "Ah, Inspector," stammered Jarvis
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4031 ; "Just a few little questions, Jarvis", said the 
; Inspector
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4032 ; "I'm not very good at questions," excused Jarvis
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4033 ; The Inspector talked quietly with Jarvis
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out

; terminate Jarvis's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Jarvis ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Vera
InspectorVisitVera
 dc.b find,roomonly,Vera,nullobject
 dc.w Occupation,16240 ; was arranging a meeting with Vera * Insp.

; trigger Vera's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Vera ; 
 dc.b TeleGosub,Vera+resume
 dc.w FollowInspector-list5
 dc.b go,0,77,nullobject ; go games dining room
 dc.w Occupation,16241 ; was waiting for Vera * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Vera,nullobject
 dc.w Occupation,16242 ; was questioning Vera * Insp.
 dc.w Wwaitforperiod,20

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4040 ; "Er, hello, Inspector" said Vera
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4041 ; "Isn't it terrible", said Vera while the Inspector 
; jotted into his notebook
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,1
 dc.w rtmess+4042 ; The Inspector asked Vera a few questions quietly
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b racetrackmessage,1
 dc.w rtmess+4043 ; "Well," said the Inspector, "I must circulate"

; terminate Vera's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Vera ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Visit Anthony
InspectorVisitAnthony
 dc.b find,roomonly,Anthony,nullobject
 dc.w Occupation,16250 ; was arranging a meeting with Anthony * Insp.

; trigger Anthony's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10000+Anthony ; 
 dc.b TeleGosub,Anthony+resume
 dc.w FollowInspector-list5
 dc.b go,0,97,nullobject ; go Anthony's room
 dc.w Occupation,16251 ; was waiting for Anthony * Insp.
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.b waitforperson,0,Anthony,nullobject
 dc.w Occupation,16252 ; was questioning Anthony * Insp.
 dc.w Wwaitforperiod,20

 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4050 ; "There you are, Anthony" remarked the Inspector
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4051 ; "'Just fancied a wander", said Anthony
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4052 ; "Is that so?", smirked the Inspector, taking 
; notes
 dc.b conditional,0,user,nullobject
 dc.w WRtGosub,throwSamout-list5 ; throw Sam out
 dc.w Wwaitforperiod,20
 dc.b animateCD,3
 dc.w readanimation ; read n
 dc.b racetrackmessage,1
 dc.w rtmess+4053 ; The Inspector questioned Anthony and stroked 
; his chin

; terminate Anthony's questioning rt...
 dc.b racetrackmessage,1
 dc.w 10050+Anthony ; 

 dc.w Occupation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Finally, visit Sam
InspectorVisitSam
 dc.b find,roomonly,user,nullobject
 dc.w WRtConversation,CInspectorSuspectsSam-list4
 dc.b racetrackmessage,1+portrait
 dc.w rtmess+4062 ; "Hmm," began the Inspector. "I'm sure I've seen 
; you somewhere before, Sam" ; $
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,1
 dc.w rtmess+4063 ; "You're certainly a suspicious looking 
; fellow, if you excuse my bluntness", added the Inspector ;$
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,1
 dc.w rtmess+4061 ; "I just hope you can convince me that you're 
; clean," he grunted ;$
 dc.w WRtConversation,0
 dc.b racetrackreturn,0,nullobject,nullobject
;
InspectorEnd
 dc.w WRtGoto,InspectorStandardLoopRT-list5 
;---
; Inspector throws Sam out
throwSamout
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,anger
; this message is intercepted to physically throw Sam out of the 
; room
 dc.w rtmess+4070 ; "Excuse me, Sam," began the Inspector, "But I'd 
; prefer it if you left us in private" ;$
 dc.w Wwaitforperiod,20
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.w Wwaitforperiod,30
 dc.b facenoun1,0,user,nullobject ; face player
 dc.b racetrackmessage,anger+portrait
 dc.w rtmess+4071 ; "I won't tell you again, Sam!", growled the Inspector
 dc.w Wwaitforperiod,20
 dc.b iSIT,0,nullobject,nullobject ; sit down again
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; npc is triggered by 10000+npc to follow Inspector and await questioning
; (uses a TELEPATHIC GOSUB)
FollowInspector
 dc.b conditional,0,Inspectorquestioning,nullobject ; still questioning?
 dc.w WRTgoto,Inspectorquestions-list5 ; yes
 dc.b racetrackreturn,0,nullobject,nullobject
Inspectorquestions
 dc.b find,0,Inspector,nullobject
 dc.b wait,0,nullobject,nullobject ; prevent hang-up (wait 1 turn)
 dc.w WRtGoto,FollowInspector-list5
;---
; Inspector analyses an object
InspectorAnalyse
 dc.b go,0,3,nullobject ; go to car (leave the game briefly)
 dc.w Wwaitforperiod,20
 dc.b find,roomonly,user,nullobject
; message intercepted for code to handle the analyse message
 dc.b racetrackmessage,emphasis+portrait
 dc.w rtmess+4101 ; "Well then, Sam", began the Inspector
 dc.b racetrackreturn,0,nullobject,nullobject
;---
; Guests lounge around after the murder, and are obedient to 
; commands given by the player
PMRacetrack181
 dc.b go,0,81,nullobject ; go to study
 dc.w WRtGoto,PmRacetrack1-list5
PMRacetrack177
 dc.b go,0,77,nullobject ; go to dining room
 dc.w WRtGoto,PmRacetrack1-list5
PMRacetrack179
 dc.b go,0,79,nullobject ; go to drawing room
PMRacetrack1
 dc.b iSIT,0,nullobject,nullobject
PMRacetrack1Sitting
;
; Group message 3040 makes the corresponding npc obedient to FOLLOW 
; commands etc.
;
 dc.w WRtActorVaryMessage,rtmess+3040
; puffed a cigarette nervously
; took a sip of brandy
; said, "How unfortunate,"
; looked down solemnly
; speculated about the murder
;
PMRt1
 dc.b conditional,0,Inspector,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.b conditional,0,random,3
 dc.w WRtActorVaryMessage,rtmess+3040
 dc.b wait,0,nullobject,nullobject
; do various animations if not sitting
 dc.b conditional,0,actorsitting,nullobject
 dc.w WRtGoto,PMRtNotSmoking-list5
 dc.b conditional,2,random,3
 dc.b animate,15
 dc.w Smoking
 dc.b wait,0,nullobject,nullobject
 dc.b animate,3
 dc.w reachrightanimation+south ; reach south
 dc.b wait,0,nullobject,nullobject
 dc.b conditional,2,random,3
 dc.b facenoun1,0,user,nullobject ; face player
PMRtNotSmoking
 dc.b wait,0,nullobject,nullobject
 dc.w WRtGoto,PMRt1-list5
;
;-------------------------------------------------------------------------
; SPECIAL RACETRACKS TO BE USED WHEN THE PLAYER INTRUDES ON AN 
; NPC WHILE IN A PARTICULAR ROOM
;-------------------------------------------------------------------------
;
; Sue in her room
IntrusionSueRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 10100 ; "Hello, Sam", said Sue, "Do you like the new wallpaper 
; in my room?"
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10101 ; "I think it adds a bit of sparkle to the place", Sue 
; continued
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Vera in the kitchen
IntrusionVeraKitchen
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10110 ; "I hope you haven't come in here to bother me, Sam", 
; snapped Vera
 dc.b animateCD,14
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10111 ; "I've got a lot of work to do, and I don't want you 
; getting under my feet, Sam", continued Vera
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Vera picks some weed in the "herb" garden
IntrusionVeraPicksWeed
 dc.w WRtGosub,VeraPicksWeed-list5
 dc.w IntrusionOn,IntrusionVeraKitchen-list5 ; use standard Vera intrusion 
; next time
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Kathy in her room
IntrusionKathyRoom
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 10120 ; nice of you to come and visit me
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; are we alone?
 dc.w WRtGoto,DoSexScene-list5
 dc.w WRtGosub,NoSexYet-list5
 dc.w IntrusionOn,IntrusionKathyRoom2-list5
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Kathy in her room #2
IntrusionKathyRoom2
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 10122 ; "I'm so glad you came to see me, Sam," said Kathy
 dc.b conditional,0,isroomemptyexceptuser,nullobject ; are we alone?
 dc.w WRtGoto,DoSexScene-list5
 dc.w WRtGosub,NoSexYet-list5
 dc.w IntrusionOn,IntrusionKathyRoom3-list5
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Kathy in her room #3
IntrusionKathyRoom3
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10150 ; "For goodness sake, Sam", snapped Kathy, "Stop hounding me, 
; you creep!"
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Sex with Kathy!
DoSexScene
 dc.w WRtMessage,10123 ; "Quick, behind here! Nobody's looking", invited 
; Kathy (Message also prevents anyone else entering)
 dc.b find,coarse,user,nullobject
 dc.b iGODOOR,0,84,nullobject ; go to door
 dc.w WRtMessage,10125 ; Null message to trigger lock door
 dc.b localmove,0,3,6 ; walk behind screen
 dc.b telegoto,user
 dc.w SamHidesBehindScreen-list5 ; make Sam join her
 dc.b waitforpersontoleave,0,user,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
SamHidesBehindScreen
 dc.b find,0,Kathy,nullobject ; walk behind screen
 dc.w WRtMessage,10124 ; Null message to trigger sex animation
 dc.b racetrackreturn,0,nullobject,nullobject
;
NoSexYet
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10121 ; "But, Sam," whispered Kathy, "It would be better if you 
; went away and came back when I'm alone..."
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Anthony in his room
IntrusionAnthonyRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10160 ; "Fair go, old chap," said Anthony, "Can't a man have any 
; privacy in his own bedroom?"
 dc.b animateCD,3
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10161 ; "You really are persistent, aren't you, Sam?", frowned 
; Anthony
 dc.b racetrackreturn,0,nullobject,nullobject
;
; William in his room
IntrusionWilliamRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10170 ; "Isn't the wallpaper in here disgusting!", protested
; William
 dc.b animate,3
 dc.w reachleftanimation+west ; reach west
 dc.b animate,3
 dc.w reachrightanimation+east ; reach east
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10171 ; "I always hated green," William droned on
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Robert in his room
IntrusionRobertRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 10180 ; "Well, Sam", began Sir Robert
 dc.b animateCD,3
 dc.w reachleftanimation ; reach up
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10181 ; "I hope you're finding it pleasant working here,"
; continued Sir Robert
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,14
 dc.w reachleftanimation ; reach up
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,anger
 dc.w 10182 ; "And I'm sure you're too busy to hang around here all day", 
; snapped Sir Robert
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Fiona in her bedroom
IntrusionFionaRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10190 ; "What are you doing snooping around in my bedroom, Sam?" 
; sniffed Fiona
 dc.b animateCD,14
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10191 ; "If you insist on staying here, then I'll choose to 
; ignore you!", snapped Fiona
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Clifford in his bedroom
IntrusionCliffordRoom
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,emphasis+portrait
 dc.w 10200 ; "Oh, I do hope my wife hasn't been yelling at you too, 
; Sam", droned Clifford
 dc.b animateCD,14
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10201 ; "Fiona's in one of her moods today," shrugged Clifford, 
; "You'd be better off keeping out of her way"
 dc.b racetrackreturn,0,nullobject,nullobject
;
; Jarvis in entrance hall
IntrusionJarvisRoom
 dc.b Rconditional,0,84,nullobject ; main hall?
 dc.w WRtGoto,IJR1-list5
 dc.b Rconditional,0,86,nullobject ; entrance hall?
 dc.w WRtGoto,IJR1-list5
 dc.b racetrackreturn,0,nullobject,nullobject
IJR1
 dc.b find,local,user,nullobject
 dc.b racetrackmessage,anger+portrait
 dc.w 10210 ; "The doorbell hasn't stopped ringing today," moaned 
; Jarvis
 dc.b animateCD,14
 dc.w reachleftanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b animateCD,3
 dc.w reachrightanimation ; reach out
 dc.b facenoun1,0,user,nullobject
 dc.b racetrackmessage,emphasis
 dc.w 10211 ; "Between you and me," continued Jarvis, "I'm getting 
; pig-sick of all this running around!"
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; ----------------------------------------------------------------- 
;   STANDARD RACETRACKS FOR USE WHEN SPECIAL ONES RUN OUT...  
; -----------------------------------------------------------------
; 
RobertStandardLoopRT ; For ever 
 dc.w WRtGosub,RobertStandardRT-list5
 dc.w WRtGoto,RobertStandardLoopRT-list5
; 
RobertStandardRT     ; Just once 
 dc.w WRtGosub,RobertPatrolsGardenRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
WilliamStandardLoopRT ; For ever 
 dc.w WRtGosub,WilliamStandardRT-list5
 dc.w WRtGoto,WilliamStandardLoopRT-list5
; 
WilliamStandardRT     ; Just once 
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read books in library  
 dc.w WRtGosub,WhisperToKathyRT-list5 ; whisper to Kathy 
 dc.w WRtGosub,SearchHouseRT-list5 ; search house 
 dc.w WRtGosub,WilliamMeetsKathyInGardenRT-list5 ; meet Kathy in Garden 
 dc.w WRtGosub,WhisperToFionaRT-list5 ; whisper to Fiona 
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read books in library  
 dc.w WRtGosub,WilliamMeetsFionaInShedRT-list5 ; meet Fiona in Shed 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
KathyStandardLoopRT ; For ever 
 dc.w WRtGosub,KathyStandardRT-list5
 dc.w WRtGoto,KathyStandardLoopRT-list5
; 
KathyStandardRT     ; Just once 
 dc.w WRTgosub,drawingRT-list5 ; for now, drink in drawing room 
 dc.b go,0,90,nullobject ; go blue bedroom 
 dc.b open,0,Wardrobe,nullobject 
 dc.w Wwaitforperiod,10
 dc.b animate,28
 dc.w PourAnimation
 dc.w Wwaitforperiod,10
 dc.b close,0,Wardrobe,nullobject 
 dc.b iSIT,0,nullobject,nullobject
 dc.w Wwaitforperiod,100
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
AnthonyStandardLoopRT ; For ever 
 dc.w WRtGosub,AnthonyStandardRT-list5
 dc.w WRtGoto,AnthonyStandardLoopRT-list5
; 
AnthonyStandardRT     ; Just once 
 dc.w WRtGosub,pmstudyrt-list5
 dc.w WRtGosub,pmdrawingrt-list5
 dc.w WRtGosub,pmlibraryrt-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
FionaStandardLoopRT ; For ever 
 dc.b Conditional,0,ActorDead,Clifford 
 dc.w WRtGoto,wsCliffordDead-list5 
 dc.b ifollow,0,Clifford,nullobject ; follow Clifford 
 dc.b Conditional,0,ActorDead,Clifford 
 dc.w WRtGoto,wsCliffordDead-list5 
 dc.w WActorSingleMessage,11046 ; whispered to Clifford (11041-9) 
 dc.w WRTgosub,MoveMouthEmphasisRT-list5  
 dc.b TeleGosub,Clifford
 dc.w FaceFionaRT-list5 
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read books in library  
fslLoop 
 dc.w WRTgosub,FionaAndCliffordMeetingRT-list5  
 dc.w WRtGoto,fslLoop-list5 
; 
wsCliffordDead 
 dc.w WRtGosub,ReadInLibraryRT-list5 ; read books in library  
 dc.w WRtGoto,wsCliffordDead-list5 
; 
; --- 
; 
CliffordStandardLoopRT ; For ever 
 dc.w WRtGosub,CliffordStandardRT-list5
 dc.w WRtGoto,CliffordStandardLoopRT-list5
; 
CliffordStandardRT     ; Just once 
 dc.b go,0,90,nullobject ; go blue bedroom 
 dc.b iSIT,0,nullobject,nullobject
 dc.w Wwaitforperiod,200
 dc.b find,coarse,window,nullobject ; walk to window 
 dc.w Wwaitforperiod,50
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
JarvisStandardLoopRT ; For ever 
 dc.w WRtGosub,JarvisStandardRT-list5
 dc.w WRtGoto,JarvisStandardLoopRT-list5
; 
JarvisStandardRT     ; Just once 
 dc.w WRtGosub,DustHouseRT-list5
 dc.w WRtMessage,15100 ; switch on Jarvis' tray animation
 dc.w WRtGosub,JarvisOffersDrinksRT-list5
 dc.w WRtMessage,15101 ; switch off Jarvis' tray animation
 dc.w WRtGosub,LeftGardenRT-list5
 dc.w WRtGosub,WaterAllPlantsRT-list5
 dc.w WRtGosub,RightGardenRT-list5
 dc.w WRtGosub,JarvisReadsInKitchenRT-list5
 dc.w WRtGosub,JarvisReadsInKitchenRT-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
VeraStandardLoopRT ; For ever 
 dc.w WRtGosub,VeraStandardRT-list5
 dc.w WRtGoto,VeraStandardLoopRT-list5
; 
VeraStandardRT     ; Just once 
 dc.w WRtGosub,VeraInKitchen3-list5
 dc.w WRtGosub,VeraInKitchen4-list5 ; do washing up in kitchen
 dc.w WRtGosub,VeraGoesPantry-list5 ; inspect food in pantry
 dc.w WRtGosub,VeraGoesHerbGarden-list5 ; pick herbs in garden
 dc.w WRtGosub,VeraGoesArchway-list5 ; go archway
 dc.w WRtGosub,VeraDrinksInGatehouse-list5 ; drink tea in gatehouse
 dc.w WRtGosub,VeraGoesToilet-list5 ; go upstairs loo
 dc.w WRtGosub,VeraReadsInBedroom-list5 ; go upstairs loo
 dc.b racetrackreturn,0,nullobject,nullobject
; 
VeraGoesArchway
 dc.b go,0,45,nullobject ; go archway
 dc.b Examine,0,bin,nullobject ; examine dustbins
 dc.w WRtGosub,Reach3TimesRT-list5
 dc.b Examine,0,window,nullobject ; examine window
 dc.w WRtGosub,Reach3TimesRT-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
VeraDrinksIngateHouse
 dc.b go,0,50,nullobject ; go gatehouse kitchen
 dc.b find,0,stove,nullobject ; go to stove
 dc.b ActorSingleMessage,emphasis
 dc.w 15090 ; boiled the kettle
 dc.w WRtGosub,Reach3TimesRT-list5
 dc.w Wwaitforperiod,100
 dc.w WRtGosub,Reach3TimesRT-list5
 dc.w Wwaitforperiod,100
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WActorSingleMessage,15091 ; Vera sat drinking a cup of tea
 dc.b animateCD,8
 dc.w SitDrinkAni
 dc.w Wwaitforperiod,100
 dc.b racetrackreturn,0,nullobject,nullobject
; 
VeraGoesToilet
 dc.b go,0,84,nullobject ; go landing
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtGoto,ToiletRt-list5 ; use standard toilet rt
; 
VeraReadsInBedroom
 dc.b go,0,53,nullobject ; go bedroom
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.w WRtGosub,READN12timesRT-list5 ; read 12 times in current dirn. 
 dc.w WRtGosub,READN12timesRT-list5 ; read 12 times in current dirn. 
 dc.w WRtGosub,READN12timesRT-list5 ; read 12 times in current dirn. 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
VeraGoesHerbGarden
 dc.b go,0,82,nullobject ; go via scullery to avoid F/P breaks
 dc.b go,0,40,nullobject ; go herb garden
 dc.w WRtGosub,Wait200orSam-list5
 dc.w WRtGoto,VeraPicksWeed1-list5 ; pick herbs in garden
;
VeraGoesPantry
 dc.b go,0,78,nullobject ; go pantry
 dc.w WRtGosub,Wait200orSam-list5
 dc.b Examine,0,shelves,nullobject ; examine shelves
 dc.w WRtGosub,Reach3TimesRT-list5
 dc.b Examine,0,sack,nullobject ; examine sack
 dc.w WRtGosub,Reach4TimesRT-list5
 dc.w WRtGosub,Reach4TimesRT-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
SueStandardLoopRT ; For ever 
 dc.w WRtGosub,SueStandardRT-list5 ; read books in library  
 dc.w WRtGoto,SueStandardLoopRT-list5
; 
SueStandardRT     ; Just once (read book in library)
 dc.w WRTgosub,ReadInLibraryRT-list5  
 dc.b find,coarse,window,nullobject ; walk to window 
 dc.w Wwaitforperiod,50
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
InspectorStandardLoopRT ; For ever 
 dc.w WRtGosub,InspectorStandardRT-list5
 dc.w WRtGoto,InspectorStandardLoopRT-list5
; 
InspectorStandardRT     ; Just once 
 dc.w WRtGosub,SearchDownstairsRoomsRT-list5
 dc.w WRtGosub,toiletrt-list5
 dc.w WRtGosub,SearchUpstairsRoomsRT-list5
 dc.w WRtGosub,SearchLodgeRoomsRT-list5
 dc.w WRtGosub,libraryrt-list5
 dc.w WRtGosub,studyrt-list5
 dc.w WRtGosub,drawingrt-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; ----------------------------------------------------------------- 
;   END OF STANDARD RACETRACKS (FOR WHEN SPECIAL ONES RUN OUT)...  
; -----------------------------------------------------------------
; 
; Sir Robert patrols the gardens with his gun, searching out signs 
; that outsiders have crept in and murdered someone. 
; 
RobertPatrolsGardenRT; 
 dc.b go,0,47,nullobject  ; go to Front of House 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,5,nullobject   ; go to Front Left Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,44,nullobject  ; go to Left Side Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,46,nullobject  ; go to Back Left Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,48,nullobject  ; go to Back of House 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,42,nullobject  ; go to Back Right Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,37,nullobject  ; go to Shed 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b go,0,40,nullobject  ; go to Right Side Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,78,nullobject  ; go to Scullery 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b go,0,80,nullobject  ; go to Kitchen 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b go,0,39,nullobject  ; go to Front Right Garden 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,43,nullobject  ; go to Lawn 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,36,nullobject  ; go to Lawn+Bushes 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,45,nullobject  ; go to Archway 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,50,nullobject  ; go to GatehouseKitchen 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b go,0,29,nullobject  ; go to Driveway 
 dc.w WRTgosub,rpgGuardGardenLocnRT-list5 
 dc.b go,0,86,nullobject  ; go to Entrance Hall 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b go,0,83,nullobject  ; go to Main Hall 
 dc.w WRTgosub,rpgGuardHouseLocnRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
rpgGuardGardenLocnRT
 dc.b animate,1
 dc.w StandingAnimation+West  
 dc.w Wwaitforperiod,30    
 dc.b conditional,1,random,7
 dc.w WRTgosub,rpgNWrt-list5
 dc.b animate,1
 dc.w StandingAnimation+South 
 dc.w Wwaitforperiod,20    
 dc.b conditional,1,random,7
 dc.w WRTgosub,rpgSErt-list5
 dc.b animate,1
 dc.w StandingAnimation+North
 dc.w Wwaitforperiod,30    
 dc.b conditional,1,random,7
 dc.w WRTgosub,rpgNErt-list5
 dc.b animate,1
 dc.w StandingAnimation+East   
 dc.w Wwaitforperiod,20    
 dc.b conditional,1,random,7
 dc.w WRTgosub,rpgSWrt-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
rpgGuardHouseLocnRT
 dc.b conditional,1,random,7
 dc.w WRtActorVaryMessage,11075
 dc.w Wwaitforperiod,20   
 dc.b racetrackreturn,0,nullobject,nullobject
; 
rpgNWrt 
 dc.b localmove,0,6,8
 dc.w WRtGoto,rpgAimGunRT-list5
rpgNErt 
 dc.b localmove,0,14,8 
 dc.w WRtGoto,rpgAimGunRT-list5
rpgSWrt 
 dc.b localmove,0,6,10 
 dc.w WRtGoto,rpgAimGunRT-list5
rpgSErt 
 dc.b localmove,0,14,10 
rpgAimGunRT
 dc.w WRTgosub,reach2timesRT-list5 
 dc.b conditional,1,random,7
 dc.w WRtActorVaryMessage,11070
 dc.b conditional,1,random,31 
 dc.b racetrackmessage,emphasis+SamAdjacent
 dc.w 11080 ; Sam heard a gunshot. 
 dc.w Wwaitforperiod,20   
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
;
; William whispers to Kathy to arrange a subsequent meeting... 
WhisperToKathyRT; whisper to Kathy 
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11042                       ; whispered to Kathy 
 dc.b TeleGosub,Kathy 
 dc.w FaceWilliamRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; William whispers to Fiona to arrange a subsequent meeting... 
WhisperToFionaRT ; whisper to Fiona 
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11044                       ; whispered to Fiona 
 dc.b TeleGosub,Fiona 
 dc.w FaceWilliamRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
;
; William meets Kathy in the Garden... 
WilliamMeetsKathyInGardenRT ; meet Kathy in Garden 
 dc.b TeleGosub,Kathy 
 dc.w MeetWilliamInGardenRT-list5 
 dc.b go,0,48,nullobject                 ; go to Back of House 
 dc.b waitforperson,0,Kathy,nullobject   ; Wait for William 
 dc.b find,0,Kathy,nullobject            ; walk to Kathy 
 dc.b FaceNoun1,0,Kathy,NullObject 
 dc.w Wwaitforperiod,10
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11085                              ; said something to Kathy 
 dc.w Wwaitforperiod,20 
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11087                              ; hissed a reply
 dc.b racetrackreturn,0,nullobject,nullobject
; 
MeetWilliamInGardenRT 
 dc.b go,0,48,nullobject                 ; go to Back of House 
 dc.b waitforperson,0,William,nullobject ; Wait for William 
 dc.b find,0,William,nullobject          ; walk to William 
 dc.b FaceNoun1,0,William,NullObject 
 dc.w Wwaitforperiod,20
 dc.b ActorSingleMessage,Shock
 dc.w 11086                       ; seemed not to believe him
 dc.w Wwaitforperiod,20
 dc.b ActorSingleMessage,Anger
 dc.w 11088                       ; looked worried 
 dc.w Wwaitforperiod,20
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
;
; William meets Fiona in the Shed... 
WilliamMeetsFionaInShedRT ; meet Fiona in Shed 
 dc.b TeleGosub,Fiona 
 dc.w MeetWilliamInShedRT-list5 
 dc.b go,0,37,nullobject                 ; go to Shed 
 dc.b waitforperson,0,Fiona,nullobject   ; Wait for Fiona 
 dc.b find,0,Fiona,nullobject            ; walk to Fiona 
 dc.b FaceNoun1,0,Fiona,NullObject 
 dc.w Wwaitforperiod,10
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11090                              ; said something to Fiona 
 dc.w Wwaitforperiod,20 
 dc.b ActorSingleMessage,Emphasis 
 dc.w 11092                              ; hissed a reply
 dc.b racetrackreturn,0,nullobject,nullobject
; 
MeetWilliamInShedRT 
 dc.b go,0,37,nullobject                 ; go to Shed 
 dc.b waitforperson,0,William,nullobject ; Wait for William 
 dc.b find,0,William,nullobject          ; walk to William 
 dc.b FaceNoun1,0,William,NullObject 
 dc.w Wwaitforperiod,20
 dc.b ActorSingleMessage,Shock
 dc.w 11091                       ; seemed not to believe him
 dc.w Wwaitforperiod,20
 dc.b ActorSingleMessage,Anger
 dc.w 11093                       ; looked worried 
 dc.w Wwaitforperiod,20
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
;
; Actor wanders around the house, searching each major room...  
SearchHouseRT ; search house 
 dc.b go,0,83,nullobject                 ; go to Entrance Hall 
 dc.b iSIT,0,nullobject,nullobject
 dc.w WRTGosub,READN3timesRT-list5 
 dc.w WRTGosub,READN3timesRT-list5 
 dc.b go,0,83,nullobject                 ; go to Dining Room 
 dc.b iSIT,0,nullobject,nullobject
 dc.w Wwaitforperiod,20
 dc.b go,0,83,nullobject                 ; go to Kitchen  
 dc.b find,coarse,sink,nullobject             ; walk to sink 
 dc.w WRTGosub,Reach2timesRT-list5 
 dc.b go,0,82,nullobject                 ; go to Scullery 
 dc.b go,0,69,nullobject                 ; go to Servants' Stairs 
 dc.w WRTGosub,Reach2timesRT-list5 
 dc.b go,0,93,nullobject                 ; go to Green Bedroom 
 dc.b iSIT,0,nullobject,nullobject
 dc.w Wwaitforperiod,40
 dc.b go,0,90,nullobject                 ; go to Blue Bedroom 
 dc.b find,coarse,window,nullobject           ; walk to window 
 dc.w WRTGosub,Reach2timesRT-list5 
 dc.b go,0,74,nullobject                 ; go to Corridor 
 dc.b go,0,97,nullobject                 ; go to Oriental B
 dc.b iSIT,0,nullobject,nullobject
 dc.w Wwaitforperiod,40
 dc.b go,0,94,nullobject                 ; go to Master B
 dc.b find,coarse,window,nullobject           ; walk to window 
 dc.w Wwaitforperiod,40
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
; Fiona and Clifford have an extensive secret meeting, moving from 
; room to room if interrupted by User... 
; 
FionaAndCliffordMeetingRT 
facmFionaToGamesRoom
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordToGamesRoom-list5 
 dc.b go,0,85,nullobject                     ; go to Games Room 
 dc.w Wwaitforperiod,20   
 dc.b conditional,0,User,nullobject        ; If User here, 
 dc.w WRtGoto,facmFionaToCloakRoom-list5   ; goto Cloakroom 
 dc.b waitforperson,0,Clifford,nullobject    ; Sit and wait for Clifford 
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,emphasis
 dc.w 11051 ; Fiona whispered something to Clifford... 
facmFionaToCloakRoom 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordToCloakRoom-list5 
 dc.w Wwaitforperiod,5  
 dc.b go,0,64,nullobject                     ; go to Cloak Room 
 dc.w Wwaitforperiod,20   
 dc.b conditional,0,User,nullobject        ; If User here, 
 dc.w WRtGoto,facmFionaComplainsToLarder-list5 ; goto Cloakroom 
 dc.b waitforperson,0,Clifford,nullobject    ; Sit and wait for Clifford 
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,emphasis
 dc.w 11054 ; "And I don't trust him either..." 
 dc.w WRtGoto,facmFionaToLarder-list5        ; goto Larder
facmFionaComplainsToLarder 
 dc.b racetrackmessage,emphasis
 dc.w 11056 ; "How dare you follow us!..." 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordQuietlyToLarder-list5 
 dc.w WRtGoto,facmFionaGoesToLarder-list5 
facmFionaToLarder 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordToLarder-list5 
facmFionaGoesToLarder 
 dc.w Wwaitforperiod,5  
 dc.b go,0,78,nullobject                     ; go to Larder 
 dc.w Wwaitforperiod,20   
 dc.b conditional,0,User,nullobject        ; If User here, 
 dc.w WRtGoto,facmFionaComplainsToBlue-list5 ; goto Cloakroom 
 dc.b waitforperson,0,Clifford,nullobject    ; Sit and wait for Clifford 
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,emphasis
 dc.w 11057 ; "The sooner he's dead the better..." 
 dc.w WRtGoto,facmFionaToBlue-list5          ; goto Blue Bedroom 
facmFionaComplainsToBlue 
 dc.b racetrackmessage,emphasis
 dc.w 11059 ; "How dare you follow us!..." 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordQuietlyToBlue-list5 
 dc.w WRtGoto,facmFionaGoesToBlue-list5 
facmFionaToBlue 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordToBlue-list5 
facmFionaGoesToBlue 
 dc.w Wwaitforperiod,5  
 dc.b go,0,90,nullobject                     ; go to Blue Bedroom 
 dc.b find,coarse,Ssofa,nullobject                ; walk to a sofa  
 dc.b conditional,0,User,nullobject        ; If User here, 
 dc.w WRtGoto,facmFionaComplainsToDining-list5 ; goto Cloakroom 
 dc.b iSIT,0,nullobject,nullobject
 dc.b waitforperson,0,Clifford,nullobject    ; Sit and wait for Clifford 
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,emphasis
 dc.w 11060 ; Fiona's words were too quiet to hear. 
 dc.w WRtGoto,facmFionaToDining-list5        ; goto Dining
facmFionaComplainsToDining 
 dc.b racetrackmessage,emphasis
 dc.w 11062 ; "How dare you follow us!..." 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordQuietlyToDining-list5 
 dc.w WRtGoto,facmFionaGoesToDining-list5 
facmFionaToDining 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordToDining-list5 
facmFionaGoesToDining 
 dc.w Wwaitforperiod,5  
 dc.b go,0,77,nullobject                     ; go to Dining Room 
;;?? dc.b find,0,chair,nullobject            ; walk to a chair 
 dc.b conditional,0,User,nullobject        ; If User here, 
 dc.w WRtGoto,facmFionaComplainsToGamesRoom-list5 ; goto Cloakroom 
 dc.b iSIT,0,nullobject,nullobject
 dc.b waitforperson,0,Clifford,nullobject    ; Sit and wait for Clifford 
 dc.w WRtGosub,Wait200orSam-list5
 dc.b racetrackmessage,emphasis
 dc.w 11063 ; "Just wait a little longer and we'll be rich..." 
 dc.w WRtGoto,facmFionaToGamesRoom-list5     ; goto GamesRoom
facmFionaComplainsToGamesRoom 
 dc.b racetrackmessage,emphasis
 dc.w 11065 ; "How dare you follow us!..." 
 dc.b TeleGoto,Clifford 
 dc.w facmCliffordQuietlyToGamesRoom-list5 
 dc.w WRtGoto,facmFionaToGamesRoom-list5 
; 
facmCliffordToGamesRoom 
facmCliffordQuietlyToGamesRoom 
 dc.w Wwaitforperiod,20 
 dc.b go,0,85,nullobject                     ; go to Games Room 
 dc.w WrtGoto,WaitForEverRT-list5     ; wait forever 
facmCliffordToCloakroom 
 dc.b racetrackmessage,emphasis
 dc.w 11055 ; "Watch out! Sam's listening..." 
facmCliffordQuietlyToCloakroom 
 dc.w Wwaitforperiod,20 
 dc.b go,0,64,nullobject                     ; go to CloakRoom 
 dc.w WrtGoto,WaitForEverRT-list5     ; wait forever 
facmCliffordToLarder 
 dc.b racetrackmessage,emphasis
 dc.w 11058 ; "Watch out! Sam's listening..." 
facmCliffordQuietlyToLarder 
 dc.w Wwaitforperiod,20 
 dc.b go,0,78,nullobject                     ; go to Larder 
 dc.w WrtGoto,WaitForEverRT-list5     ; wait forever 
facmCliffordToBlue
 dc.b racetrackmessage,emphasis
 dc.w 11061 ; "Watch out! Sam's listening..." 
facmCliffordQuietlyToBlue
 dc.w Wwaitforperiod,20 
 dc.b go,0,90,nullobject                     ; go to Blue Bedroom 
 dc.b iSIT,0,nullobject,nullobject
 dc.w WrtGoto,WaitForEverRT-list5     ; wait forever 
facmCliffordToDining 
 dc.b racetrackmessage,emphasis
 dc.w 11064 ; "Watch out! Sam's listening..." 
facmCliffordQuietlyToDining 
 dc.w Wwaitforperiod,20 
 dc.b go,0,77,nullobject                     ; go to DiningRoom 
 dc.b iSIT,0,nullobject,nullobject
 dc.w WrtGoto,WaitForEverRT-list5     ; wait forever 
; 
; -----------------------------------------------------------------
; 
ReadInLibraryRT     ; Read one book in library
 dc.b go,0,88,nullobject ; go library
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.w WRTgosub,reachUp4TimesRT-list5 
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.w WActorSingleMessage,rtmess+600 ; searched through the books
 dc.w WRTgosub,ReachUp4TimesRT-list5 
 dc.w WActorSingleMessage,rtmess+603 ; blew the dust off the book
; sit with nullobject finds nearest chair/sofa
 dc.b iSIT,0,nullobject,nullobject
 dc.w WRtGosub,Read12timesRT-list5 ; read 12 times in current dirn. 
 dc.w WRtGosub,Read12timesRT-list5 ; read 12 times in current dirn. 
 dc.w WRtGosub,Read12timesRT-list5 ; read 12 times in current dirn. 
 dc.b find,0,bookcase,nullobject ; walk to rear right bookcase
 dc.w WActorSingleMessage,rtmess+606 ; put back the book
 dc.w WRTgosub,ReachUp1TimesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
JarvisReadsInKitchenRT  
 dc.b go,0,50,nullobject        ; go to Gatehouse Kitchen 
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.w WRTGosub,Read3timesRT-list5 
 dc.w WRTGosub,Read3timesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; Water all the houseplants which are reasonably easily accessible 
; in the game... 
WaterAllplantsRT 
 dc.b go,0,50,nullobject        ; go to Gatehouse Kitchen 
 dc.b find,0,sink,nullobject    ; find sink 
 dc.w WActorSingleMessage,11030 ; filled something in the sink 
 dc.b go,0,53,nullobject        ; go to Gatehouse Bedroom 
 dc.b find,coarse,window,nullobject  ; find window 
 dc.w WRtGosub,WaterSomethingRT-list5
 dc.b go,0,50,nullobject        ; go to Gatehouse Kitchen 
 dc.b find,0,sink,nullobject    ; find sink 
 dc.w WActorSingleMessage,11030 ; filled something in the sink 
 dc.b go,0,74,nullobject        ; go to NW corridor 
 dc.b find,0,plant,nullobject   ; find plant 
 dc.w WRtGosub,WaterPlantRT-list5
 dc.b go,0,76,nullobject        ; go to Downstairs corridor 
 dc.b find,0,plant,nullobject   ; find plant 
 dc.w WRtGosub,WaterPlantRT-list5
 dc.b go,0,50,nullobject        ; go to Gatehouse Kitchen 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
WaterPlantRT 
 dc.b find,0,plant,nullobject    ; find plant 
 dc.w WActorSingleMessage,11031  ; watered the plant 
WaterSomethingRT 
 dc.b animateCD,3
 dc.w ReachRightAnimation 
 dc.w Wwaitforperiod,5
 dc.b animateCD,3
 dc.w ReachRightAnimation 
 dc.w Wwaitforperiod,5
 dc.b animateCD,3
 dc.w ReachRightAnimation  
 dc.w Wwaitforperiod,5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; -----------------------------------------------------------------
; 
; Dust a reasonable slice of the house. Note that I am unsure how 
; racetrack logic will react to locked rooms etc, so I have made 
; sure that it won't matter if the go commands for private bedrooms 
; are not acted upon. Pete 27/4/90. 
DustHouseRT 
 dc.b conditional,0,actoralive,william ; william dies in room 93
 dc.b go,0,93,nullobject ; go to NW Corridor 
 dc.b conditional,0,actoralive,william ; william dies in room 93
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,97,nullobject ; go to Anthony's Oriental Bedroom 
 dc.w WRtGosub,PolishAllBedroomFurnitureRT-list5
 dc.b go,0,90,nullobject ; go to Blue Bedroom 
 dc.w WRtGosub,PolishAllBedroomFurnitureRT-list5
 dc.b conditional,0,actoralive,william ; william dies in room 93
 dc.b go,0,93,nullobject ; go east to William/Kathy's Green Bedroom 
 dc.b conditional,0,actoralive,william ; william dies in room 93
 dc.w WRtGosub,PolishAllBedroomFurnitureRT-list5
 dc.b go,0,71,nullobject ; go to NE Corridor 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,91,nullobject ; go to Fiona/Clifford's Brown Bedroom 
 dc.w WRtGosub,PolishAllBedroomFurnitureRT-list5
 dc.b go,0,72,nullobject ; go to SE Corridor 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,94,nullobject ; go to Robert's Master Bedroom 
 dc.w WRtGosub,PolishAllBedroomFurnitureRT-list5
 dc.b go,0,86,nullobject ; go to Entrance Hall 
 dc.b go,0,88,nullobject ; go to Library 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,79,nullobject ; go to Drawing Room 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,81,nullobject ; go to Study 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,81,nullobject ; go to Dining Room 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b go,0,85,nullobject ; go to Games Room 
 dc.w WRtGosub,PolishAllFurnitureRT-list5
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; ----------------------------------------------------------------- 
; 
JarvisOffersDrinksRT 
 dc.b Conditional,0,ActorDead,Robert 
 dc.w WRtGoto,jodRobertDead-list5 
 dc.b ifollow,0,Robert,nullobject ; follow Robert 
 dc.b Conditional,0,ActorDead,Robert 
 dc.w WRtGoto,jodManDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11000                       ; Would you like a drink, Sir? 
 dc.b TeleGosub,Robert 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11001            ; Robert said, "No thank you" 
 dc.b TeleGosub,Robert
 dc.w MoveMouthEmphasisRT-list5         
jodRobertDead
 dc.b Conditional,0,ActorDead,William 
 dc.w WRtGoto,jodWilliamDead-list5 
 dc.b ifollow,0,William,nullobject ; follow William 
 dc.b Conditional,0,ActorDead,William 
 dc.w WRtGoto,jodManDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11002                       ; How about a drink, Master William? 
 dc.b TeleGosub,William  
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11003            ; "Not for me, thank you" 
 dc.b TeleGosub,William
 dc.w MoveMouthEmphasisRT-list5         
jodWilliamDead
 dc.b Conditional,0,ActorDead,Kathy 
 dc.w WRtGoto,jodKathyDead-list5 
 dc.b ifollow,0,Kathy,nullobject ; follow Kathy 
 dc.b Conditional,0,ActorDead,Kathy 
 dc.w WRtGoto,jodWomanDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11004                       ; Another drink, madam?
 dc.b TeleGosub,Kathy 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11005            ; Kathy said she had had enough
 dc.b TeleGosub,Kathy
 dc.w MoveMouthEmphasisRT-list5         
jodKathyDead
 dc.b Conditional,0,ActorDead,Anthony 
 dc.w WRtGoto,jodAnthonyDead-list5 
 dc.b ifollow,0,Anthony,nullobject ; follow Anthony 
 dc.b Conditional,0,ActorDead,Anthony 
 dc.w WRtGoto,jodManDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11006                       ; Some more of your father's wine?
 dc.w WRTmessage,11007            ; Anthony ignored him
jodAnthonyDead
 dc.b Conditional,0,ActorDead,Fiona 
 dc.w WRtGoto,jodFionaDead-list5 
 dc.b ifollow,0,Fiona,nullobject ; follow Fiona 
 dc.b Conditional,0,ActorDead,Fiona 
 dc.w WRtGoto,jodWomanDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11008                       ; Drinkies, modom? 
 dc.b TeleGosub,Fiona 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11009            ; Fiona loudly refused 
 dc.b TeleGosub,Fiona
 dc.w MoveMouthEmphasisRT-list5         
jodFionaDead
 dc.b Conditional,0,ActorDead,Clifford 
 dc.w WRtGoto,jodCliffordDead-list5 
 dc.b ifollow,0,Clifford,nullobject ; follow Clifford 
 dc.b Conditional,0,ActorDead,Clifford 
 dc.w WRtGoto,jodManDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11010                       ; More lubrication, sir? 
 dc.b TeleGosub,Clifford 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11011            ; Clifford quietly refused 
 dc.b TeleGosub,Clifford
 dc.w MoveMouthEmphasisRT-list5         
jodCliffordDead
 dc.b Conditional,0,ActorDead,Sue 
 dc.w WRtGoto,jodSueDead-list5 
 dc.b ifollow,0,Sue,nullobject ; follow Sue 
 dc.b Conditional,0,ActorDead,Sue 
 dc.w WRtGoto,jodWomanDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11012                       ; Something to drink, Miss? 
 dc.b TeleGosub,Sue 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11013            ; Sue whispered, "No" 
 dc.b TeleGosub,Sue
 dc.w MoveMouthEmphasisRT-list5         
jodSueDead
 dc.b Conditional,0,ActorDead,Inspector 
 dc.w WRtGoto,jodInspectorDead-list5 
 dc.b ifollow,0,Inspector,nullobject ; follow Inspector 
 dc.b Conditional,0,ActorDead,Inspector 
 dc.w WRtGoto,jodManDead-list5 
 dc.b ActorSaidSingleMessage,Emphasis 
 dc.w 11014                       ; Would you like some refreshment? 
 dc.b TeleGosub,Inspector 
 dc.w FaceJarvisRT-list5 
 dc.w WRTmessage,11015            ; "Not while I'm on duty" 
 dc.b TeleGosub,Inspector
 dc.w MoveMouthEmphasisRT-list5         
jodInspectorDead
 dc.b racetrackreturn,0,nullobject,nullobject
; Jarvis has now offered drinks to everyone except Sam and Vera. 
; 
jodManDead 
 dc.b ActorSaidSingleMessage,Shock+Portrait 
 dc.w 11020                      ; Oh my God, he's dead! 
 dc.b racetrackreturn,0,nullobject,nullobject
;
jodWomanDead 
 dc.b ActorSaidSingleMessage,Shock+Portrait 
 dc.w 11021                      ; Oh my God, she's dead! 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; --- 
; 
; Actor (e.g Inspector) wanders around the house, examining all the 
; furniture and making notes  
SearchDownstairsRoomsRT
 dc.b go,0,83,nullobject ; go to Hall  
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,64,nullobject ; go to Cloakroom 
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,65,nullobject ; go to Washroom 
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,77,nullobject ; go to Dining Room 
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,80,nullobject ; go to Kitchen  
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,78,nullobject ; go to Larder  
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,80,nullobject 
 dc.b go,0,81,nullobject ; go to Study   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,79,nullobject ; go to Drawing Room   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,88,nullobject ; go to Library   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,85,nullobject ; go to Games Room   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,86,nullobject ; go to Entrance Hall   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
SearchUpstairsRoomsRT
 dc.b go,0,92,nullobject ; go to Bamboo Bedroom  
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,97,nullobject ; go to Oriental Bedroom   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,90,nullobject ; go to Blue Bedroom    
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,74,nullobject   
 dc.b go,0,93,nullobject ; go to Green Bedroom 
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,91,nullobject ; go to Master Bedroom   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,94,nullobject ; go to Dressing Room 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
SearchLodgeRoomsRT
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,50,nullobject ; go to Lodge Kitchen  
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,52,nullobject ; go to Lodge Bathroom   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b go,0,83,nullobject ; go to Jarvis/Vera's Bedroom   
 dc.w WRtGosub,SearchRoomRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
SearchRoomRT
 dc.b Conditional,0,Wardrobe,Nullobject 
 dc.w WRtGosub,SearchRoomWardrobeRT-list5 
 dc.b Conditional,0,Chest,Nullobject 
 dc.w WRtGosub,SearchRoomChestRT-list5 
 dc.b Conditional,0,Table,Nullobject 
 dc.w WRtGosub,SearchRoomTableRT-list5 
 dc.b Conditional,0,BookCase,Nullobject 
 dc.w WRtGosub,SearchRoomBookcaseRT-list5 
 dc.b Conditional,0,Window,Nullobject 
 dc.w WRtGosub,SearchRoomWindowRT-list5 
 dc.b Conditional,0,Shelves,Nullobject 
 dc.w WRtGosub,SearchRoomShelvesRT-list5 
 dc.b Conditional,0,NChair,Nullobject 
 dc.w WRtGoto,SearchRoomSitRT-list5 
 dc.b Conditional,0,SChair,Nullobject 
 dc.w WRtGoto,SearchRoomSitRT-list5 
 dc.b Conditional,0,EWSofa,Nullobject 
 dc.w WRtGoto,SearchRoomSitRT-list5 
 dc.b Conditional,0,Bed,Nullobject 
 dc.w WRtGoto,SearchRoomSitRT-list5 
srReturnRT
 dc.b racetrackreturn,0,nullobject,nullobject
; 
SearchRoomWardrobeRT
 dc.b open,0,Wardrobe,nullobject 
 dc.w Wwaitforperiod,10
 dc.b close,0,Wardrobe,nullobject 
 dc.w Wwaitforperiod,10
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomChestRT
 dc.b open,0,Chest,nullobject 
 dc.w Wwaitforperiod,10
 dc.b close,0,Chest,nullobject 
 dc.w Wwaitforperiod,10
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomTableRT
 dc.b find,coarse,Table,nullobject
 dc.w WRtGosub,Reach2timesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomBookcaseRT
 dc.b find,0,bookcase,nullobject
 dc.w WRtGosub,ReachUp2timesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomWindowRT
 dc.b find,coarse,Window,nullobject
 dc.w WRtGosub,Reach2timesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomShelvesRT
 dc.b find,coarse,Shelves,nullobject
 dc.w WRtGosub,reach2timesRT-list5 
 dc.b racetrackreturn,0,nullobject,nullobject
SearchRoomSitRT
 dc.b iSIT,0,nullobject,nullobject ; sit on a vacant chair
 dc.w WRtGosub,Read1timesRT-List5 
 dc.w WRtGoto,srReturnRT-list5 
;
; -----------------------------------------------------------------
; RACETRACK SUBROUTINES FOR SIMPLE COMMON ACTIVITIES... 
; -----------------------------------------------------------------
; 
; Actor cleans any window in room (make sure there is one!) 
CleanWindowRT 
 dc.b find,coarse,window,nullobject
 dc.w WActorSingleMessage,11025 ; polished the window 
 dc.w WRtGoto,PolishUpFurnitureRT-list5 
; 
; Actor polishes any furniture in room. Ensure the room has a table, 
; or else they will polish in mid-air. If the room has less than the 
; full complement of furniture, some will get polished more than once. 
PolishAllFurnitureRT 
 dc.w WActorSingleMessage,11026 ; looked around for things to polish
 dc.b find,coarse,table,nullobject   ; assume table present 
 dc.w WRtGosub,PolishFurnitureRT-list5 
 dc.b find,coarse,chest,nullobject   ; find chest if present 
 dc.w WRtGoto,PolishFurnitureRT-list5 
; 
PolishAllBedroomFurnitureRT ; Assume Wardrobe and Table present 
 dc.w WRtGosub,PolishAllFurnitureRT-list5 
 dc.b find,coarse,window,nullobject   ; assume window present 
 dc.w WRtGosub,PolishUpFurnitureRT-list5 
 dc.b find,coarse,wardrobe,nullobject ; find wardrobe if present 
 dc.w WRtGoto,PolishUpFurnitureRT-list5 
; 
; Actor polishes the piece of furniture in front of them... 
PolishFurnitureRT 
 dc.b animateCD,3
 dc.w ReachRightAnimation 
 dc.b animateCD,3
 dc.w ReachRightAnimation 
 dc.b animateCD,3
 dc.w ReachRightAnimation  
 dc.b animateCD,3
 dc.w reachRightanimation 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
PolishUpFurnitureRT 
 dc.b animateCD,14
 dc.w ReachUpAnimation 
 dc.b animateCD,14
 dc.w ReachUpAnimation 
 dc.b animateCD,14
 dc.w ReachUpAnimation  
 dc.b animateCD,14
 dc.w reachUpAnimation 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; -----------------------------------------------------------------
; Reach 1-4 times Quickly/<default>/Slowly Racetracks...  
; 
Reach4timesQuicklyRT ; Reach four times in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; reach
Reach3timesQuicklyRT ; Reach three times in current dirn.
 dc.b animateCD,3
 dc.w ReachRightAnimation ; reach
Reach2timesQuicklyRT ; Reach two times in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation  ; reach 
Reach1timesQuicklyRT ; Reach two times in current dirn.
 dc.b animateCD,3
 dc.w reachRightanimation ; reach
 dc.b racetrackreturn,0,nullobject,nullobject
;  
Reach4timesRT ; Reach four times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; reach
 dc.w Wwaitforperiod,5
Reach3timesRT ; Reach three times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachRightAnimation ; reach
 dc.w Wwaitforperiod,5
Reach2timesRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation  ; reach 
 dc.w Wwaitforperiod,5
Reach1timesRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w reachRightanimation ; reach
 dc.w Wwaitforperiod,5 
 dc.b racetrackreturn,0,nullobject,nullobject
;  
Reach4timesSlowlyRT ; Reach four times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation ; reach
 dc.w Wwaitforperiod,20
Reach3timesSlowlyRT ; Reach three times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachRightAnimation ; reach
 dc.w Wwaitforperiod,20
Reach2timesSlowlyRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w ReachLeftAnimation  ; reach 
 dc.w Wwaitforperiod,20
Reach1timesSlowlyRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,3
 dc.w reachRightanimation ; reach
 dc.w Wwaitforperiod,20
 dc.b racetrackreturn,0,nullobject,nullobject
; 
ReachUp4timesRT ; Reach four times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachUpAnimation ; reach
 dc.w Wwaitforperiod,5
ReachUp3timesRT ; Reach three times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachUpAnimation ; reach
 dc.w Wwaitforperiod,5
ReachUp2timesRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachUpAnimation  ; reach 
 dc.w Wwaitforperiod,5
ReachUp1timesRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w reachUpAnimation ; reach
 dc.w Wwaitforperiod,5 
 dc.b racetrackreturn,0,nullobject,nullobject
;
ReachDown4timesRT ; Reach four times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachDownAnimation ; reach
 dc.w Wwaitforperiod,5
ReachDown3timesRT ; Reach three times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachDownAnimation ; reach
 dc.w Wwaitforperiod,5
ReachDown2timesRT ; Reach two times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w ReachDownAnimation  ; reach 
 dc.w Wwaitforperiod,5
ReachDown1timesRT ; Reach one times, with pauses, in current dirn.
 dc.b animateCD,14
 dc.w reachDownAnimation ; reach
 dc.w Wwaitforperiod,5 
 dc.b racetrackreturn,0,nullobject,nullobject
;  
; End of Reach 1-4 times Quickly/<default>/Slowly Racetracks...  
; -----------------------------------------------------------------
; Read 1-3 times Racetracks... 
;  
Read12timesRT ; Read 12 times, with pauses, in current direction 
 dc.w WRtGosub,Read3timesRT-list5 
 dc.w WRtGosub,Read3timesRT-list5 
 dc.w WRtGosub,Read3timesRT-list5 
; fall through to.. 
; 
Read3timesRT ; Read three times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readanimation ; read 
 dc.w Wwaitforperiod,50
Read2timesRT ; Read two times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readanimation ; read 
 dc.w Wwaitforperiod,50
Read1timesRT ; Read one times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readanimation ; read 
 dc.w Wwaitforperiod,50
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; End of Read 1-3 times Racetracks... 
;-----------------------------------------------------------------
; Read NEWSPAPER 1-3 times Racetracks... 
;
ReadN12timesRT ; Read 12 times, with pauses, in current direction 
 dc.w WRtGosub,ReadN3timesRT-list5 
 dc.w WRtGosub,ReadN3timesRT-list5 
 dc.w WRtGosub,ReadN3timesRT-list5 
; fall through to.. 
; 
ReadN3timesRT ; Read three times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readNEWSPAPER ; read 
 dc.w Wwaitforperiod,50
ReadN2timesRT ; Read two times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readNEWSPAPER ; read 
 dc.w Wwaitforperiod,50
ReadN1timesRT ; Read one times, with pauses, in current direction 
 dc.b animateCD,3
 dc.w readNEWSPAPER ; read 
 dc.w Wwaitforperiod,50
 dc.b racetrackreturn,0,nullobject,nullobject
; 
; End of Read 1-3 times Racetracks... 
;-----------------------------------------------------------------
; 
; Racetrack routines called via TeleGosub, when talking to someone, 
; to make them turn towards you, and appear to speak...  
; 
MoveMouthEmphasisRT ; Move mouth with emphasis (as if replying) 
 dc.b Conditional,0,ActorAlive,Nullobject 
 dc.b AnimateCD,7 
 dc.w MoveMouthEmphasis 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
MoveMouthShockRT ; Move mouth with shock (as if replying) 
 dc.b Conditional,0,ActorAlive,Nullobject 
 dc.b AnimateCD,15  
 dc.w MoveMouthShock 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
MoveMouthAngerRT ; Move mouth with anger (as if replying) 
 dc.b Conditional,0,ActorAlive,Nullobject 
 dc.b AnimateCD,7 
 dc.w MoveMouthAnger 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceRobertRT ; Look at Robert 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Robert,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceWilliamRT ; Look at William 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,William,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceKathyRT ; Look at Kathy 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Kathy,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceAnthonyRT ; Look at Anthony 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Anthony,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceFionaRT ; Look at Fiona 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Fiona,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceCliffordRT ; Look at Clifford 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Clifford,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceJarvisRT ; Look at Jarvis 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Jarvis,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceVeraRT ; Look at Vera 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Vera,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject; 
;
FaceSueRT ; Look at Sue 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Sue,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceInspectorRT ; Look at Inspector 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,Inspector,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
; 
FaceUserRT ; Look at User 
FaceSamRT ; Look at Sam 
 dc.b Conditional,0,ActorStanding,Nullobject 
 dc.b FaceNoun1,0,User,NullObject 
 dc.b racetrackreturn,0,nullobject,nullobject
;
;-----------------------------------------------------------------
;
; routine used in telepathic gosubs, to make the target npc 
; sit down
SitDownRT
 dc.b iSIT,0,nullobject,nullobject ; sit anywhere
 dc.b racetrackreturn,0,nullobject,nullobject
;
; -----------------------------------------------------------------
; Wait for N turns, abandoning the wait if Sam arrives
;
Wait200orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait175orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait150orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait125orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait100orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait75orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait50orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
Wait25orSam
 dc.b conditional,0,sam,nullobject
 dc.b racetrackreturn,0,nullobject,nullobject
 dc.w Wwaitforperiod,25
;
 dc.b racetrackreturn,0,nullobject,nullobject
;
; -----------------------------------------------------------------
 even
reversaltable
; part of list5
; gives reverse directions for directions
 dc.b 0,5,4,7,2,1,8,3,6,0,0,0,0,0,15,14 ; compass directions

